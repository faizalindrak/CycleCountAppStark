(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _h(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Pp(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Eh={exports:{}},ns={},Ch={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oa=Symbol.for("react.element"),Mp=Symbol.for("react.portal"),jp=Symbol.for("react.fragment"),Lp=Symbol.for("react.strict_mode"),Bp=Symbol.for("react.profiler"),Fp=Symbol.for("react.provider"),Up=Symbol.for("react.context"),$p=Symbol.for("react.forward_ref"),zp=Symbol.for("react.suspense"),Hp=Symbol.for("react.memo"),Vp=Symbol.for("react.lazy"),nf=Symbol.iterator;function Wp(t){return t===null||typeof t!="object"?null:(t=nf&&t[nf]||t["@@iterator"],typeof t=="function"?t:null)}var Sh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ah=Object.assign,bh={};function Ei(t,e,r){this.props=t,this.context=e,this.refs=bh,this.updater=r||Sh}Ei.prototype.isReactComponent={};Ei.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ei.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ih(){}Ih.prototype=Ei.prototype;function zu(t,e,r){this.props=t,this.context=e,this.refs=bh,this.updater=r||Sh}var Hu=zu.prototype=new Ih;Hu.constructor=zu;Ah(Hu,Ei.prototype);Hu.isPureReactComponent=!0;var af=Array.isArray,Nh=Object.prototype.hasOwnProperty,Vu={current:null},Th={key:!0,ref:!0,__self:!0,__source:!0};function Oh(t,e,r){var n,i={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Nh.call(e,n)&&!Th.hasOwnProperty(n)&&(i[n]=e[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:Oa,type:t,key:a,ref:o,props:i,_owner:Vu.current}}function Gp(t,e){return{$$typeof:Oa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Wu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Oa}function Xp(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var of=/\/+/g;function Ts(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Xp(""+t.key):e.toString(36)}function po(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Oa:case Mp:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Ts(o,0):n,af(i)?(r="",t!=null&&(r=t.replace(of,"$&/")+"/"),po(i,e,r,"",function(u){return u})):i!=null&&(Wu(i)&&(i=Gp(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(of,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",af(t))for(var s=0;s<t.length;s++){a=t[s];var l=n+Ts(a,s);o+=po(a,e,r,l,i)}else if(l=Wp(t),typeof l=="function")for(t=l.call(t),s=0;!(a=t.next()).done;)a=a.value,l=n+Ts(a,s++),o+=po(a,e,r,l,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function za(t,e,r){if(t==null)return t;var n=[],i=0;return po(t,n,"","",function(a){return e.call(r,a,i++)}),n}function qp(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xt={current:null},vo={transition:null},Kp={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:vo,ReactCurrentOwner:Vu};function kh(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:za,forEach:function(t,e,r){za(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return za(t,function(){e++}),e},toArray:function(t){return za(t,function(e){return e})||[]},only:function(t){if(!Wu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=Ei;oe.Fragment=jp;oe.Profiler=Bp;oe.PureComponent=zu;oe.StrictMode=Lp;oe.Suspense=zp;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kp;oe.act=kh;oe.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Ah({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Vu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)Nh.call(e,l)&&!Th.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:Oa,type:t.type,key:i,ref:a,props:n,_owner:o}};oe.createContext=function(t){return t={$$typeof:Up,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Fp,_context:t},t.Consumer=t};oe.createElement=Oh;oe.createFactory=function(t){var e=Oh.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:$p,render:t}};oe.isValidElement=Wu;oe.lazy=function(t){return{$$typeof:Vp,_payload:{_status:-1,_result:t},_init:qp}};oe.memo=function(t,e){return{$$typeof:Hp,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=vo.transition;vo.transition={};try{t()}finally{vo.transition=e}};oe.unstable_act=kh;oe.useCallback=function(t,e){return xt.current.useCallback(t,e)};oe.useContext=function(t){return xt.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return xt.current.useDeferredValue(t)};oe.useEffect=function(t,e){return xt.current.useEffect(t,e)};oe.useId=function(){return xt.current.useId()};oe.useImperativeHandle=function(t,e,r){return xt.current.useImperativeHandle(t,e,r)};oe.useInsertionEffect=function(t,e){return xt.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return xt.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return xt.current.useMemo(t,e)};oe.useReducer=function(t,e,r){return xt.current.useReducer(t,e,r)};oe.useRef=function(t){return xt.current.useRef(t)};oe.useState=function(t){return xt.current.useState(t)};oe.useSyncExternalStore=function(t,e,r){return xt.current.useSyncExternalStore(t,e,r)};oe.useTransition=function(){return xt.current.useTransition()};oe.version="18.3.1";Ch.exports=oe;var T=Ch.exports;const Ot=_h(T);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp=T,Zp=Symbol.for("react.element"),Qp=Symbol.for("react.fragment"),Jp=Object.prototype.hasOwnProperty,ev=Yp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tv={key:!0,ref:!0,__self:!0,__source:!0};function Dh(t,e,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Jp.call(e,n)&&!tv.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Zp,type:t,key:a,ref:o,props:i,_owner:ev.current}}ns.Fragment=Qp;ns.jsx=Dh;ns.jsxs=Dh;Eh.exports=ns;var h=Eh.exports,xl={},Rh={exports:{}},Bt={},Ph={exports:{}},Mh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,L){var X=O.length;O.push(L);e:for(;0<X;){var K=X-1>>>1,Y=O[K];if(0<i(Y,L))O[K]=L,O[X]=Y,X=K;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var L=O[0],X=O.pop();if(X!==L){O[0]=X;e:for(var K=0,Y=O.length,Ce=Y>>>1;K<Ce;){var fe=2*(K+1)-1,fr=O[fe],Ke=fe+1,Zt=O[Ke];if(0>i(fr,X))Ke<Y&&0>i(Zt,fr)?(O[K]=Zt,O[Ke]=X,K=Ke):(O[K]=fr,O[fe]=X,K=fe);else if(Ke<Y&&0>i(Zt,X))O[K]=Zt,O[Ke]=X,K=Ke;else break e}}return L}function i(O,L){var X=O.sortIndex-L.sortIndex;return X!==0?X:O.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,f=null,d=3,p=!1,v=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(O){for(var L=r(u);L!==null;){if(L.callback===null)n(u);else if(L.startTime<=O)n(u),L.sortIndex=L.expirationTime,e(l,L);else break;L=r(u)}}function _(O){if(g=!1,y(O),!v)if(r(l)!==null)v=!0,ce(A);else{var L=r(u);L!==null&&P(_,L.startTime-O)}}function A(O,L){v=!1,g&&(g=!1,x(b),b=-1),p=!0;var X=d;try{for(y(L),f=r(l);f!==null&&(!(f.expirationTime>L)||O&&!J());){var K=f.callback;if(typeof K=="function"){f.callback=null,d=f.priorityLevel;var Y=K(f.expirationTime<=L);L=t.unstable_now(),typeof Y=="function"?f.callback=Y:f===r(l)&&n(l),y(L)}else n(l);f=r(l)}if(f!==null)var Ce=!0;else{var fe=r(u);fe!==null&&P(_,fe.startTime-L),Ce=!1}return Ce}finally{f=null,d=X,p=!1}}var C=!1,E=null,b=-1,D=5,R=-1;function J(){return!(t.unstable_now()-R<D)}function q(){if(E!==null){var O=t.unstable_now();R=O;var L=!0;try{L=E(!0,O)}finally{L?ee():(C=!1,E=null)}}else C=!1}var ee;if(typeof m=="function")ee=function(){m(q)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,te=z.port2;z.port1.onmessage=q,ee=function(){te.postMessage(null)}}else ee=function(){w(q,0)};function ce(O){E=O,C||(C=!0,ee())}function P(O,L){b=w(function(){O(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,ce(A))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(O){switch(d){case 1:case 2:case 3:var L=3;break;default:L=d}var X=d;d=L;try{return O()}finally{d=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,L){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var X=d;d=O;try{return L()}finally{d=X}},t.unstable_scheduleCallback=function(O,L,X){var K=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?K+X:K):X=K,O){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=X+Y,O={id:c++,callback:L,priorityLevel:O,startTime:X,expirationTime:Y,sortIndex:-1},X>K?(O.sortIndex=X,e(u,O),r(l)===null&&O===r(u)&&(g?(x(b),b=-1):g=!0,P(_,X-K))):(O.sortIndex=Y,e(l,O),v||p||(v=!0,ce(A))),O},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(O){var L=d;return function(){var X=d;d=L;try{return O.apply(this,arguments)}finally{d=X}}}})(Mh);Ph.exports=Mh;var rv=Ph.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nv=T,Lt=rv;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jh=new Set,fa={};function Rn(t,e){di(t,e),di(t+"Capture",e)}function di(t,e){for(fa[t]=e,t=0;t<e.length;t++)jh.add(e[t])}var Nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wl=Object.prototype.hasOwnProperty,iv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sf={},lf={};function av(t){return wl.call(lf,t)?!0:wl.call(sf,t)?!1:iv.test(t)?lf[t]=!0:(sf[t]=!0,!1)}function ov(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sv(t,e,r,n){if(e===null||typeof e>"u"||ov(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wt(t,e,r,n,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gu=/[\-:]([a-z])/g;function Xu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gu,Xu);st[e]=new wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gu,Xu);st[e]=new wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gu,Xu);st[e]=new wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new wt(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function qu(t,e,r,n){var i=st.hasOwnProperty(e)?st[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sv(e,r,i,n)&&(r=null),n||i===null?av(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Dr=nv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ha=Symbol.for("react.element"),Gn=Symbol.for("react.portal"),Xn=Symbol.for("react.fragment"),Ku=Symbol.for("react.strict_mode"),_l=Symbol.for("react.profiler"),Lh=Symbol.for("react.provider"),Bh=Symbol.for("react.context"),Yu=Symbol.for("react.forward_ref"),El=Symbol.for("react.suspense"),Cl=Symbol.for("react.suspense_list"),Zu=Symbol.for("react.memo"),Fr=Symbol.for("react.lazy"),Fh=Symbol.for("react.offscreen"),uf=Symbol.iterator;function Oi(t){return t===null||typeof t!="object"?null:(t=uf&&t[uf]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,Os;function Hi(t){if(Os===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Os=e&&e[1]||""}return`
`+Os+t}var ks=!1;function Ds(t,e){if(!t||ks)return"";ks=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=s);break}}}finally{ks=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Hi(t):""}function lv(t){switch(t.tag){case 5:return Hi(t.type);case 16:return Hi("Lazy");case 13:return Hi("Suspense");case 19:return Hi("SuspenseList");case 0:case 2:case 15:return t=Ds(t.type,!1),t;case 11:return t=Ds(t.type.render,!1),t;case 1:return t=Ds(t.type,!0),t;default:return""}}function Sl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xn:return"Fragment";case Gn:return"Portal";case _l:return"Profiler";case Ku:return"StrictMode";case El:return"Suspense";case Cl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Bh:return(t.displayName||"Context")+".Consumer";case Lh:return(t._context.displayName||"Context")+".Provider";case Yu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zu:return e=t.displayName||null,e!==null?e:Sl(t.type)||"Memo";case Fr:e=t._payload,t=t._init;try{return Sl(t(e))}catch{}}return null}function uv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sl(e);case 8:return e===Ku?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function nn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Uh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cv(t){var e=Uh(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Va(t){t._valueTracker||(t._valueTracker=cv(t))}function $h(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Uh(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function To(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Al(t,e){var r=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function cf(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=nn(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zh(t,e){e=e.checked,e!=null&&qu(t,"checked",e,!1)}function bl(t,e){zh(t,e);var r=nn(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Il(t,e.type,r):e.hasOwnProperty("defaultValue")&&Il(t,e.type,nn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ff(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Il(t,e,r){(e!=="number"||To(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Vi=Array.isArray;function oi(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+nn(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Nl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function df(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(j(92));if(Vi(r)){if(1<r.length)throw Error(j(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:nn(r)}}function Hh(t,e){var r=nn(e.value),n=nn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function hf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Vh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Vh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wa,Wh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wa=Wa||document.createElement("div"),Wa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function da(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Ji={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fv=["Webkit","ms","Moz","O"];Object.keys(Ji).forEach(function(t){fv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ji[e]=Ji[t]})});function Gh(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Ji.hasOwnProperty(t)&&Ji[t]?(""+e).trim():e+"px"}function Xh(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Gh(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var dv=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ol(t,e){if(e){if(dv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function kl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dl=null;function Qu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rl=null,si=null,li=null;function pf(t){if(t=Ra(t)){if(typeof Rl!="function")throw Error(j(280));var e=t.stateNode;e&&(e=ls(e),Rl(t.stateNode,t.type,e))}}function qh(t){si?li?li.push(t):li=[t]:si=t}function Kh(){if(si){var t=si,e=li;if(li=si=null,pf(t),e)for(t=0;t<e.length;t++)pf(e[t])}}function Yh(t,e){return t(e)}function Zh(){}var Rs=!1;function Qh(t,e,r){if(Rs)return t(e,r);Rs=!0;try{return Yh(t,e,r)}finally{Rs=!1,(si!==null||li!==null)&&(Zh(),Kh())}}function ha(t,e){var r=t.stateNode;if(r===null)return null;var n=ls(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(j(231,e,typeof r));return r}var Pl=!1;if(Nr)try{var ki={};Object.defineProperty(ki,"passive",{get:function(){Pl=!0}}),window.addEventListener("test",ki,ki),window.removeEventListener("test",ki,ki)}catch{Pl=!1}function hv(t,e,r,n,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(c){this.onError(c)}}var ea=!1,Oo=null,ko=!1,Ml=null,pv={onError:function(t){ea=!0,Oo=t}};function vv(t,e,r,n,i,a,o,s,l){ea=!1,Oo=null,hv.apply(pv,arguments)}function gv(t,e,r,n,i,a,o,s,l){if(vv.apply(this,arguments),ea){if(ea){var u=Oo;ea=!1,Oo=null}else throw Error(j(198));ko||(ko=!0,Ml=u)}}function Pn(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Jh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vf(t){if(Pn(t)!==t)throw Error(j(188))}function mv(t){var e=t.alternate;if(!e){if(e=Pn(t),e===null)throw Error(j(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return vf(i),t;if(a===n)return vf(i),e;a=a.sibling}throw Error(j(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,s=i.child;s;){if(s===r){o=!0,r=i,n=a;break}if(s===n){o=!0,n=i,r=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===r){o=!0,r=a,n=i;break}if(s===n){o=!0,n=a,r=i;break}s=s.sibling}if(!o)throw Error(j(189))}}if(r.alternate!==n)throw Error(j(190))}if(r.tag!==3)throw Error(j(188));return r.stateNode.current===r?t:e}function e0(t){return t=mv(t),t!==null?t0(t):null}function t0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=t0(t);if(e!==null)return e;t=t.sibling}return null}var r0=Lt.unstable_scheduleCallback,gf=Lt.unstable_cancelCallback,yv=Lt.unstable_shouldYield,xv=Lt.unstable_requestPaint,Le=Lt.unstable_now,wv=Lt.unstable_getCurrentPriorityLevel,Ju=Lt.unstable_ImmediatePriority,n0=Lt.unstable_UserBlockingPriority,Do=Lt.unstable_NormalPriority,_v=Lt.unstable_LowPriority,i0=Lt.unstable_IdlePriority,is=null,xr=null;function Ev(t){if(xr&&typeof xr.onCommitFiberRoot=="function")try{xr.onCommitFiberRoot(is,t,void 0,(t.current.flags&128)===128)}catch{}}var lr=Math.clz32?Math.clz32:Av,Cv=Math.log,Sv=Math.LN2;function Av(t){return t>>>=0,t===0?32:31-(Cv(t)/Sv|0)|0}var Ga=64,Xa=4194304;function Wi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ro(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var s=o&~i;s!==0?n=Wi(s):(a&=o,a!==0&&(n=Wi(a)))}else o=r&~i,o!==0?n=Wi(o):a!==0&&(n=Wi(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-lr(e),i=1<<r,n|=t[r],e&=~i;return n}function bv(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Iv(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-lr(a),s=1<<o,l=i[o];l===-1?(!(s&r)||s&n)&&(i[o]=bv(s,e)):l<=e&&(t.expiredLanes|=s),a&=~s}}function jl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function a0(){var t=Ga;return Ga<<=1,!(Ga&4194240)&&(Ga=64),t}function Ps(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ka(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-lr(e),t[e]=r}function Nv(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-lr(r),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~a}}function ec(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-lr(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var _e=0;function o0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var s0,tc,l0,u0,c0,Ll=!1,qa=[],Xr=null,qr=null,Kr=null,pa=new Map,va=new Map,zr=[],Tv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mf(t,e){switch(t){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":qr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":pa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":va.delete(e.pointerId)}}function Di(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Ra(e),e!==null&&tc(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Ov(t,e,r,n,i){switch(e){case"focusin":return Xr=Di(Xr,t,e,r,n,i),!0;case"dragenter":return qr=Di(qr,t,e,r,n,i),!0;case"mouseover":return Kr=Di(Kr,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return pa.set(a,Di(pa.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,va.set(a,Di(va.get(a)||null,t,e,r,n,i)),!0}return!1}function f0(t){var e=wn(t.target);if(e!==null){var r=Pn(e);if(r!==null){if(e=r.tag,e===13){if(e=Jh(r),e!==null){t.blockedOn=e,c0(t.priority,function(){l0(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function go(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Bl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Dl=n,r.target.dispatchEvent(n),Dl=null}else return e=Ra(r),e!==null&&tc(e),t.blockedOn=r,!1;e.shift()}return!0}function yf(t,e,r){go(t)&&r.delete(e)}function kv(){Ll=!1,Xr!==null&&go(Xr)&&(Xr=null),qr!==null&&go(qr)&&(qr=null),Kr!==null&&go(Kr)&&(Kr=null),pa.forEach(yf),va.forEach(yf)}function Ri(t,e){t.blockedOn===e&&(t.blockedOn=null,Ll||(Ll=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,kv)))}function ga(t){function e(i){return Ri(i,t)}if(0<qa.length){Ri(qa[0],t);for(var r=1;r<qa.length;r++){var n=qa[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Xr!==null&&Ri(Xr,t),qr!==null&&Ri(qr,t),Kr!==null&&Ri(Kr,t),pa.forEach(e),va.forEach(e),r=0;r<zr.length;r++)n=zr[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<zr.length&&(r=zr[0],r.blockedOn===null);)f0(r),r.blockedOn===null&&zr.shift()}var ui=Dr.ReactCurrentBatchConfig,Po=!0;function Dv(t,e,r,n){var i=_e,a=ui.transition;ui.transition=null;try{_e=1,rc(t,e,r,n)}finally{_e=i,ui.transition=a}}function Rv(t,e,r,n){var i=_e,a=ui.transition;ui.transition=null;try{_e=4,rc(t,e,r,n)}finally{_e=i,ui.transition=a}}function rc(t,e,r,n){if(Po){var i=Bl(t,e,r,n);if(i===null)Vs(t,e,n,Mo,r),mf(t,n);else if(Ov(i,t,e,r,n))n.stopPropagation();else if(mf(t,n),e&4&&-1<Tv.indexOf(t)){for(;i!==null;){var a=Ra(i);if(a!==null&&s0(a),a=Bl(t,e,r,n),a===null&&Vs(t,e,n,Mo,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else Vs(t,e,n,null,r)}}var Mo=null;function Bl(t,e,r,n){if(Mo=null,t=Qu(n),t=wn(t),t!==null)if(e=Pn(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Jh(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Mo=t,null}function d0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wv()){case Ju:return 1;case n0:return 4;case Do:case _v:return 16;case i0:return 536870912;default:return 16}default:return 16}}var Wr=null,nc=null,mo=null;function h0(){if(mo)return mo;var t,e=nc,r=e.length,n,i="value"in Wr?Wr.value:Wr.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[a-n];n++);return mo=i.slice(t,1<n?1-n:void 0)}function yo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ka(){return!0}function xf(){return!1}function Ft(t){function e(r,n,i,a,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(r=t[s],this[s]=r?r(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ka:xf,this.isPropagationStopped=xf,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ka)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ka)},persist:function(){},isPersistent:Ka}),e}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ic=Ft(Ci),Da=Me({},Ci,{view:0,detail:0}),Pv=Ft(Da),Ms,js,Pi,as=Me({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ac,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pi&&(Pi&&t.type==="mousemove"?(Ms=t.screenX-Pi.screenX,js=t.screenY-Pi.screenY):js=Ms=0,Pi=t),Ms)},movementY:function(t){return"movementY"in t?t.movementY:js}}),wf=Ft(as),Mv=Me({},as,{dataTransfer:0}),jv=Ft(Mv),Lv=Me({},Da,{relatedTarget:0}),Ls=Ft(Lv),Bv=Me({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),Fv=Ft(Bv),Uv=Me({},Ci,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$v=Ft(Uv),zv=Me({},Ci,{data:0}),_f=Ft(zv),Hv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Wv[t])?!!e[t]:!1}function ac(){return Gv}var Xv=Me({},Da,{key:function(t){if(t.key){var e=Hv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ac,charCode:function(t){return t.type==="keypress"?yo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qv=Ft(Xv),Kv=Me({},as,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ef=Ft(Kv),Yv=Me({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ac}),Zv=Ft(Yv),Qv=Me({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jv=Ft(Qv),eg=Me({},as,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tg=Ft(eg),rg=[9,13,27,32],oc=Nr&&"CompositionEvent"in window,ta=null;Nr&&"documentMode"in document&&(ta=document.documentMode);var ng=Nr&&"TextEvent"in window&&!ta,p0=Nr&&(!oc||ta&&8<ta&&11>=ta),Cf=" ",Sf=!1;function v0(t,e){switch(t){case"keyup":return rg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function g0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qn=!1;function ig(t,e){switch(t){case"compositionend":return g0(e);case"keypress":return e.which!==32?null:(Sf=!0,Cf);case"textInput":return t=e.data,t===Cf&&Sf?null:t;default:return null}}function ag(t,e){if(qn)return t==="compositionend"||!oc&&v0(t,e)?(t=h0(),mo=nc=Wr=null,qn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return p0&&e.locale!=="ko"?null:e.data;default:return null}}var og={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Af(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!og[t.type]:e==="textarea"}function m0(t,e,r,n){qh(n),e=jo(e,"onChange"),0<e.length&&(r=new ic("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ra=null,ma=null;function sg(t){N0(t,0)}function os(t){var e=Zn(t);if($h(e))return t}function lg(t,e){if(t==="change")return e}var y0=!1;if(Nr){var Bs;if(Nr){var Fs="oninput"in document;if(!Fs){var bf=document.createElement("div");bf.setAttribute("oninput","return;"),Fs=typeof bf.oninput=="function"}Bs=Fs}else Bs=!1;y0=Bs&&(!document.documentMode||9<document.documentMode)}function If(){ra&&(ra.detachEvent("onpropertychange",x0),ma=ra=null)}function x0(t){if(t.propertyName==="value"&&os(ma)){var e=[];m0(e,ma,t,Qu(t)),Qh(sg,e)}}function ug(t,e,r){t==="focusin"?(If(),ra=e,ma=r,ra.attachEvent("onpropertychange",x0)):t==="focusout"&&If()}function cg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return os(ma)}function fg(t,e){if(t==="click")return os(e)}function dg(t,e){if(t==="input"||t==="change")return os(e)}function hg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cr=typeof Object.is=="function"?Object.is:hg;function ya(t,e){if(cr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!wl.call(e,i)||!cr(t[i],e[i]))return!1}return!0}function Nf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tf(t,e){var r=Nf(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Nf(r)}}function w0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?w0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _0(){for(var t=window,e=To();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=To(t.document)}return e}function sc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pg(t){var e=_0(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&w0(r.ownerDocument.documentElement,r)){if(n!==null&&sc(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=Tf(r,a);var o=Tf(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var vg=Nr&&"documentMode"in document&&11>=document.documentMode,Kn=null,Fl=null,na=null,Ul=!1;function Of(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ul||Kn==null||Kn!==To(n)||(n=Kn,"selectionStart"in n&&sc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),na&&ya(na,n)||(na=n,n=jo(Fl,"onSelect"),0<n.length&&(e=new ic("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Kn)))}function Ya(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Yn={animationend:Ya("Animation","AnimationEnd"),animationiteration:Ya("Animation","AnimationIteration"),animationstart:Ya("Animation","AnimationStart"),transitionend:Ya("Transition","TransitionEnd")},Us={},E0={};Nr&&(E0=document.createElement("div").style,"AnimationEvent"in window||(delete Yn.animationend.animation,delete Yn.animationiteration.animation,delete Yn.animationstart.animation),"TransitionEvent"in window||delete Yn.transitionend.transition);function ss(t){if(Us[t])return Us[t];if(!Yn[t])return t;var e=Yn[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in E0)return Us[t]=e[r];return t}var C0=ss("animationend"),S0=ss("animationiteration"),A0=ss("animationstart"),b0=ss("transitionend"),I0=new Map,kf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function on(t,e){I0.set(t,e),Rn(e,[t])}for(var $s=0;$s<kf.length;$s++){var zs=kf[$s],gg=zs.toLowerCase(),mg=zs[0].toUpperCase()+zs.slice(1);on(gg,"on"+mg)}on(C0,"onAnimationEnd");on(S0,"onAnimationIteration");on(A0,"onAnimationStart");on("dblclick","onDoubleClick");on("focusin","onFocus");on("focusout","onBlur");on(b0,"onTransitionEnd");di("onMouseEnter",["mouseout","mouseover"]);di("onMouseLeave",["mouseout","mouseover"]);di("onPointerEnter",["pointerout","pointerover"]);di("onPointerLeave",["pointerout","pointerover"]);Rn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gi));function Df(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,gv(n,e,void 0,t),t.currentTarget=null}function N0(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Df(i,s,u),a=l}else for(o=0;o<n.length;o++){if(s=n[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Df(i,s,u),a=l}}}if(ko)throw t=Ml,ko=!1,Ml=null,t}function Ie(t,e){var r=e[Wl];r===void 0&&(r=e[Wl]=new Set);var n=t+"__bubble";r.has(n)||(T0(e,t,2,!1),r.add(n))}function Hs(t,e,r){var n=0;e&&(n|=4),T0(r,t,n,e)}var Za="_reactListening"+Math.random().toString(36).slice(2);function xa(t){if(!t[Za]){t[Za]=!0,jh.forEach(function(r){r!=="selectionchange"&&(yg.has(r)||Hs(r,!1,t),Hs(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Za]||(e[Za]=!0,Hs("selectionchange",!1,e))}}function T0(t,e,r,n){switch(d0(e)){case 1:var i=Dv;break;case 4:i=Rv;break;default:i=rc}r=i.bind(null,e,r,t),i=void 0,!Pl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Vs(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=wn(s),o===null)return;if(l=o.tag,l===5||l===6){n=a=o;continue e}s=s.parentNode}}n=n.return}Qh(function(){var u=a,c=Qu(r),f=[];e:{var d=I0.get(t);if(d!==void 0){var p=ic,v=t;switch(t){case"keypress":if(yo(r)===0)break e;case"keydown":case"keyup":p=qv;break;case"focusin":v="focus",p=Ls;break;case"focusout":v="blur",p=Ls;break;case"beforeblur":case"afterblur":p=Ls;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=wf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=jv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Zv;break;case C0:case S0:case A0:p=Fv;break;case b0:p=Jv;break;case"scroll":p=Pv;break;case"wheel":p=tg;break;case"copy":case"cut":case"paste":p=$v;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Ef}var g=(e&4)!==0,w=!g&&t==="scroll",x=g?d!==null?d+"Capture":null:d;g=[];for(var m=u,y;m!==null;){y=m;var _=y.stateNode;if(y.tag===5&&_!==null&&(y=_,x!==null&&(_=ha(m,x),_!=null&&g.push(wa(m,_,y)))),w)break;m=m.return}0<g.length&&(d=new p(d,v,null,r,c),f.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",d&&r!==Dl&&(v=r.relatedTarget||r.fromElement)&&(wn(v)||v[Tr]))break e;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(v=r.relatedTarget||r.toElement,p=u,v=v?wn(v):null,v!==null&&(w=Pn(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(g=wf,_="onMouseLeave",x="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(g=Ef,_="onPointerLeave",x="onPointerEnter",m="pointer"),w=p==null?d:Zn(p),y=v==null?d:Zn(v),d=new g(_,m+"leave",p,r,c),d.target=w,d.relatedTarget=y,_=null,wn(c)===u&&(g=new g(x,m+"enter",v,r,c),g.target=y,g.relatedTarget=w,_=g),w=_,p&&v)t:{for(g=p,x=v,m=0,y=g;y;y=Ln(y))m++;for(y=0,_=x;_;_=Ln(_))y++;for(;0<m-y;)g=Ln(g),m--;for(;0<y-m;)x=Ln(x),y--;for(;m--;){if(g===x||x!==null&&g===x.alternate)break t;g=Ln(g),x=Ln(x)}g=null}else g=null;p!==null&&Rf(f,d,p,g,!1),v!==null&&w!==null&&Rf(f,w,v,g,!0)}}e:{if(d=u?Zn(u):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var A=lg;else if(Af(d))if(y0)A=dg;else{A=cg;var C=ug}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(A=fg);if(A&&(A=A(t,u))){m0(f,A,r,c);break e}C&&C(t,d,u),t==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&Il(d,"number",d.value)}switch(C=u?Zn(u):window,t){case"focusin":(Af(C)||C.contentEditable==="true")&&(Kn=C,Fl=u,na=null);break;case"focusout":na=Fl=Kn=null;break;case"mousedown":Ul=!0;break;case"contextmenu":case"mouseup":case"dragend":Ul=!1,Of(f,r,c);break;case"selectionchange":if(vg)break;case"keydown":case"keyup":Of(f,r,c)}var E;if(oc)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qn?v0(t,r)&&(b="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(b="onCompositionStart");b&&(p0&&r.locale!=="ko"&&(qn||b!=="onCompositionStart"?b==="onCompositionEnd"&&qn&&(E=h0()):(Wr=c,nc="value"in Wr?Wr.value:Wr.textContent,qn=!0)),C=jo(u,b),0<C.length&&(b=new _f(b,t,null,r,c),f.push({event:b,listeners:C}),E?b.data=E:(E=g0(r),E!==null&&(b.data=E)))),(E=ng?ig(t,r):ag(t,r))&&(u=jo(u,"onBeforeInput"),0<u.length&&(c=new _f("onBeforeInput","beforeinput",null,r,c),f.push({event:c,listeners:u}),c.data=E))}N0(f,e)})}function wa(t,e,r){return{instance:t,listener:e,currentTarget:r}}function jo(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=ha(t,r),a!=null&&n.unshift(wa(t,a,i)),a=ha(t,e),a!=null&&n.push(wa(t,a,i))),t=t.return}return n}function Ln(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Rf(t,e,r,n,i){for(var a=e._reactName,o=[];r!==null&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&u!==null&&(s=u,i?(l=ha(r,a),l!=null&&o.unshift(wa(r,l,s))):i||(l=ha(r,a),l!=null&&o.push(wa(r,l,s)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var xg=/\r\n?/g,wg=/\u0000|\uFFFD/g;function Pf(t){return(typeof t=="string"?t:""+t).replace(xg,`
`).replace(wg,"")}function Qa(t,e,r){if(e=Pf(e),Pf(t)!==e&&r)throw Error(j(425))}function Lo(){}var $l=null,zl=null;function Hl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vl=typeof setTimeout=="function"?setTimeout:void 0,_g=typeof clearTimeout=="function"?clearTimeout:void 0,Mf=typeof Promise=="function"?Promise:void 0,Eg=typeof queueMicrotask=="function"?queueMicrotask:typeof Mf<"u"?function(t){return Mf.resolve(null).then(t).catch(Cg)}:Vl;function Cg(t){setTimeout(function(){throw t})}function Ws(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),ga(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);ga(e)}function Yr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Si=Math.random().toString(36).slice(2),mr="__reactFiber$"+Si,_a="__reactProps$"+Si,Tr="__reactContainer$"+Si,Wl="__reactEvents$"+Si,Sg="__reactListeners$"+Si,Ag="__reactHandles$"+Si;function wn(t){var e=t[mr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Tr]||r[mr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=jf(t);t!==null;){if(r=t[mr])return r;t=jf(t)}return e}t=r,r=t.parentNode}return null}function Ra(t){return t=t[mr]||t[Tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function ls(t){return t[_a]||null}var Gl=[],Qn=-1;function sn(t){return{current:t}}function Oe(t){0>Qn||(t.current=Gl[Qn],Gl[Qn]=null,Qn--)}function Ae(t,e){Qn++,Gl[Qn]=t.current,t.current=e}var an={},dt=sn(an),It=sn(!1),Nn=an;function hi(t,e){var r=t.type.contextTypes;if(!r)return an;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Nt(t){return t=t.childContextTypes,t!=null}function Bo(){Oe(It),Oe(dt)}function Lf(t,e,r){if(dt.current!==an)throw Error(j(168));Ae(dt,e),Ae(It,r)}function O0(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(j(108,uv(t)||"Unknown",i));return Me({},r,n)}function Fo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||an,Nn=dt.current,Ae(dt,t),Ae(It,It.current),!0}function Bf(t,e,r){var n=t.stateNode;if(!n)throw Error(j(169));r?(t=O0(t,e,Nn),n.__reactInternalMemoizedMergedChildContext=t,Oe(It),Oe(dt),Ae(dt,t)):Oe(It),Ae(It,r)}var Sr=null,us=!1,Gs=!1;function k0(t){Sr===null?Sr=[t]:Sr.push(t)}function bg(t){us=!0,k0(t)}function ln(){if(!Gs&&Sr!==null){Gs=!0;var t=0,e=_e;try{var r=Sr;for(_e=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Sr=null,us=!1}catch(i){throw Sr!==null&&(Sr=Sr.slice(t+1)),r0(Ju,ln),i}finally{_e=e,Gs=!1}}return null}var Jn=[],ei=0,Uo=null,$o=0,zt=[],Ht=0,Tn=null,Ar=1,br="";function vn(t,e){Jn[ei++]=$o,Jn[ei++]=Uo,Uo=t,$o=e}function D0(t,e,r){zt[Ht++]=Ar,zt[Ht++]=br,zt[Ht++]=Tn,Tn=t;var n=Ar;t=br;var i=32-lr(n)-1;n&=~(1<<i),r+=1;var a=32-lr(e)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Ar=1<<32-lr(e)+i|r<<i|n,br=a+t}else Ar=1<<a|r<<i|n,br=t}function lc(t){t.return!==null&&(vn(t,1),D0(t,1,0))}function uc(t){for(;t===Uo;)Uo=Jn[--ei],Jn[ei]=null,$o=Jn[--ei],Jn[ei]=null;for(;t===Tn;)Tn=zt[--Ht],zt[Ht]=null,br=zt[--Ht],zt[Ht]=null,Ar=zt[--Ht],zt[Ht]=null}var Mt=null,Rt=null,De=!1,ar=null;function R0(t,e){var r=Vt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Ff(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mt=t,Rt=Yr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mt=t,Rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Tn!==null?{id:Ar,overflow:br}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Vt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Mt=t,Rt=null,!0):!1;default:return!1}}function Xl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ql(t){if(De){var e=Rt;if(e){var r=e;if(!Ff(t,e)){if(Xl(t))throw Error(j(418));e=Yr(r.nextSibling);var n=Mt;e&&Ff(t,e)?R0(n,r):(t.flags=t.flags&-4097|2,De=!1,Mt=t)}}else{if(Xl(t))throw Error(j(418));t.flags=t.flags&-4097|2,De=!1,Mt=t}}}function Uf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mt=t}function Ja(t){if(t!==Mt)return!1;if(!De)return Uf(t),De=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Hl(t.type,t.memoizedProps)),e&&(e=Rt)){if(Xl(t))throw P0(),Error(j(418));for(;e;)R0(t,e),e=Yr(e.nextSibling)}if(Uf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Rt=Yr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Rt=null}}else Rt=Mt?Yr(t.stateNode.nextSibling):null;return!0}function P0(){for(var t=Rt;t;)t=Yr(t.nextSibling)}function pi(){Rt=Mt=null,De=!1}function cc(t){ar===null?ar=[t]:ar.push(t)}var Ig=Dr.ReactCurrentBatchConfig;function Mi(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(j(309));var n=r.stateNode}if(!n)throw Error(j(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(j(284));if(!r._owner)throw Error(j(290,t))}return t}function eo(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $f(t){var e=t._init;return e(t._payload)}function M0(t){function e(x,m){if(t){var y=x.deletions;y===null?(x.deletions=[m],x.flags|=16):y.push(m)}}function r(x,m){if(!t)return null;for(;m!==null;)e(x,m),m=m.sibling;return null}function n(x,m){for(x=new Map;m!==null;)m.key!==null?x.set(m.key,m):x.set(m.index,m),m=m.sibling;return x}function i(x,m){return x=en(x,m),x.index=0,x.sibling=null,x}function a(x,m,y){return x.index=y,t?(y=x.alternate,y!==null?(y=y.index,y<m?(x.flags|=2,m):y):(x.flags|=2,m)):(x.flags|=1048576,m)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function s(x,m,y,_){return m===null||m.tag!==6?(m=Js(y,x.mode,_),m.return=x,m):(m=i(m,y),m.return=x,m)}function l(x,m,y,_){var A=y.type;return A===Xn?c(x,m,y.props.children,_,y.key):m!==null&&(m.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Fr&&$f(A)===m.type)?(_=i(m,y.props),_.ref=Mi(x,m,y),_.return=x,_):(_=Ao(y.type,y.key,y.props,null,x.mode,_),_.ref=Mi(x,m,y),_.return=x,_)}function u(x,m,y,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=el(y,x.mode,_),m.return=x,m):(m=i(m,y.children||[]),m.return=x,m)}function c(x,m,y,_,A){return m===null||m.tag!==7?(m=bn(y,x.mode,_,A),m.return=x,m):(m=i(m,y),m.return=x,m)}function f(x,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Js(""+m,x.mode,y),m.return=x,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ha:return y=Ao(m.type,m.key,m.props,null,x.mode,y),y.ref=Mi(x,null,m),y.return=x,y;case Gn:return m=el(m,x.mode,y),m.return=x,m;case Fr:var _=m._init;return f(x,_(m._payload),y)}if(Vi(m)||Oi(m))return m=bn(m,x.mode,y,null),m.return=x,m;eo(x,m)}return null}function d(x,m,y,_){var A=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return A!==null?null:s(x,m,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ha:return y.key===A?l(x,m,y,_):null;case Gn:return y.key===A?u(x,m,y,_):null;case Fr:return A=y._init,d(x,m,A(y._payload),_)}if(Vi(y)||Oi(y))return A!==null?null:c(x,m,y,_,null);eo(x,y)}return null}function p(x,m,y,_,A){if(typeof _=="string"&&_!==""||typeof _=="number")return x=x.get(y)||null,s(m,x,""+_,A);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ha:return x=x.get(_.key===null?y:_.key)||null,l(m,x,_,A);case Gn:return x=x.get(_.key===null?y:_.key)||null,u(m,x,_,A);case Fr:var C=_._init;return p(x,m,y,C(_._payload),A)}if(Vi(_)||Oi(_))return x=x.get(y)||null,c(m,x,_,A,null);eo(m,_)}return null}function v(x,m,y,_){for(var A=null,C=null,E=m,b=m=0,D=null;E!==null&&b<y.length;b++){E.index>b?(D=E,E=null):D=E.sibling;var R=d(x,E,y[b],_);if(R===null){E===null&&(E=D);break}t&&E&&R.alternate===null&&e(x,E),m=a(R,m,b),C===null?A=R:C.sibling=R,C=R,E=D}if(b===y.length)return r(x,E),De&&vn(x,b),A;if(E===null){for(;b<y.length;b++)E=f(x,y[b],_),E!==null&&(m=a(E,m,b),C===null?A=E:C.sibling=E,C=E);return De&&vn(x,b),A}for(E=n(x,E);b<y.length;b++)D=p(E,x,b,y[b],_),D!==null&&(t&&D.alternate!==null&&E.delete(D.key===null?b:D.key),m=a(D,m,b),C===null?A=D:C.sibling=D,C=D);return t&&E.forEach(function(J){return e(x,J)}),De&&vn(x,b),A}function g(x,m,y,_){var A=Oi(y);if(typeof A!="function")throw Error(j(150));if(y=A.call(y),y==null)throw Error(j(151));for(var C=A=null,E=m,b=m=0,D=null,R=y.next();E!==null&&!R.done;b++,R=y.next()){E.index>b?(D=E,E=null):D=E.sibling;var J=d(x,E,R.value,_);if(J===null){E===null&&(E=D);break}t&&E&&J.alternate===null&&e(x,E),m=a(J,m,b),C===null?A=J:C.sibling=J,C=J,E=D}if(R.done)return r(x,E),De&&vn(x,b),A;if(E===null){for(;!R.done;b++,R=y.next())R=f(x,R.value,_),R!==null&&(m=a(R,m,b),C===null?A=R:C.sibling=R,C=R);return De&&vn(x,b),A}for(E=n(x,E);!R.done;b++,R=y.next())R=p(E,x,b,R.value,_),R!==null&&(t&&R.alternate!==null&&E.delete(R.key===null?b:R.key),m=a(R,m,b),C===null?A=R:C.sibling=R,C=R);return t&&E.forEach(function(q){return e(x,q)}),De&&vn(x,b),A}function w(x,m,y,_){if(typeof y=="object"&&y!==null&&y.type===Xn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ha:e:{for(var A=y.key,C=m;C!==null;){if(C.key===A){if(A=y.type,A===Xn){if(C.tag===7){r(x,C.sibling),m=i(C,y.props.children),m.return=x,x=m;break e}}else if(C.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Fr&&$f(A)===C.type){r(x,C.sibling),m=i(C,y.props),m.ref=Mi(x,C,y),m.return=x,x=m;break e}r(x,C);break}else e(x,C);C=C.sibling}y.type===Xn?(m=bn(y.props.children,x.mode,_,y.key),m.return=x,x=m):(_=Ao(y.type,y.key,y.props,null,x.mode,_),_.ref=Mi(x,m,y),_.return=x,x=_)}return o(x);case Gn:e:{for(C=y.key;m!==null;){if(m.key===C)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){r(x,m.sibling),m=i(m,y.children||[]),m.return=x,x=m;break e}else{r(x,m);break}else e(x,m);m=m.sibling}m=el(y,x.mode,_),m.return=x,x=m}return o(x);case Fr:return C=y._init,w(x,m,C(y._payload),_)}if(Vi(y))return v(x,m,y,_);if(Oi(y))return g(x,m,y,_);eo(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(r(x,m.sibling),m=i(m,y),m.return=x,x=m):(r(x,m),m=Js(y,x.mode,_),m.return=x,x=m),o(x)):r(x,m)}return w}var vi=M0(!0),j0=M0(!1),zo=sn(null),Ho=null,ti=null,fc=null;function dc(){fc=ti=Ho=null}function hc(t){var e=zo.current;Oe(zo),t._currentValue=e}function Kl(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ci(t,e){Ho=t,fc=ti=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bt=!0),t.firstContext=null)}function Kt(t){var e=t._currentValue;if(fc!==t)if(t={context:t,memoizedValue:e,next:null},ti===null){if(Ho===null)throw Error(j(308));ti=t,Ho.dependencies={lanes:0,firstContext:t}}else ti=ti.next=t;return e}var _n=null;function pc(t){_n===null?_n=[t]:_n.push(t)}function L0(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,pc(e)):(r.next=i.next,i.next=r),e.interleaved=r,Or(t,n)}function Or(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ur=!1;function vc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function B0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ir(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zr(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,he&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Or(t,r)}return i=n.interleaved,i===null?(e.next=e,pc(n)):(e.next=i.next,i.next=e),n.interleaved=e,Or(t,r)}function xo(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ec(t,r)}}function zf(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Vo(t,e,r,n){var i=t.updateQueue;Ur=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?a=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;o=0,c=u=l=null,s=a;do{var d=s.lane,p=s.eventTime;if((n&d)===d){c!==null&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var v=t,g=s;switch(d=e,p=r,g.tag){case 1:if(v=g.payload,typeof v=="function"){f=v.call(p,f,d);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,d=typeof v=="function"?v.call(p,f,d):v,d==null)break e;f=Me({},f,d);break e;case 2:Ur=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=p,l=f):c=c.next=p,o|=d;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;d=s,s=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);kn|=o,t.lanes=o,t.memoizedState=f}}function Hf(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(j(191,i));i.call(n)}}}var Pa={},wr=sn(Pa),Ea=sn(Pa),Ca=sn(Pa);function En(t){if(t===Pa)throw Error(j(174));return t}function gc(t,e){switch(Ae(Ca,e),Ae(Ea,t),Ae(wr,Pa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Tl(e,t)}Oe(wr),Ae(wr,e)}function gi(){Oe(wr),Oe(Ea),Oe(Ca)}function F0(t){En(Ca.current);var e=En(wr.current),r=Tl(e,t.type);e!==r&&(Ae(Ea,t),Ae(wr,r))}function mc(t){Ea.current===t&&(Oe(wr),Oe(Ea))}var Re=sn(0);function Wo(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xs=[];function yc(){for(var t=0;t<Xs.length;t++)Xs[t]._workInProgressVersionPrimary=null;Xs.length=0}var wo=Dr.ReactCurrentDispatcher,qs=Dr.ReactCurrentBatchConfig,On=0,Pe=null,He=null,Qe=null,Go=!1,ia=!1,Sa=0,Ng=0;function lt(){throw Error(j(321))}function xc(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!cr(t[r],e[r]))return!1;return!0}function wc(t,e,r,n,i,a){if(On=a,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wo.current=t===null||t.memoizedState===null?Dg:Rg,t=r(n,i),ia){a=0;do{if(ia=!1,Sa=0,25<=a)throw Error(j(301));a+=1,Qe=He=null,e.updateQueue=null,wo.current=Pg,t=r(n,i)}while(ia)}if(wo.current=Xo,e=He!==null&&He.next!==null,On=0,Qe=He=Pe=null,Go=!1,e)throw Error(j(300));return t}function _c(){var t=Sa!==0;return Sa=0,t}function vr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Pe.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function Yt(){if(He===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Qe===null?Pe.memoizedState:Qe.next;if(e!==null)Qe=e,He=t;else{if(t===null)throw Error(j(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Qe===null?Pe.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function Aa(t,e){return typeof e=="function"?e(t):e}function Ks(t){var e=Yt(),r=e.queue;if(r===null)throw Error(j(311));r.lastRenderedReducer=t;var n=He,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var s=o=null,l=null,u=a;do{var c=u.lane;if((On&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=f,o=n):l=l.next=f,Pe.lanes|=c,kn|=c}u=u.next}while(u!==null&&u!==a);l===null?o=n:l.next=s,cr(n,e.memoizedState)||(bt=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do a=i.lane,Pe.lanes|=a,kn|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Ys(t){var e=Yt(),r=e.queue;if(r===null)throw Error(j(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);cr(a,e.memoizedState)||(bt=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function U0(){}function $0(t,e){var r=Pe,n=Yt(),i=e(),a=!cr(n.memoizedState,i);if(a&&(n.memoizedState=i,bt=!0),n=n.queue,Ec(V0.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||Qe!==null&&Qe.memoizedState.tag&1){if(r.flags|=2048,ba(9,H0.bind(null,r,n,i,e),void 0,null),tt===null)throw Error(j(349));On&30||z0(r,e,i)}return i}function z0(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function H0(t,e,r,n){e.value=r,e.getSnapshot=n,W0(e)&&G0(t)}function V0(t,e,r){return r(function(){W0(e)&&G0(t)})}function W0(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!cr(t,r)}catch{return!0}}function G0(t){var e=Or(t,1);e!==null&&ur(e,t,1,-1)}function Vf(t){var e=vr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:t},e.queue=t,t=t.dispatch=kg.bind(null,Pe,t),[e.memoizedState,t]}function ba(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function X0(){return Yt().memoizedState}function _o(t,e,r,n){var i=vr();Pe.flags|=t,i.memoizedState=ba(1|e,r,void 0,n===void 0?null:n)}function cs(t,e,r,n){var i=Yt();n=n===void 0?null:n;var a=void 0;if(He!==null){var o=He.memoizedState;if(a=o.destroy,n!==null&&xc(n,o.deps)){i.memoizedState=ba(e,r,a,n);return}}Pe.flags|=t,i.memoizedState=ba(1|e,r,a,n)}function Wf(t,e){return _o(8390656,8,t,e)}function Ec(t,e){return cs(2048,8,t,e)}function q0(t,e){return cs(4,2,t,e)}function K0(t,e){return cs(4,4,t,e)}function Y0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Z0(t,e,r){return r=r!=null?r.concat([t]):null,cs(4,4,Y0.bind(null,e,t),r)}function Cc(){}function Q0(t,e){var r=Yt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&xc(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function J0(t,e){var r=Yt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&xc(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function e1(t,e,r){return On&21?(cr(r,e)||(r=a0(),Pe.lanes|=r,kn|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bt=!0),t.memoizedState=r)}function Tg(t,e){var r=_e;_e=r!==0&&4>r?r:4,t(!0);var n=qs.transition;qs.transition={};try{t(!1),e()}finally{_e=r,qs.transition=n}}function t1(){return Yt().memoizedState}function Og(t,e,r){var n=Jr(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},r1(t))n1(e,r);else if(r=L0(t,e,r,n),r!==null){var i=yt();ur(r,t,n,i),i1(r,e,n)}}function kg(t,e,r){var n=Jr(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(r1(t))n1(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,r);if(i.hasEagerState=!0,i.eagerState=s,cr(s,o)){var l=e.interleaved;l===null?(i.next=i,pc(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=L0(t,e,i,n),r!==null&&(i=yt(),ur(r,t,n,i),i1(r,e,n))}}function r1(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function n1(t,e){ia=Go=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function i1(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ec(t,r)}}var Xo={readContext:Kt,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},Dg={readContext:Kt,useCallback:function(t,e){return vr().memoizedState=[t,e===void 0?null:e],t},useContext:Kt,useEffect:Wf,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,_o(4194308,4,Y0.bind(null,e,t),r)},useLayoutEffect:function(t,e){return _o(4194308,4,t,e)},useInsertionEffect:function(t,e){return _o(4,2,t,e)},useMemo:function(t,e){var r=vr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=vr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Og.bind(null,Pe,t),[n.memoizedState,t]},useRef:function(t){var e=vr();return t={current:t},e.memoizedState=t},useState:Vf,useDebugValue:Cc,useDeferredValue:function(t){return vr().memoizedState=t},useTransition:function(){var t=Vf(!1),e=t[0];return t=Tg.bind(null,t[1]),vr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Pe,i=vr();if(De){if(r===void 0)throw Error(j(407));r=r()}else{if(r=e(),tt===null)throw Error(j(349));On&30||z0(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,Wf(V0.bind(null,n,a,t),[t]),n.flags|=2048,ba(9,H0.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=vr(),e=tt.identifierPrefix;if(De){var r=br,n=Ar;r=(n&~(1<<32-lr(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Sa++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Ng++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Rg={readContext:Kt,useCallback:Q0,useContext:Kt,useEffect:Ec,useImperativeHandle:Z0,useInsertionEffect:q0,useLayoutEffect:K0,useMemo:J0,useReducer:Ks,useRef:X0,useState:function(){return Ks(Aa)},useDebugValue:Cc,useDeferredValue:function(t){var e=Yt();return e1(e,He.memoizedState,t)},useTransition:function(){var t=Ks(Aa)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:U0,useSyncExternalStore:$0,useId:t1,unstable_isNewReconciler:!1},Pg={readContext:Kt,useCallback:Q0,useContext:Kt,useEffect:Ec,useImperativeHandle:Z0,useInsertionEffect:q0,useLayoutEffect:K0,useMemo:J0,useReducer:Ys,useRef:X0,useState:function(){return Ys(Aa)},useDebugValue:Cc,useDeferredValue:function(t){var e=Yt();return He===null?e.memoizedState=t:e1(e,He.memoizedState,t)},useTransition:function(){var t=Ys(Aa)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:U0,useSyncExternalStore:$0,useId:t1,unstable_isNewReconciler:!1};function rr(t,e){if(t&&t.defaultProps){e=Me({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Yl(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Me({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var fs={isMounted:function(t){return(t=t._reactInternals)?Pn(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=yt(),i=Jr(t),a=Ir(n,i);a.payload=e,r!=null&&(a.callback=r),e=Zr(t,a,i),e!==null&&(ur(e,t,i,n),xo(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=yt(),i=Jr(t),a=Ir(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=Zr(t,a,i),e!==null&&(ur(e,t,i,n),xo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=yt(),n=Jr(t),i=Ir(r,n);i.tag=2,e!=null&&(i.callback=e),e=Zr(t,i,n),e!==null&&(ur(e,t,n,r),xo(e,t,n))}};function Gf(t,e,r,n,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!ya(r,n)||!ya(i,a):!0}function a1(t,e,r){var n=!1,i=an,a=e.contextType;return typeof a=="object"&&a!==null?a=Kt(a):(i=Nt(e)?Nn:dt.current,n=e.contextTypes,a=(n=n!=null)?hi(t,i):an),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fs,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function Xf(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&fs.enqueueReplaceState(e,e.state,null)}function Zl(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},vc(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Kt(a):(a=Nt(e)?Nn:dt.current,i.context=hi(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Yl(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&fs.enqueueReplaceState(i,i.state,null),Vo(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function mi(t,e){try{var r="",n=e;do r+=lv(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Zs(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Ql(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Mg=typeof WeakMap=="function"?WeakMap:Map;function o1(t,e,r){r=Ir(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Ko||(Ko=!0,lu=n),Ql(t,e)},r}function s1(t,e,r){r=Ir(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Ql(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Ql(t,e),typeof n!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function qf(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Mg;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Kg.bind(null,t,e,r),e.then(t,t))}function Kf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yf(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ir(-1,1),e.tag=2,Zr(r,e,1))),r.lanes|=1),t)}var jg=Dr.ReactCurrentOwner,bt=!1;function mt(t,e,r,n){e.child=t===null?j0(e,null,r,n):vi(e,t.child,r,n)}function Zf(t,e,r,n,i){r=r.render;var a=e.ref;return ci(e,i),n=wc(t,e,r,n,a,i),r=_c(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kr(t,e,i)):(De&&r&&lc(e),e.flags|=1,mt(t,e,n,i),e.child)}function Qf(t,e,r,n,i){if(t===null){var a=r.type;return typeof a=="function"&&!kc(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,l1(t,e,a,n,i)):(t=Ao(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:ya,r(o,n)&&t.ref===e.ref)return kr(t,e,i)}return e.flags|=1,t=en(a,n),t.ref=e.ref,t.return=e,e.child=t}function l1(t,e,r,n,i){if(t!==null){var a=t.memoizedProps;if(ya(a,n)&&t.ref===e.ref)if(bt=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(bt=!0);else return e.lanes=t.lanes,kr(t,e,i)}return Jl(t,e,r,n,i)}function u1(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(ni,Dt),Dt|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(ni,Dt),Dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Ae(ni,Dt),Dt|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,Ae(ni,Dt),Dt|=n;return mt(t,e,i,r),e.child}function c1(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Jl(t,e,r,n,i){var a=Nt(r)?Nn:dt.current;return a=hi(e,a),ci(e,i),r=wc(t,e,r,n,a,i),n=_c(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kr(t,e,i)):(De&&n&&lc(e),e.flags|=1,mt(t,e,r,i),e.child)}function Jf(t,e,r,n,i){if(Nt(r)){var a=!0;Fo(e)}else a=!1;if(ci(e,i),e.stateNode===null)Eo(t,e),a1(e,r,n),Zl(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Kt(u):(u=Nt(r)?Nn:dt.current,u=hi(e,u));var c=r.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||l!==u)&&Xf(e,o,n,u),Ur=!1;var d=e.memoizedState;o.state=d,Vo(e,n,o,i),l=e.memoizedState,s!==n||d!==l||It.current||Ur?(typeof c=="function"&&(Yl(e,r,c,n),l=e.memoizedState),(s=Ur||Gf(e,r,s,n,d,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,B0(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:rr(e.type,s),o.props=u,f=e.pendingProps,d=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Kt(l):(l=Nt(r)?Nn:dt.current,l=hi(e,l));var p=r.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==f||d!==l)&&Xf(e,o,n,l),Ur=!1,d=e.memoizedState,o.state=d,Vo(e,n,o,i);var v=e.memoizedState;s!==f||d!==v||It.current||Ur?(typeof p=="function"&&(Yl(e,r,p,n),v=e.memoizedState),(u=Ur||Gf(e,r,u,n,d,v,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),o.props=n,o.state=v,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return eu(t,e,r,n,a,i)}function eu(t,e,r,n,i,a){c1(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&Bf(e,r,!1),kr(t,e,a);n=e.stateNode,jg.current=e;var s=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=vi(e,t.child,null,a),e.child=vi(e,null,s,a)):mt(t,e,s,a),e.memoizedState=n.state,i&&Bf(e,r,!0),e.child}function f1(t){var e=t.stateNode;e.pendingContext?Lf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lf(t,e.context,!1),gc(t,e.containerInfo)}function ed(t,e,r,n,i){return pi(),cc(i),e.flags|=256,mt(t,e,r,n),e.child}var tu={dehydrated:null,treeContext:null,retryLane:0};function ru(t){return{baseLanes:t,cachePool:null,transitions:null}}function d1(t,e,r){var n=e.pendingProps,i=Re.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ae(Re,i&1),t===null)return ql(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=ps(o,n,0,null),t=bn(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=ru(r),e.memoizedState=tu,t):Sc(e,o));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return Lg(t,e,o,n,s,i,r);if(a){a=n.fallback,o=e.mode,i=t.child,s=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=en(i,l),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=en(s,a):(a=bn(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?ru(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=tu,n}return a=t.child,t=a.sibling,n=en(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Sc(t,e){return e=ps({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function to(t,e,r,n){return n!==null&&cc(n),vi(e,t.child,null,r),t=Sc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Lg(t,e,r,n,i,a,o){if(r)return e.flags&256?(e.flags&=-257,n=Zs(Error(j(422))),to(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=ps({mode:"visible",children:n.children},i,0,null),a=bn(a,i,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&vi(e,t.child,null,o),e.child.memoizedState=ru(o),e.memoizedState=tu,a);if(!(e.mode&1))return to(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,a=Error(j(419)),n=Zs(a,n,void 0),to(t,e,o,n)}if(s=(o&t.childLanes)!==0,bt||s){if(n=tt,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Or(t,i),ur(n,t,i,-1))}return Oc(),n=Zs(Error(j(421))),to(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Yg.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Rt=Yr(i.nextSibling),Mt=e,De=!0,ar=null,t!==null&&(zt[Ht++]=Ar,zt[Ht++]=br,zt[Ht++]=Tn,Ar=t.id,br=t.overflow,Tn=e),e=Sc(e,n.children),e.flags|=4096,e)}function td(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Kl(t.return,e,r)}function Qs(t,e,r,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function h1(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(mt(t,e,n.children,r),n=Re.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&td(t,r,e);else if(t.tag===19)td(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ae(Re,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Wo(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Qs(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Wo(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Qs(e,!0,r,null,a);break;case"together":Qs(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Eo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),kn|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,r=en(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=en(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Bg(t,e,r){switch(e.tag){case 3:f1(e),pi();break;case 5:F0(e);break;case 1:Nt(e.type)&&Fo(e);break;case 4:gc(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ae(zo,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ae(Re,Re.current&1),e.flags|=128,null):r&e.child.childLanes?d1(t,e,r):(Ae(Re,Re.current&1),t=kr(t,e,r),t!==null?t.sibling:null);Ae(Re,Re.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return h1(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ae(Re,Re.current),n)break;return null;case 22:case 23:return e.lanes=0,u1(t,e,r)}return kr(t,e,r)}var p1,nu,v1,g1;p1=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};nu=function(){};v1=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,En(wr.current);var a=null;switch(r){case"input":i=Al(t,i),n=Al(t,n),a=[];break;case"select":i=Me({},i,{value:void 0}),n=Me({},n,{value:void 0}),a=[];break;case"textarea":i=Nl(t,i),n=Nl(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Lo)}Ol(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(fa.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var l=n[u];if(s=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(a||(a=[]),a.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(fa.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ie("scroll",t),a||s===l||(a=[])):(a=a||[]).push(u,l))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};g1=function(t,e,r,n){r!==n&&(e.flags|=4)};function ji(t,e){if(!De)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Fg(t,e,r){var n=e.pendingProps;switch(uc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return Nt(e.type)&&Bo(),ut(e),null;case 3:return n=e.stateNode,gi(),Oe(It),Oe(dt),yc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ja(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ar!==null&&(fu(ar),ar=null))),nu(t,e),ut(e),null;case 5:mc(e);var i=En(Ca.current);if(r=e.type,t!==null&&e.stateNode!=null)v1(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(j(166));return ut(e),null}if(t=En(wr.current),Ja(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[mr]=e,n[_a]=a,t=(e.mode&1)!==0,r){case"dialog":Ie("cancel",n),Ie("close",n);break;case"iframe":case"object":case"embed":Ie("load",n);break;case"video":case"audio":for(i=0;i<Gi.length;i++)Ie(Gi[i],n);break;case"source":Ie("error",n);break;case"img":case"image":case"link":Ie("error",n),Ie("load",n);break;case"details":Ie("toggle",n);break;case"input":cf(n,a),Ie("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Ie("invalid",n);break;case"textarea":df(n,a),Ie("invalid",n)}Ol(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?n.textContent!==s&&(a.suppressHydrationWarning!==!0&&Qa(n.textContent,s,t),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&Qa(n.textContent,s,t),i=["children",""+s]):fa.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Ie("scroll",n)}switch(r){case"input":Va(n),ff(n,a,!0);break;case"textarea":Va(n),hf(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Lo)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Vh(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[mr]=e,t[_a]=n,p1(t,e,!1,!1),e.stateNode=t;e:{switch(o=kl(r,n),r){case"dialog":Ie("cancel",t),Ie("close",t),i=n;break;case"iframe":case"object":case"embed":Ie("load",t),i=n;break;case"video":case"audio":for(i=0;i<Gi.length;i++)Ie(Gi[i],t);i=n;break;case"source":Ie("error",t),i=n;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),i=n;break;case"details":Ie("toggle",t),i=n;break;case"input":cf(t,n),i=Al(t,n),Ie("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Me({},n,{value:void 0}),Ie("invalid",t);break;case"textarea":df(t,n),i=Nl(t,n),Ie("invalid",t);break;default:i=n}Ol(r,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?Xh(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Wh(t,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&da(t,l):typeof l=="number"&&da(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(fa.hasOwnProperty(a)?l!=null&&a==="onScroll"&&Ie("scroll",t):l!=null&&qu(t,a,l,o))}switch(r){case"input":Va(t),ff(t,n,!1);break;case"textarea":Va(t),hf(t);break;case"option":n.value!=null&&t.setAttribute("value",""+nn(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?oi(t,!!n.multiple,a,!1):n.defaultValue!=null&&oi(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Lo)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)g1(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(j(166));if(r=En(Ca.current),En(wr.current),Ja(e)){if(n=e.stateNode,r=e.memoizedProps,n[mr]=e,(a=n.nodeValue!==r)&&(t=Mt,t!==null))switch(t.tag){case 3:Qa(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Qa(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[mr]=e,e.stateNode=n}return ut(e),null;case 13:if(Oe(Re),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(De&&Rt!==null&&e.mode&1&&!(e.flags&128))P0(),pi(),e.flags|=98560,a=!1;else if(a=Ja(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(j(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(j(317));a[mr]=e}else pi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),a=!1}else ar!==null&&(fu(ar),ar=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?Xe===0&&(Xe=3):Oc())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return gi(),nu(t,e),t===null&&xa(e.stateNode.containerInfo),ut(e),null;case 10:return hc(e.type._context),ut(e),null;case 17:return Nt(e.type)&&Bo(),ut(e),null;case 19:if(Oe(Re),a=e.memoizedState,a===null)return ut(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)ji(a,!1);else{if(Xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wo(t),o!==null){for(e.flags|=128,ji(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ae(Re,Re.current&1|2),e.child}t=t.sibling}a.tail!==null&&Le()>yi&&(e.flags|=128,n=!0,ji(a,!1),e.lanes=4194304)}else{if(!n)if(t=Wo(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ji(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!De)return ut(e),null}else 2*Le()-a.renderingStartTime>yi&&r!==1073741824&&(e.flags|=128,n=!0,ji(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Le(),e.sibling=null,r=Re.current,Ae(Re,n?r&1|2:r&1),e):(ut(e),null);case 22:case 23:return Tc(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Dt&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function Ug(t,e){switch(uc(e),e.tag){case 1:return Nt(e.type)&&Bo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gi(),Oe(It),Oe(dt),yc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return mc(e),null;case 13:if(Oe(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));pi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(Re),null;case 4:return gi(),null;case 10:return hc(e.type._context),null;case 22:case 23:return Tc(),null;case 24:return null;default:return null}}var ro=!1,ft=!1,$g=typeof WeakSet=="function"?WeakSet:Set,H=null;function ri(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){je(t,e,n)}else r.current=null}function iu(t,e,r){try{r()}catch(n){je(t,e,n)}}var rd=!1;function zg(t,e){if($l=Po,t=_0(),sc(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,s=-1,l=-1,u=0,c=0,f=t,d=null;t:for(;;){for(var p;f!==r||i!==0&&f.nodeType!==3||(s=o+i),f!==a||n!==0&&f.nodeType!==3||(l=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)d=f,f=p;for(;;){if(f===t)break t;if(d===r&&++u===i&&(s=o),d===a&&++c===n&&(l=o),(p=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=p}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(zl={focusedElem:t,selectionRange:r},Po=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,w=v.memoizedState,x=e.stateNode,m=x.getSnapshotBeforeUpdate(e.elementType===e.type?g:rr(e.type,g),w);x.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(_){je(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return v=rd,rd=!1,v}function aa(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&iu(e,r,a)}i=i.next}while(i!==n)}}function ds(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function au(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function m1(t){var e=t.alternate;e!==null&&(t.alternate=null,m1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mr],delete e[_a],delete e[Wl],delete e[Sg],delete e[Ag])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function y1(t){return t.tag===5||t.tag===3||t.tag===4}function nd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||y1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ou(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Lo));else if(n!==4&&(t=t.child,t!==null))for(ou(t,e,r),t=t.sibling;t!==null;)ou(t,e,r),t=t.sibling}function su(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(su(t,e,r),t=t.sibling;t!==null;)su(t,e,r),t=t.sibling}var it=null,nr=!1;function Pr(t,e,r){for(r=r.child;r!==null;)x1(t,e,r),r=r.sibling}function x1(t,e,r){if(xr&&typeof xr.onCommitFiberUnmount=="function")try{xr.onCommitFiberUnmount(is,r)}catch{}switch(r.tag){case 5:ft||ri(r,e);case 6:var n=it,i=nr;it=null,Pr(t,e,r),it=n,nr=i,it!==null&&(nr?(t=it,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):it.removeChild(r.stateNode));break;case 18:it!==null&&(nr?(t=it,r=r.stateNode,t.nodeType===8?Ws(t.parentNode,r):t.nodeType===1&&Ws(t,r),ga(t)):Ws(it,r.stateNode));break;case 4:n=it,i=nr,it=r.stateNode.containerInfo,nr=!0,Pr(t,e,r),it=n,nr=i;break;case 0:case 11:case 14:case 15:if(!ft&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&iu(r,e,o),i=i.next}while(i!==n)}Pr(t,e,r);break;case 1:if(!ft&&(ri(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){je(r,e,s)}Pr(t,e,r);break;case 21:Pr(t,e,r);break;case 22:r.mode&1?(ft=(n=ft)||r.memoizedState!==null,Pr(t,e,r),ft=n):Pr(t,e,r);break;default:Pr(t,e,r)}}function id(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new $g),e.forEach(function(n){var i=Zg.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Jt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:it=s.stateNode,nr=!1;break e;case 3:it=s.stateNode.containerInfo,nr=!0;break e;case 4:it=s.stateNode.containerInfo,nr=!0;break e}s=s.return}if(it===null)throw Error(j(160));x1(a,o,i),it=null,nr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){je(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)w1(e,t),e=e.sibling}function w1(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jt(e,t),hr(t),n&4){try{aa(3,t,t.return),ds(3,t)}catch(g){je(t,t.return,g)}try{aa(5,t,t.return)}catch(g){je(t,t.return,g)}}break;case 1:Jt(e,t),hr(t),n&512&&r!==null&&ri(r,r.return);break;case 5:if(Jt(e,t),hr(t),n&512&&r!==null&&ri(r,r.return),t.flags&32){var i=t.stateNode;try{da(i,"")}catch(g){je(t,t.return,g)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&zh(i,a),kl(s,o);var u=kl(s,a);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?Xh(i,f):c==="dangerouslySetInnerHTML"?Wh(i,f):c==="children"?da(i,f):qu(i,c,f,u)}switch(s){case"input":bl(i,a);break;case"textarea":Hh(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?oi(i,!!a.multiple,p,!1):d!==!!a.multiple&&(a.defaultValue!=null?oi(i,!!a.multiple,a.defaultValue,!0):oi(i,!!a.multiple,a.multiple?[]:"",!1))}i[_a]=a}catch(g){je(t,t.return,g)}}break;case 6:if(Jt(e,t),hr(t),n&4){if(t.stateNode===null)throw Error(j(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(g){je(t,t.return,g)}}break;case 3:if(Jt(e,t),hr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ga(e.containerInfo)}catch(g){je(t,t.return,g)}break;case 4:Jt(e,t),hr(t);break;case 13:Jt(e,t),hr(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Ic=Le())),n&4&&id(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(ft=(u=ft)||c,Jt(e,t),ft=u):Jt(e,t),hr(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(H=t,c=t.child;c!==null;){for(f=H=c;H!==null;){switch(d=H,p=d.child,d.tag){case 0:case 11:case 14:case 15:aa(4,d,d.return);break;case 1:ri(d,d.return);var v=d.stateNode;if(typeof v.componentWillUnmount=="function"){n=d,r=d.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(g){je(n,r,g)}}break;case 5:ri(d,d.return);break;case 22:if(d.memoizedState!==null){od(f);continue}}p!==null?(p.return=d,H=p):od(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=Gh("display",o))}catch(g){je(t,t.return,g)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){je(t,t.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Jt(e,t),hr(t),n&4&&id(t);break;case 21:break;default:Jt(e,t),hr(t)}}function hr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(y1(r)){var n=r;break e}r=r.return}throw Error(j(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(da(i,""),n.flags&=-33);var a=nd(t);su(t,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,s=nd(t);ou(t,s,o);break;default:throw Error(j(161))}}catch(l){je(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Hg(t,e,r){H=t,_1(t)}function _1(t,e,r){for(var n=(t.mode&1)!==0;H!==null;){var i=H,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||ro;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||ft;s=ro;var u=ft;if(ro=o,(ft=l)&&!u)for(H=i;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?sd(i):l!==null?(l.return=o,H=l):sd(i);for(;a!==null;)H=a,_1(a),a=a.sibling;H=i,ro=s,ft=u}ad(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,H=a):ad(t)}}function ad(t){for(;H!==null;){var e=H;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||ds(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ft)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:rr(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Hf(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Hf(e,o,r)}break;case 5:var s=e.stateNode;if(r===null&&e.flags&4){r=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&ga(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}ft||e.flags&512&&au(e)}catch(d){je(e,e.return,d)}}if(e===t){H=null;break}if(r=e.sibling,r!==null){r.return=e.return,H=r;break}H=e.return}}function od(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var r=e.sibling;if(r!==null){r.return=e.return,H=r;break}H=e.return}}function sd(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{ds(4,e)}catch(l){je(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){je(e,i,l)}}var a=e.return;try{au(e)}catch(l){je(e,a,l)}break;case 5:var o=e.return;try{au(e)}catch(l){je(e,o,l)}}}catch(l){je(e,e.return,l)}if(e===t){H=null;break}var s=e.sibling;if(s!==null){s.return=e.return,H=s;break}H=e.return}}var Vg=Math.ceil,qo=Dr.ReactCurrentDispatcher,Ac=Dr.ReactCurrentOwner,Gt=Dr.ReactCurrentBatchConfig,he=0,tt=null,Fe=null,ot=0,Dt=0,ni=sn(0),Xe=0,Ia=null,kn=0,hs=0,bc=0,oa=null,Ct=null,Ic=0,yi=1/0,Er=null,Ko=!1,lu=null,Qr=null,no=!1,Gr=null,Yo=0,sa=0,uu=null,Co=-1,So=0;function yt(){return he&6?Le():Co!==-1?Co:Co=Le()}function Jr(t){return t.mode&1?he&2&&ot!==0?ot&-ot:Ig.transition!==null?(So===0&&(So=a0()),So):(t=_e,t!==0||(t=window.event,t=t===void 0?16:d0(t.type)),t):1}function ur(t,e,r,n){if(50<sa)throw sa=0,uu=null,Error(j(185));ka(t,r,n),(!(he&2)||t!==tt)&&(t===tt&&(!(he&2)&&(hs|=r),Xe===4&&Hr(t,ot)),Tt(t,n),r===1&&he===0&&!(e.mode&1)&&(yi=Le()+500,us&&ln()))}function Tt(t,e){var r=t.callbackNode;Iv(t,e);var n=Ro(t,t===tt?ot:0);if(n===0)r!==null&&gf(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&gf(r),e===1)t.tag===0?bg(ld.bind(null,t)):k0(ld.bind(null,t)),Eg(function(){!(he&6)&&ln()}),r=null;else{switch(o0(n)){case 1:r=Ju;break;case 4:r=n0;break;case 16:r=Do;break;case 536870912:r=i0;break;default:r=Do}r=T1(r,E1.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function E1(t,e){if(Co=-1,So=0,he&6)throw Error(j(327));var r=t.callbackNode;if(fi()&&t.callbackNode!==r)return null;var n=Ro(t,t===tt?ot:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Zo(t,n);else{e=n;var i=he;he|=2;var a=S1();(tt!==t||ot!==e)&&(Er=null,yi=Le()+500,An(t,e));do try{Xg();break}catch(s){C1(t,s)}while(!0);dc(),qo.current=a,he=i,Fe!==null?e=0:(tt=null,ot=0,e=Xe)}if(e!==0){if(e===2&&(i=jl(t),i!==0&&(n=i,e=cu(t,i))),e===1)throw r=Ia,An(t,0),Hr(t,n),Tt(t,Le()),r;if(e===6)Hr(t,n);else{if(i=t.current.alternate,!(n&30)&&!Wg(i)&&(e=Zo(t,n),e===2&&(a=jl(t),a!==0&&(n=a,e=cu(t,a))),e===1))throw r=Ia,An(t,0),Hr(t,n),Tt(t,Le()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(j(345));case 2:gn(t,Ct,Er);break;case 3:if(Hr(t,n),(n&130023424)===n&&(e=Ic+500-Le(),10<e)){if(Ro(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){yt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Vl(gn.bind(null,t,Ct,Er),e);break}gn(t,Ct,Er);break;case 4:if(Hr(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-lr(n);a=1<<o,o=e[o],o>i&&(i=o),n&=~a}if(n=i,n=Le()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Vg(n/1960))-n,10<n){t.timeoutHandle=Vl(gn.bind(null,t,Ct,Er),n);break}gn(t,Ct,Er);break;case 5:gn(t,Ct,Er);break;default:throw Error(j(329))}}}return Tt(t,Le()),t.callbackNode===r?E1.bind(null,t):null}function cu(t,e){var r=oa;return t.current.memoizedState.isDehydrated&&(An(t,e).flags|=256),t=Zo(t,e),t!==2&&(e=Ct,Ct=r,e!==null&&fu(e)),t}function fu(t){Ct===null?Ct=t:Ct.push.apply(Ct,t)}function Wg(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!cr(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hr(t,e){for(e&=~bc,e&=~hs,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-lr(e),n=1<<r;t[r]=-1,e&=~n}}function ld(t){if(he&6)throw Error(j(327));fi();var e=Ro(t,0);if(!(e&1))return Tt(t,Le()),null;var r=Zo(t,e);if(t.tag!==0&&r===2){var n=jl(t);n!==0&&(e=n,r=cu(t,n))}if(r===1)throw r=Ia,An(t,0),Hr(t,e),Tt(t,Le()),r;if(r===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gn(t,Ct,Er),Tt(t,Le()),null}function Nc(t,e){var r=he;he|=1;try{return t(e)}finally{he=r,he===0&&(yi=Le()+500,us&&ln())}}function Dn(t){Gr!==null&&Gr.tag===0&&!(he&6)&&fi();var e=he;he|=1;var r=Gt.transition,n=_e;try{if(Gt.transition=null,_e=1,t)return t()}finally{_e=n,Gt.transition=r,he=e,!(he&6)&&ln()}}function Tc(){Dt=ni.current,Oe(ni)}function An(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,_g(r)),Fe!==null)for(r=Fe.return;r!==null;){var n=r;switch(uc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Bo();break;case 3:gi(),Oe(It),Oe(dt),yc();break;case 5:mc(n);break;case 4:gi();break;case 13:Oe(Re);break;case 19:Oe(Re);break;case 10:hc(n.type._context);break;case 22:case 23:Tc()}r=r.return}if(tt=t,Fe=t=en(t.current,null),ot=Dt=e,Xe=0,Ia=null,bc=hs=kn=0,Ct=oa=null,_n!==null){for(e=0;e<_n.length;e++)if(r=_n[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}r.pending=n}_n=null}return t}function C1(t,e){do{var r=Fe;try{if(dc(),wo.current=Xo,Go){for(var n=Pe.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Go=!1}if(On=0,Qe=He=Pe=null,ia=!1,Sa=0,Ac.current=null,r===null||r.return===null){Xe=1,Ia=e,Fe=null;break}e:{var a=t,o=r.return,s=r,l=e;if(e=ot,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=Kf(o);if(p!==null){p.flags&=-257,Yf(p,o,s,a,e),p.mode&1&&qf(a,u,e),e=p,l=u;var v=e.updateQueue;if(v===null){var g=new Set;g.add(l),e.updateQueue=g}else v.add(l);break e}else{if(!(e&1)){qf(a,u,e),Oc();break e}l=Error(j(426))}}else if(De&&s.mode&1){var w=Kf(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Yf(w,o,s,a,e),cc(mi(l,s));break e}}a=l=mi(l,s),Xe!==4&&(Xe=2),oa===null?oa=[a]:oa.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var x=o1(a,l,e);zf(a,x);break e;case 1:s=l;var m=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Qr===null||!Qr.has(y)))){a.flags|=65536,e&=-e,a.lanes|=e;var _=s1(a,s,e);zf(a,_);break e}}a=a.return}while(a!==null)}b1(r)}catch(A){e=A,Fe===r&&r!==null&&(Fe=r=r.return);continue}break}while(!0)}function S1(){var t=qo.current;return qo.current=Xo,t===null?Xo:t}function Oc(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),tt===null||!(kn&268435455)&&!(hs&268435455)||Hr(tt,ot)}function Zo(t,e){var r=he;he|=2;var n=S1();(tt!==t||ot!==e)&&(Er=null,An(t,e));do try{Gg();break}catch(i){C1(t,i)}while(!0);if(dc(),he=r,qo.current=n,Fe!==null)throw Error(j(261));return tt=null,ot=0,Xe}function Gg(){for(;Fe!==null;)A1(Fe)}function Xg(){for(;Fe!==null&&!yv();)A1(Fe)}function A1(t){var e=N1(t.alternate,t,Dt);t.memoizedProps=t.pendingProps,e===null?b1(t):Fe=e,Ac.current=null}function b1(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Ug(r,e),r!==null){r.flags&=32767,Fe=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xe=6,Fe=null;return}}else if(r=Fg(r,e,Dt),r!==null){Fe=r;return}if(e=e.sibling,e!==null){Fe=e;return}Fe=e=t}while(e!==null);Xe===0&&(Xe=5)}function gn(t,e,r){var n=_e,i=Gt.transition;try{Gt.transition=null,_e=1,qg(t,e,r,n)}finally{Gt.transition=i,_e=n}return null}function qg(t,e,r,n){do fi();while(Gr!==null);if(he&6)throw Error(j(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(Nv(t,a),t===tt&&(Fe=tt=null,ot=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||no||(no=!0,T1(Do,function(){return fi(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Gt.transition,Gt.transition=null;var o=_e;_e=1;var s=he;he|=4,Ac.current=null,zg(t,r),w1(r,t),pg(zl),Po=!!$l,zl=$l=null,t.current=r,Hg(r),xv(),he=s,_e=o,Gt.transition=a}else t.current=r;if(no&&(no=!1,Gr=t,Yo=i),a=t.pendingLanes,a===0&&(Qr=null),Ev(r.stateNode),Tt(t,Le()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Ko)throw Ko=!1,t=lu,lu=null,t;return Yo&1&&t.tag!==0&&fi(),a=t.pendingLanes,a&1?t===uu?sa++:(sa=0,uu=t):sa=0,ln(),null}function fi(){if(Gr!==null){var t=o0(Yo),e=Gt.transition,r=_e;try{if(Gt.transition=null,_e=16>t?16:t,Gr===null)var n=!1;else{if(t=Gr,Gr=null,Yo=0,he&6)throw Error(j(331));var i=he;for(he|=4,H=t.current;H!==null;){var a=H,o=a.child;if(H.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(H=u;H!==null;){var c=H;switch(c.tag){case 0:case 11:case 15:aa(8,c,a)}var f=c.child;if(f!==null)f.return=c,H=f;else for(;H!==null;){c=H;var d=c.sibling,p=c.return;if(m1(c),c===u){H=null;break}if(d!==null){d.return=p,H=d;break}H=p}}}var v=a.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}H=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,H=o;else e:for(;H!==null;){if(a=H,a.flags&2048)switch(a.tag){case 0:case 11:case 15:aa(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,H=x;break e}H=a.return}}var m=t.current;for(H=m;H!==null;){o=H;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,H=y;else e:for(o=m;H!==null;){if(s=H,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:ds(9,s)}}catch(A){je(s,s.return,A)}if(s===o){H=null;break e}var _=s.sibling;if(_!==null){_.return=s.return,H=_;break e}H=s.return}}if(he=i,ln(),xr&&typeof xr.onPostCommitFiberRoot=="function")try{xr.onPostCommitFiberRoot(is,t)}catch{}n=!0}return n}finally{_e=r,Gt.transition=e}}return!1}function ud(t,e,r){e=mi(r,e),e=o1(t,e,1),t=Zr(t,e,1),e=yt(),t!==null&&(ka(t,1,e),Tt(t,e))}function je(t,e,r){if(t.tag===3)ud(t,t,r);else for(;e!==null;){if(e.tag===3){ud(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Qr===null||!Qr.has(n))){t=mi(r,t),t=s1(e,t,1),e=Zr(e,t,1),t=yt(),e!==null&&(ka(e,1,t),Tt(e,t));break}}e=e.return}}function Kg(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=yt(),t.pingedLanes|=t.suspendedLanes&r,tt===t&&(ot&r)===r&&(Xe===4||Xe===3&&(ot&130023424)===ot&&500>Le()-Ic?An(t,0):bc|=r),Tt(t,e)}function I1(t,e){e===0&&(t.mode&1?(e=Xa,Xa<<=1,!(Xa&130023424)&&(Xa=4194304)):e=1);var r=yt();t=Or(t,e),t!==null&&(ka(t,e,r),Tt(t,r))}function Yg(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),I1(t,r)}function Zg(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(j(314))}n!==null&&n.delete(e),I1(t,r)}var N1;N1=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||It.current)bt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return bt=!1,Bg(t,e,r);bt=!!(t.flags&131072)}else bt=!1,De&&e.flags&1048576&&D0(e,$o,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Eo(t,e),t=e.pendingProps;var i=hi(e,dt.current);ci(e,r),i=wc(null,e,n,t,i,r);var a=_c();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nt(n)?(a=!0,Fo(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,vc(e),i.updater=fs,e.stateNode=i,i._reactInternals=e,Zl(e,n,t,r),e=eu(null,e,n,!0,a,r)):(e.tag=0,De&&a&&lc(e),mt(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Eo(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Jg(n),t=rr(n,t),i){case 0:e=Jl(null,e,n,t,r);break e;case 1:e=Jf(null,e,n,t,r);break e;case 11:e=Zf(null,e,n,t,r);break e;case 14:e=Qf(null,e,n,rr(n.type,t),r);break e}throw Error(j(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:rr(n,i),Jl(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:rr(n,i),Jf(t,e,n,i,r);case 3:e:{if(f1(e),t===null)throw Error(j(387));n=e.pendingProps,a=e.memoizedState,i=a.element,B0(t,e),Vo(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=mi(Error(j(423)),e),e=ed(t,e,n,r,i);break e}else if(n!==i){i=mi(Error(j(424)),e),e=ed(t,e,n,r,i);break e}else for(Rt=Yr(e.stateNode.containerInfo.firstChild),Mt=e,De=!0,ar=null,r=j0(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(pi(),n===i){e=kr(t,e,r);break e}mt(t,e,n,r)}e=e.child}return e;case 5:return F0(e),t===null&&ql(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Hl(n,i)?o=null:a!==null&&Hl(n,a)&&(e.flags|=32),c1(t,e),mt(t,e,o,r),e.child;case 6:return t===null&&ql(e),null;case 13:return d1(t,e,r);case 4:return gc(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=vi(e,null,n,r):mt(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:rr(n,i),Zf(t,e,n,i,r);case 7:return mt(t,e,e.pendingProps,r),e.child;case 8:return mt(t,e,e.pendingProps.children,r),e.child;case 12:return mt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Ae(zo,n._currentValue),n._currentValue=o,a!==null)if(cr(a.value,o)){if(a.children===i.children&&!It.current){e=kr(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=Ir(-1,r&-r),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Kl(a.return,r,e),s.lanes|=r;break}l=l.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(j(341));o.lanes|=r,s=o.alternate,s!==null&&(s.lanes|=r),Kl(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}mt(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,ci(e,r),i=Kt(i),n=n(i),e.flags|=1,mt(t,e,n,r),e.child;case 14:return n=e.type,i=rr(n,e.pendingProps),i=rr(n.type,i),Qf(t,e,n,i,r);case 15:return l1(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:rr(n,i),Eo(t,e),e.tag=1,Nt(n)?(t=!0,Fo(e)):t=!1,ci(e,r),a1(e,n,i),Zl(e,n,i,r),eu(null,e,n,!0,t,r);case 19:return h1(t,e,r);case 22:return u1(t,e,r)}throw Error(j(156,e.tag))};function T1(t,e){return r0(t,e)}function Qg(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(t,e,r,n){return new Qg(t,e,r,n)}function kc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Jg(t){if(typeof t=="function")return kc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yu)return 11;if(t===Zu)return 14}return 2}function en(t,e){var r=t.alternate;return r===null?(r=Vt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ao(t,e,r,n,i,a){var o=2;if(n=t,typeof t=="function")kc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xn:return bn(r.children,i,a,e);case Ku:o=8,i|=8;break;case _l:return t=Vt(12,r,e,i|2),t.elementType=_l,t.lanes=a,t;case El:return t=Vt(13,r,e,i),t.elementType=El,t.lanes=a,t;case Cl:return t=Vt(19,r,e,i),t.elementType=Cl,t.lanes=a,t;case Fh:return ps(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Lh:o=10;break e;case Bh:o=9;break e;case Yu:o=11;break e;case Zu:o=14;break e;case Fr:o=16,n=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=Vt(o,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function bn(t,e,r,n){return t=Vt(7,t,n,e),t.lanes=r,t}function ps(t,e,r,n){return t=Vt(22,t,n,e),t.elementType=Fh,t.lanes=r,t.stateNode={isHidden:!1},t}function Js(t,e,r){return t=Vt(6,t,null,e),t.lanes=r,t}function el(t,e,r){return e=Vt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function em(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ps(0),this.expirationTimes=Ps(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ps(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Dc(t,e,r,n,i,a,o,s,l){return t=new em(t,e,r,s,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Vt(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},vc(a),t}function tm(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gn,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function O1(t){if(!t)return an;t=t._reactInternals;e:{if(Pn(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var r=t.type;if(Nt(r))return O0(t,r,e)}return e}function k1(t,e,r,n,i,a,o,s,l){return t=Dc(r,n,!0,t,i,a,o,s,l),t.context=O1(null),r=t.current,n=yt(),i=Jr(r),a=Ir(n,i),a.callback=e??null,Zr(r,a,i),t.current.lanes=i,ka(t,i,n),Tt(t,n),t}function vs(t,e,r,n){var i=e.current,a=yt(),o=Jr(i);return r=O1(r),e.context===null?e.context=r:e.pendingContext=r,e=Ir(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Zr(i,e,o),t!==null&&(ur(t,i,o,a),xo(t,i,o)),o}function Qo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Rc(t,e){cd(t,e),(t=t.alternate)&&cd(t,e)}function rm(){return null}var D1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Pc(t){this._internalRoot=t}gs.prototype.render=Pc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));vs(t,e,null,null)};gs.prototype.unmount=Pc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Dn(function(){vs(null,t,null,null)}),e[Tr]=null}};function gs(t){this._internalRoot=t}gs.prototype.unstable_scheduleHydration=function(t){if(t){var e=u0();t={blockedOn:null,target:t,priority:e};for(var r=0;r<zr.length&&e!==0&&e<zr[r].priority;r++);zr.splice(r,0,t),r===0&&f0(t)}};function Mc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ms(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fd(){}function nm(t,e,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=Qo(o);a.call(u)}}var o=k1(e,n,t,0,null,!1,!1,"",fd);return t._reactRootContainer=o,t[Tr]=o.current,xa(t.nodeType===8?t.parentNode:t),Dn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var u=Qo(l);s.call(u)}}var l=Dc(t,0,!1,null,null,!1,!1,"",fd);return t._reactRootContainer=l,t[Tr]=l.current,xa(t.nodeType===8?t.parentNode:t),Dn(function(){vs(e,l,r,n)}),l}function ys(t,e,r,n,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=Qo(o);s.call(l)}}vs(e,o,t,i)}else o=nm(r,e,t,i,n);return Qo(o)}s0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Wi(e.pendingLanes);r!==0&&(ec(e,r|1),Tt(e,Le()),!(he&6)&&(yi=Le()+500,ln()))}break;case 13:Dn(function(){var n=Or(t,1);if(n!==null){var i=yt();ur(n,t,1,i)}}),Rc(t,1)}};tc=function(t){if(t.tag===13){var e=Or(t,134217728);if(e!==null){var r=yt();ur(e,t,134217728,r)}Rc(t,134217728)}};l0=function(t){if(t.tag===13){var e=Jr(t),r=Or(t,e);if(r!==null){var n=yt();ur(r,t,e,n)}Rc(t,e)}};u0=function(){return _e};c0=function(t,e){var r=_e;try{return _e=t,e()}finally{_e=r}};Rl=function(t,e,r){switch(e){case"input":if(bl(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=ls(n);if(!i)throw Error(j(90));$h(n),bl(n,i)}}}break;case"textarea":Hh(t,r);break;case"select":e=r.value,e!=null&&oi(t,!!r.multiple,e,!1)}};Yh=Nc;Zh=Dn;var im={usingClientEntryPoint:!1,Events:[Ra,Zn,ls,qh,Kh,Nc]},Li={findFiberByHostInstance:wn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},am={bundleType:Li.bundleType,version:Li.version,rendererPackageName:Li.rendererPackageName,rendererConfig:Li.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=e0(t),t===null?null:t.stateNode},findFiberByHostInstance:Li.findFiberByHostInstance||rm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var io=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!io.isDisabled&&io.supportsFiber)try{is=io.inject(am),xr=io}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=im;Bt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mc(e))throw Error(j(200));return tm(t,e,null,r)};Bt.createRoot=function(t,e){if(!Mc(t))throw Error(j(299));var r=!1,n="",i=D1;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Dc(t,1,!1,null,null,r,!1,n,i),t[Tr]=e.current,xa(t.nodeType===8?t.parentNode:t),new Pc(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=e0(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return Dn(t)};Bt.hydrate=function(t,e,r){if(!ms(e))throw Error(j(200));return ys(null,t,e,!0,r)};Bt.hydrateRoot=function(t,e,r){if(!Mc(t))throw Error(j(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",o=D1;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=k1(e,null,t,1,r??null,i,!1,a,o),t[Tr]=e.current,xa(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new gs(e)};Bt.render=function(t,e,r){if(!ms(e))throw Error(j(200));return ys(null,t,e,!1,r)};Bt.unmountComponentAtNode=function(t){if(!ms(t))throw Error(j(40));return t._reactRootContainer?(Dn(function(){ys(null,null,t,!1,function(){t._reactRootContainer=null,t[Tr]=null})}),!0):!1};Bt.unstable_batchedUpdates=Nc;Bt.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!ms(r))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return ys(t,e,r,!1,n)};Bt.version="18.3.1-next-f1338f8080-20240426";function R1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(R1)}catch(t){console.error(t)}}R1(),Rh.exports=Bt;var om=Rh.exports,dd=om;xl.createRoot=dd.createRoot,xl.hydrateRoot=dd.hydrateRoot;const sm="modulepreload",lm=function(t){return"/"+t},hd={},Ma=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=lm(l),l in hd)return;hd[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":sm,u||(f.as="script"),f.crossOrigin="",f.href=l,s&&f.setAttribute("nonce",s),document.head.appendChild(f),u)return new Promise((d,p)=>{f.addEventListener("load",d),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})},um=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ma(async()=>{const{default:n}=await Promise.resolve().then(()=>Ai);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class jc extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class pd extends jc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class vd extends jc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class gd extends jc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var du;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(du||(du={}));var cm=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(t,e||[])).next())})};class fm{constructor(e,{headers:r={},customFetch:n,region:i=du.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=um(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return cm(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:o,signal:s}=r;let l={},{region:u}=r;u||(u=this.region);const c=new URL(`${this.url}/${e}`);u&&u!=="any"&&(l["x-region"]=u,c.searchParams.set("forceFunctionRegion",u));let f;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=o):typeof o=="string"?(l["Content-Type"]="text/plain",f=o):typeof FormData<"u"&&o instanceof FormData?f=o:(l["Content-Type"]="application/json",f=JSON.stringify(o)));const d=yield this.fetch(c.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:f,signal:s}).catch(w=>{throw w.name==="AbortError"?w:new pd(w)}),p=d.headers.get("x-relay-error");if(p&&p==="true")throw new vd(d);if(!d.ok)throw new gd(d);let v=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return v==="application/json"?g=yield d.json():v==="application/octet-stream"?g=yield d.blob():v==="text/event-stream"?g=d:v==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null,response:d}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new pd(i)}:{data:null,error:i,response:i instanceof gd||i instanceof vd?i.context:void 0}}})}}var St={},Lc={},xs={},ja={},ws={},_s={},dm=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},xi=dm();const hm=xi.fetch,P1=xi.fetch.bind(xi),M1=xi.Headers,pm=xi.Request,vm=xi.Response,Ai=Object.freeze(Object.defineProperty({__proto__:null,Headers:M1,Request:pm,Response:vm,default:P1,fetch:hm},Symbol.toStringTag,{value:"Module"})),gm=Pp(Ai);var Es={};Object.defineProperty(Es,"__esModule",{value:!0});let mm=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Es.default=mm;var j1=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_s,"__esModule",{value:!0});const ym=j1(gm),xm=j1(Es);let wm=class{constructor(e){var r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=ym.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,s,l,u;let c=null,f=null,d=null,p=a.status,v=a.statusText;if(a.ok){if(this.method!=="HEAD"){const m=await a.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?f=m:f=JSON.parse(m))}const w=(s=this.headers.get("Prefer"))===null||s===void 0?void 0:s.match(/count=(exact|planned|estimated)/),x=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");w&&x&&x.length>1&&(d=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(c={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,d=null,p=406,v="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const w=await a.text();try{c=JSON.parse(w),Array.isArray(c)&&a.status===404&&(f=[],c=null,p=200,v="OK")}catch{a.status===404&&w===""?(p=204,v="No Content"):c={message:w}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,p=200,v="OK"),c&&this.shouldThrowOnError)throw new xm.default(c)}return{error:c,data:f,count:d,status:p,statusText:v}});return this.shouldThrowOnError||(i=i.catch(a=>{var o,s,l;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(s=a==null?void 0:a.stack)!==null&&s!==void 0?s:""}`,hint:"",code:`${(l=a==null?void 0:a.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,r)}returns(){return this}overrideTypes(){return this}};_s.default=wm;var _m=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ws,"__esModule",{value:!0});const Em=_m(_s);let Cm=class extends Em.default{select(e){let r=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.order`:"order",s=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${s?`${s},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:o="text"}={}){var s;const l=[e?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(s=this.headers.get("Accept"))!==null&&s!==void 0?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};ws.default=Cm;var Sm=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ja,"__esModule",{value:!0});const Am=Sm(ws);let bm=class extends Am.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};ja.default=bm;var Im=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xs,"__esModule",{value:!0});const Bi=Im(ja);let Nm=class{constructor(e,{headers:r={},schema:n,fetch:i}){this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=i}select(e,{head:r=!1,count:n}={}){const i=r?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(s=>/\s/.test(s)&&!a?"":(s==='"'&&(a=!a),s)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new Bi.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:n=!0}={}){var i;const a="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((s,l)=>s.concat(Object.keys(l)),[]);if(o.length>0){const s=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",s.join(","))}}return new Bi.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){var o;const s="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new Bi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:r}={}){var n;const i="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Bi.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var r;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Bi.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};xs.default=Nm;var L1=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lc,"__esModule",{value:!0});const Tm=L1(xs),Om=L1(ja);let km=class B1{constructor(e,{headers:r={},schema:n,fetch:i}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=i}from(e){const r=new URL(`${this.url}/${e}`);return new Tm.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new B1(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:i=!1,count:a}={}){var o;let s;const l=new URL(`${this.url}/rpc/${e}`);let u;n||i?(s=n?"HEAD":"GET",Object.entries(r).filter(([f,d])=>d!==void 0).map(([f,d])=>[f,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([f,d])=>{l.searchParams.append(f,d)})):(s="POST",u=r);const c=new Headers(this.headers);return a&&c.set("Prefer",`count=${a}`),new Om.default({method:s,url:l,headers:c,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Lc.default=km;var bi=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(St,"__esModule",{value:!0});St.PostgrestError=St.PostgrestBuilder=St.PostgrestTransformBuilder=St.PostgrestFilterBuilder=St.PostgrestQueryBuilder=St.PostgrestClient=void 0;const F1=bi(Lc);St.PostgrestClient=F1.default;const U1=bi(xs);St.PostgrestQueryBuilder=U1.default;const $1=bi(ja);St.PostgrestFilterBuilder=$1.default;const z1=bi(ws);St.PostgrestTransformBuilder=z1.default;const H1=bi(_s);St.PostgrestBuilder=H1.default;const V1=bi(Es);St.PostgrestError=V1.default;var Dm=St.default={PostgrestClient:F1.default,PostgrestQueryBuilder:U1.default,PostgrestFilterBuilder:$1.default,PostgrestTransformBuilder:z1.default,PostgrestBuilder:H1.default,PostgrestError:V1.default};const{PostgrestClient:Rm,PostgrestQueryBuilder:QE,PostgrestFilterBuilder:JE,PostgrestTransformBuilder:e4,PostgrestBuilder:t4,PostgrestError:r4}=Dm;class Pm{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Mm="2.15.5",jm=`realtime-js/${Mm}`,Lm="1.0.0",hu=1e4,Bm=1e3,Fm=100;var la;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(la||(la={}));var Ue;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ue||(Ue={}));var ir;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ir||(ir={}));var pu;(function(t){t.websocket="websocket"})(pu||(pu={}));var xn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(xn||(xn={}));class Um{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const i=r.getUint8(1),a=r.getUint8(2);let o=this.HEADER_LENGTH+2;const s=n.decode(e.slice(o,o+i));o=o+i;const l=n.decode(e.slice(o,o+a));o=o+a;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:s,event:l,payload:u}}}class W1{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Se;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Se||(Se={}));const md=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,o)=>(a[o]=$m(o,t,e,i),a),{})},$m=(t,e,r,n)=>{const i=e.find(s=>s.name===t),a=i==null?void 0:i.type,o=r[t];return a&&!n.includes(a)?G1(a,o):vu(o)},G1=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Wm(e,r)}switch(t){case Se.bool:return zm(e);case Se.float4:case Se.float8:case Se.int2:case Se.int4:case Se.int8:case Se.numeric:case Se.oid:return Hm(e);case Se.json:case Se.jsonb:return Vm(e);case Se.timestamp:return Gm(e);case Se.abstime:case Se.date:case Se.daterange:case Se.int4range:case Se.int8range:case Se.money:case Se.reltime:case Se.text:case Se.time:case Se.timestamptz:case Se.timetz:case Se.tsrange:case Se.tstzrange:return vu(e);default:return vu(e)}},vu=t=>t,zm=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Hm=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Vm=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Wm=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const o=t.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(s=>G1(e,s))}return t},Gm=t=>typeof t=="string"?t.replace(" ","T"):t,X1=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class tl{constructor(e,r,n={},i=hu){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var yd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(yd||(yd={}));class ua{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:o,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ua.syncState(this.state,i,a,o),this.pendingDiffs.forEach(l=>{this.state=ua.syncDiff(this.state,l,a,o)}),this.pendingDiffs=[],s()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ua.syncDiff(this.state,i,a,o),s())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const a=this.cloneDeep(e),o=this.transformState(r),s={},l={};return this.map(a,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const f=a[u];if(f){const d=c.map(w=>w.presence_ref),p=f.map(w=>w.presence_ref),v=c.filter(w=>p.indexOf(w.presence_ref)<0),g=f.filter(w=>d.indexOf(w.presence_ref)<0);v.length>0&&(s[u]=v),g.length>0&&(l[u]=g)}else s[u]=c}),this.syncDiff(a,{joins:s,leaves:l},n,i)}static syncDiff(e,r,n,i){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(s,l)=>{var u;const c=(u=e[s])!==null&&u!==void 0?u:[];if(e[s]=this.cloneDeep(l),c.length>0){const f=e[s].map(p=>p.presence_ref),d=c.filter(p=>f.indexOf(p.presence_ref)<0);e[s].unshift(...d)}n(s,c,l)}),this.map(o,(s,l)=>{let u=e[s];if(!u)return;const c=l.map(f=>f.presence_ref);u=u.filter(f=>c.indexOf(f.presence_ref)<0),e[s]=u,i(s,u,l),u.length===0&&delete e[s]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xd;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(xd||(xd={}));var ca;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ca||(ca={}));var Cr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Cr||(Cr={}));class Bc{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Ue.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new tl(this,ir.join,this.params,this.timeout),this.rejoinTimer=new W1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ue.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ue.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Ue.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ue.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Ue.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ir.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new ua(this),this.broadcastEndpointURL=X1(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Ue.closed){const{config:{broadcast:o,presence:s,private:l}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[ca.PRESENCE]&&this.bindings[ca.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,f={},d={broadcast:o,presence:Object.assign(Object.assign({},s),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(Cr.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(Cr.CLOSED)),this.updateJoinPayload(Object.assign({config:d},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var v;if(this.socket.setAuth(),p===void 0){e==null||e(Cr.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,w=(v=g==null?void 0:g.length)!==null&&v!==void 0?v:0,x=[];for(let m=0;m<w;m++){const y=g[m],{filter:{event:_,schema:A,table:C,filter:E}}=y,b=p&&p[m];if(b&&b.event===_&&b.schema===A&&b.table===C&&b.filter===E)x.push(Object.assign(Object.assign({},y),{id:b.id}));else{this.unsubscribe(),this.state=Ue.errored,e==null||e(Cr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(Cr.SUBSCRIBED);return}}).receive("error",p=>{this.state=Ue.errored,e==null||e(Cr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Cr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Ue.joined&&e===ca.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,s,l;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(s=(o=this.params)===null||o===void 0?void 0:o.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ue.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ir.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new tl(this,ir.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ue.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new tl(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Fm){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,a;const o=e.toLocaleLowerCase(),{close:s,error:l,leave:u,join:c}=ir;if(n&&[s,l,u,c].indexOf(o)>=0&&n!==this._joinRef())return;let d=this._onMessage(o,r,n);if(r&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var v,g,w;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(g=p.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(p=>p.callback(d,n)):(a=this.bindings[o])===null||a===void 0||a.filter(p=>{var v,g,w,x,m,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const _=p.id,A=(v=p.filter)===null||v===void 0?void 0:v.event;return _&&((g=r.ids)===null||g===void 0?void 0:g.includes(_))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const _=(m=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return _==="*"||_===((y=r==null?void 0:r.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof d=="object"&&"ids"in d){const v=d.data,{schema:g,table:w,commit_timestamp:x,type:m,errors:y}=v;d=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:x,eventType:m,new:{},old:{},errors:y}),this._getPayloadRecords(v))}p.callback(d,n)})}_isClosed(){return this.state===Ue.closed}_isJoined(){return this.state===Ue.joined}_isJoining(){return this.state===Ue.joining}_isLeaving(){return this.state===Ue.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Bc.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ir.close,{},e)}_onError(e){this._on(ir.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ue.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=md(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=md(e.columns,e.old_record)),r}}const rl=()=>{},ao={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Xm=[1e3,2e3,5e3,1e4],qm=1e4,Km=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ym{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hu,this.transport=null,this.heartbeatIntervalMs=ao.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=rl,this.ref=0,this.reconnectTimer=null,this.logger=rl,this.conn=null,this.sendBuffer=[],this.serializer=new Um,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>Ma(async()=>{const{default:s}=await Promise.resolve().then(()=>Ai);return{default:s}},void 0).then(({default:s})=>s(...o)).catch(s=>{throw new Error(`Failed to load @supabase/node-fetch: ${s.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...o)=>a(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${pu.websocket}`,this.httpEndpoint=X1(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Pm.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Lm}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case la.connecting:return xn.Connecting;case la.open:return xn.Open;case la.closing:return xn.Closing;default:return xn.Closed}}isConnected(){return this.connectionState()===xn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new Bc(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:i,ref:a}=e,o=()=>{this.encode(e,s=>{var l;(l=this.conn)===null||l===void 0||l.send(s)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Bm,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ao.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:a,ref:o}=r,s=o?`(${o})`:"",l=a.status||"";this.log("receive",`${l} ${n} ${i} ${s}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ir.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([Km],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:jm};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(ir.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new W1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ao.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,a,o,s,l,u,c;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:hu,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:ao.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(s=e==null?void 0:e.heartbeatCallback)!==null&&s!==void 0?s:rl,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:f=>Xm[f-1]||qm,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(f,d)=>d(JSON.stringify(f)),this.decode=(c=e==null?void 0:e.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Fc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Be(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Zm extends Fc{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class gu extends Fc{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var Qm=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(t,e||[])).next())})};const q1=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ma(async()=>{const{default:n}=await Promise.resolve().then(()=>Ai);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Jm=()=>Qm(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ma(()=>Promise.resolve().then(()=>Ai),void 0)).Response:Response}),mu=t=>{if(Array.isArray(t))return t.map(r=>mu(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=mu(n)}),e},ey=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Mn=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(t,e||[])).next())})};const nl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ty=(t,e,r)=>Mn(void 0,void 0,void 0,function*(){const n=yield Jm();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{const a=t.status||500,o=(i==null?void 0:i.statusCode)||a+"";e(new Zm(nl(i),a,o))}).catch(i=>{e(new gu(nl(i),i))}):e(new gu(nl(t),t))}),ry=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(ey(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),r))};function La(t,e,r,n,i,a){return Mn(this,void 0,void 0,function*(){return new Promise((o,s)=>{t(r,ry(e,n,i,a)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>ty(l,s,n))})})}function Jo(t,e,r,n){return Mn(this,void 0,void 0,function*(){return La(t,"GET",e,r,n)})}function gr(t,e,r,n,i){return Mn(this,void 0,void 0,function*(){return La(t,"POST",e,n,i,r)})}function yu(t,e,r,n,i){return Mn(this,void 0,void 0,function*(){return La(t,"PUT",e,n,i,r)})}function ny(t,e,r,n){return Mn(this,void 0,void 0,function*(){return La(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function K1(t,e,r,n,i){return Mn(this,void 0,void 0,function*(){return La(t,"DELETE",e,n,i,r)})}var iy=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(t,e||[])).next())})};class ay{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return iy(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Be(e))return{data:null,error:e};throw e}})}}var oy=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(t,e||[])).next())})};class sy{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}asStream(){return new ay(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.execute().then(e,r)}execute(){return oy(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Be(e))return{data:null,error:e};throw e}})}}var _t=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(t,e||[])).next())})};const ly={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class uy{constructor(e,r={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=q1(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,i){return _t(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},wd),i);let s=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l))):(a=n,s["cache-control"]=`max-age=${o.cacheControl}`,s["content-type"]=o.contentType,l&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(s=Object.assign(Object.assign({},s),i.headers));const u=this._removeEmptyFolders(r),c=this._getFinalPath(u),f=yield(e=="PUT"?yu:gr)(this.fetch,`${this.url}/object/${c}`,a,Object.assign({headers:s},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Be(a))return{data:null,error:a};throw a}})}upload(e,r,n){return _t(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return _t(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),s=new URL(this.url+`/object/upload/sign/${o}`);s.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:wd.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const f=yield yu(this.fetch,s.toString(),l,{headers:c});return{data:{path:a,fullPath:f.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Be(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,r){return _t(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield gr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+a.url),s=o.searchParams.get("token");if(!s)throw new Fc("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:s},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}update(e,r,n){return _t(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return _t(this,void 0,void 0,function*(){try{return{data:yield gr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Be(i))return{data:null,error:i};throw i}})}copy(e,r,n){return _t(this,void 0,void 0,function*(){try{return{data:{path:(yield gr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Be(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return _t(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield gr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Be(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return _t(this,void 0,void 0,function*(){try{const i=yield gr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Be(i))return{data:null,error:i};throw i}})}download(e,r){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"",s=this._getFinalPath(e),l=()=>Jo(this.fetch,`${this.url}/${i}/${s}${o}`,{headers:this.headers,noResolveJson:!0});return new sy(l,this.shouldThrowOnError)}info(e){return _t(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Jo(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:mu(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}exists(e){return _t(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield ny(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n)&&n instanceof gu){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const s=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${u}`)}}}remove(e){return _t(this,void 0,void 0,function*(){try{return{data:yield K1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}list(e,r,n){return _t(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},ly),r),{prefix:e||""});return{data:yield gr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Be(i))return{data:null,error:i};throw i}})}listV2(e,r){return _t(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield gr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const cy="2.12.2",fy={"X-Client-Info":`storage-js/${cy}`};var Bn=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(t,e||[])).next())})};class dy{constructor(e,r={},n,i){this.shouldThrowOnError=!1;const a=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},fy),r),this.fetch=q1(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Bn(this,void 0,void 0,function*(){try{return{data:yield Jo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Be(e))return{data:null,error:e};throw e}})}getBucket(e){return Bn(this,void 0,void 0,function*(){try{return{data:yield Jo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Bn(this,void 0,void 0,function*(){try{return{data:yield gr(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return Bn(this,void 0,void 0,function*(){try{return{data:yield yu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Bn(this,void 0,void 0,function*(){try{return{data:yield gr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Bn(this,void 0,void 0,function*(){try{return{data:yield K1(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}}class hy extends dy{constructor(e,r={},n,i){super(e,r,n,i)}from(e){return new uy(this.url,this.headers,e,this.fetch)}}const py="2.58.0";let Xi="";typeof Deno<"u"?Xi="deno":typeof document<"u"?Xi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xi="react-native":Xi="node";const vy={"X-Client-Info":`supabase-js-${Xi}/${py}`},gy={headers:vy},my={schema:"public"},yy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},xy={};var wy=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(t,e||[])).next())})};const _y=t=>{let e;return t?e=t:typeof fetch>"u"?e=P1:e=fetch,(...r)=>e(...r)},Ey=()=>typeof Headers>"u"?M1:Headers,Cy=(t,e,r)=>{const n=_y(r),i=Ey();return(a,o)=>wy(void 0,void 0,void 0,function*(){var s;const l=(s=yield e())!==null&&s!==void 0?s:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(a,Object.assign(Object.assign({},o),{headers:u}))})};var Sy=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(t,e||[])).next())})};function Ay(t){return t.endsWith("/")?t:t+"/"}function by(t,e){var r,n;const{db:i,auth:a,realtime:o,global:s}=t,{db:l,auth:u,realtime:c,global:f}=e,d={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),s),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=s==null?void 0:s.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Sy(this,void 0,void 0,function*(){return""})};return t.accessToken?d.accessToken=t.accessToken:delete d.accessToken,d}function Iy(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ay(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Y1="2.72.0",Vn=30*1e3,xu=3,il=xu*Vn,Ny="http://localhost:9999",Ty="supabase.auth.token",Oy={"X-Client-Info":`gotrue-js/${Y1}`},wu="X-Supabase-Api-Version",Z1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ky=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Dy=10*60*1e3;class Uc extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function re(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Ry extends Uc{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Py(t){return re(t)&&t.name==="AuthApiError"}class Q1 extends Uc{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class un extends Uc{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class Br extends un{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function My(t){return re(t)&&t.name==="AuthSessionMissingError"}class Fi extends un{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class oo extends un{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class so extends un{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function jy(t){return re(t)&&t.name==="AuthImplicitGrantRedirectError"}class _d extends un{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _u extends un{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function al(t){return re(t)&&t.name==="AuthRetryableFetchError"}class Ed extends un{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Eu extends un{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const es="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Cd=` 	
\r=`.split(""),Ly=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Cd.length;e+=1)t[Cd[e].charCodeAt(0)]=-2;for(let e=0;e<es.length;e+=1)t[es[e].charCodeAt(0)]=e;return t})();function Sd(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(es[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(es[n]),e.queuedBits-=6}}function J1(t,e,r){const n=Ly[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ad(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{Uy(o,n,r)};for(let o=0;o<t.length;o+=1)J1(t.charCodeAt(o),i,a);return e.join("")}function By(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Fy(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}By(n,e)}}function Uy(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function $y(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)J1(t.charCodeAt(i),r,n);return new Uint8Array(e)}function zy(t){const e=[];return Fy(t,r=>e.push(r)),new Uint8Array(e)}function Hy(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>Sd(i,r,n)),Sd(null,r,n),e.join("")}function Vy(t){return Math.round(Date.now()/1e3)+t}function Wy(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ut=()=>typeof window<"u"&&typeof document<"u",fn={tested:!1,writable:!1},ep=()=>{if(!Ut())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fn.tested)return fn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),fn.tested=!0,fn.writable=!0}catch{fn.tested=!0,fn.writable=!1}return fn.writable};function Gy(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const tp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ma(async()=>{const{default:n}=await Promise.resolve().then(()=>Ai);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Xy=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Wn=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},dn=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Mr=async(t,e)=>{await t.removeItem(e)};class Cs{constructor(){this.promise=new Cs.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Cs.promiseConstructor=Promise;function ol(t){const e=t.split(".");if(e.length!==3)throw new Eu("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!ky.test(e[n]))throw new Eu("JWT not in base64url format");return{header:JSON.parse(Ad(e[0])),payload:JSON.parse(Ad(e[1])),signature:$y(e[2]),raw:{header:e[0],payload:e[1]}}}async function qy(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Ky(t,e){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){n(o);return}}catch(o){if(!e(a,o)){i(o);return}}})()})}function Yy(t){return("0"+t.toString(16)).substr(-2)}function Zy(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,Yy).join("")}async function Qy(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function Jy(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Qy(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fn(t,e,r=!1){const n=Zy();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Wn(t,`${e}-code-verifier`,i);const a=await Jy(n);return[a,n===a?"plain":"s256"]}const ex=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function tx(t){const e=t.headers.get(wu);if(!e||!e.match(ex))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function rx(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function nx(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ix=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Un(t){if(!ix.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function sl(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function bd(t){return JSON.parse(JSON.stringify(t))}var ax=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const mn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ox=[502,503,504];async function Id(t){var e;if(!Xy(t))throw new _u(mn(t),0);if(ox.includes(t.status))throw new _u(mn(t),t.status);let r;try{r=await t.json()}catch(a){throw new Q1(mn(a),a)}let n;const i=tx(t);if(i&&i.getTime()>=Z1["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Ed(mn(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Br}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new Ed(mn(r),t.status,r.weak_password.reasons);throw new Ry(mn(r),t.status||500,n)}const sx=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function ie(t,e,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[wu]||(a[wu]=Z1["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const s=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await lx(t,e,r+s,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function lx(t,e,r,n,i,a){const o=sx(e,n,i,a);let s;try{s=await t(r,Object.assign({},o))}catch(l){throw console.error(l),new _u(mn(l),0)}if(s.ok||await Id(s),n!=null&&n.noResolveJson)return s;try{return await s.json()}catch(l){await Id(l)}}function pr(t){var e;let r=null;dx(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Vy(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Nd(t){const e=pr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Vr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function ux(t){return{data:t,error:null}}function cx(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=t,o=ax(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},l=Object.assign({},o);return{data:{properties:s,user:l},error:null}}function fx(t){return t}function dx(t){return t.access_token&&t.refresh_token&&t.expires_in}const ll=["global","local","others"];var hx=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class px{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=tp(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=ll[0]){if(ll.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ll.join(", ")}`);try{return await ie(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await ie(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Vr})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=hx(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await ie(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:cx,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(re(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ie(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Vr})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,a,o,s,l;try{const u={nextPage:null,lastPage:0,total:0},c=await ie(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:fx});if(c.error)throw c.error;const f=await c.json(),d=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(s=c.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=g}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(re(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Un(e);try{return await ie(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Vr})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Un(e);try{return await ie(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Vr})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Un(e);try{return await ie(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Vr})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Un(e.userId);try{const{data:r,error:n}=await ie(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(re(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Un(e.userId),Un(e.id);try{return{data:await ie(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}}}function Td(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function vx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const $n={debug:!!(globalThis&&ep()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rp extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class gx extends rp{}async function mx(t,e,r){$n.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),$n.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){$n.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{$n.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw $n.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new gx(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if($n.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function np(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function yx(t){return parseInt(t,16)}function xx(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function wx(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:a=new Date,nonce:o,notBefore:s,requestId:l,resources:u,scheme:c,uri:f,version:d}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(d!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=np(t.address),v=c?`${c}://${n}`:n,g=t.statement?`${t.statement}
`:"",w=`${v} wants you to sign in with your Ethereum account:
${p}

${g}`;let x=`URI: ${f}
Version: ${d}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(i&&(x+=`
Expiration Time: ${i.toISOString()}`),s&&(x+=`
Not Before: ${s.toISOString()}`),l&&(x+=`
Request ID: ${l}`),u){let m=`
Resources:`;for(const y of u){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);m+=`
- ${y}`}x+=m}return`${w}
${x}`}vx();const _x={url:Ny,storageKey:Ty,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Oy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Od(t,e,r){return await r()}const zn={};class Na{constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Na.nextInstanceID,Na.nextInstanceID+=1,this.instanceID>0&&Ut()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},_x),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new px({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=tp(i.fetch),this.lock=i.lock||Od,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ut()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=mx:this.lock=Od,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:ep()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Td(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Td(this.memoryStorage)),Ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=zn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){zn[this.storageKey]=Object.assign(Object.assign({},zn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=zn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){zn[this.storageKey]=Object.assign(Object.assign({},zn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Y1}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=Gy(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ut()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),jy(a)){const l=(e=a.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",s),await this._saveSession(o),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return re(r)?{error:r}:{error:new Q1("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const a=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:pr}),{data:o,error:s}=a;if(s||!o)return{data:{user:null,session:null},error:s};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(a){if(re(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var r,n,i;try{let a;if("email"in e){const{email:c,password:f,options:d}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Fn(this.storage,this.storageKey)),a=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:c,password:f,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:p,code_challenge_method:v},xform:pr})}else if("phone"in e){const{phone:c,password:f,options:d}=e;a=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:f,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},channel:(i=d==null?void 0:d.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:pr})}else throw new oo("You must provide either an email or phone number and a password");const{data:o,error:s}=a;if(s||!o)return{data:{user:null,session:null},error:s};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(a){if(re(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:o,options:s}=e;r=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Nd})}else if("phone"in e){const{phone:a,password:o,options:s}=e;r=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Nd})}else throw new oo("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Fi}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(re(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,a,o,s,l,u,c,f,d;let p,v;if("message"in e)p=e.message,v=e.signature;else{const{chain:g,wallet:w,statement:x,options:m}=e;let y;if(Ut())if(typeof w=="object")y=w;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")y=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=w}const _=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href),A=await y.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=np(A[0]);let E=(n=m==null?void 0:m.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!E){const D=await y.request({method:"eth_chainId"});E=yx(D)}const b={domain:_.host,address:C,statement:x,uri:_.href,version:"1",chainId:E,nonce:(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(a=m==null?void 0:m.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(s=m==null?void 0:m.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(l=m==null?void 0:m.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.resources};p=wx(b),v=await y.request({method:"personal_sign",params:[xx(p),C]})}try{const{data:g,error:w}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:v},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(d=e.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:pr});if(w)throw w;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new Fi}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:w})}catch(g){if(re(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithSolana(e){var r,n,i,a,o,s,l,u,c,f,d,p;let v,g;if("message"in e)v=e.message,g=e.signature;else{const{chain:w,wallet:x,statement:m,options:y}=e;let _;if(Ut())if(typeof x=="object")_=x;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))_=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=x}const A=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const C=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),m?{statement:m}:null));let E;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")E=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)E=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)v=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),g=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${A.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(i=(n=y==null?void 0:y.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((s=y==null?void 0:y.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((f=(c=y==null?void 0:y.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||f===void 0)&&f.length?["Resources",...y.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const C=await _.signMessage(new TextEncoder().encode(v),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=C}}try{const{data:w,error:x}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Hy(g)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:pr});if(x)throw x;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Fi}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:x})}catch(w){if(re(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const r=await dn(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:o}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:pr});if(await Mr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Fi}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(re(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:a,nonce:o}=e,s=await ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:pr}),{data:l,error:u}=s;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Fi}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(r){if(re(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,i,a,o;try{if("email"in e){const{email:s,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Fn(this.storage,this.storageKey));const{error:f}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:s,options:l}=e,{data:u,error:c}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new oo("You must provide either an email or phone number.")}catch(s){if(re(s))return{data:{user:null,session:null},error:s};throw s}}async verifyOtp(e){var r,n;try{let i,a;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:s}=await ie(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:pr});if(s)throw s;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(re(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var r,n,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Fn(this.storage,this.storageKey)),await ie(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:ux})}catch(a){if(re(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Br;const{error:i}=await ie(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(re(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:a}=e,{error:o}=await ie(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:i,options:a}=e,{data:o,error:s}=await ie(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:s}}throw new oo("You must provide either an email or phone number and a type")}catch(r){if(re(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await dn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<il:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await dn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=sl()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Vr}):await this._useSession(async r=>{var n,i,a;const{data:o,error:s}=r;if(s)throw s;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Br}:await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Vr})})}catch(r){if(re(r))return My(r)&&(await this._removeSession(),await Mr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new Br;const o=i.session;let s=null,l=null;this.flowType==="pkce"&&e.email!=null&&([s,l]=await Fn(this.storage,this.storageKey));const{data:u,error:c}=await ie(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:l}),jwt:o.access_token,xform:Vr});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Br;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:o}=ol(e.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{session:s,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!s)return{data:{user:null,session:null},error:null};a=s}else{const{data:s,error:l}=await this._getUser(e.access_token);if(l)throw l;a={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(re(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:s}=r;if(s)throw s;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Br;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(re(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Ut())throw new so("No browser detected.");if(e.error||e.error_description||e.error_code)throw new so(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new _d("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new so("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _d("No code detected.");const{data:m,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:s,expires_at:l,token_type:u}=e;if(!a||!s||!o||!u)throw new so("No session defined in URL");const c=Math.round(Date.now()/1e3),f=parseInt(s);let d=c+f;l&&(d=parseInt(l));const p=d-c;p*1e3<=Vn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const v=d-f;c-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,d,c):c-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,d,c);const{data:g,error:w}=await this._getUser(a);if(w)throw w;const x={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:f,expires_at:d,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(n){if(re(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await dn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{error:a};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:s}=await this.admin.signOut(o,e);if(s&&!(Py(s)&&(s.status===404||s.status===401||s.status===403)))return{error:s}}return e!=="others"&&(await this._removeSession(),await Mr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=Wy(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Fn(this.storage,this.storageKey,!0));try{return await ie(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(re(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var o,s,l,u,c;const{data:f,error:d}=a;if(d)throw d;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ie(this.fetch,"GET",p,{headers:this.headers,jwt:(c=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return Ut()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(re(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)throw o;return await ie(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(re(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Ky(async i=>(i>0&&await qy(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await ie(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:pr})),(i,a)=>{const o=200*Math.pow(2,i);return a&&al(a)&&Date.now()+o-n<Vn})}catch(n){if(this._debug(r,"error",n),re(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Ut()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await dn(this.storage,this.storageKey);if(i&&this.userStorage){let o=await dn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Wn(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:sl()}else if(i&&!i.user&&!i.user){const o=await dn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Mr(this.storage,this.storageKey+"-user"),await Wn(this.storage,this.storageKey,i)):i.user=sl()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<il;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${il}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),al(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:s}=await this._getUser(i.access_token);!s&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Br;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Cs;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new Br;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const s={session:a.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(a){if(this._debug(i,"error",a),re(a)){const o={session:null,error:a};return al(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,r)}catch(l){a.push(l)}});if(await Promise.all(o),a.length>0){for(let s=0;s<a.length;s+=1)console.error(a[s]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Wn(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=bd(i);await Wn(this.storage,this.storageKey,a)}else{const i=bd(r);await Wn(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Mr(this.storage,this.storageKey),await Mr(this.storage,this.storageKey+"-code-verifier"),await Mr(this.storage,this.storageKey+"-user"),this.userStorage&&await Mr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ut()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Vn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Vn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Vn}ms, refresh threshold is ${xu} ticks`),i<=xu&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof rp)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ut()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await Fn(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(s.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await ie(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(re(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)return{data:null,error:o};const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await ie(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{data:null,error:a};const{data:o,error:s}=await ie(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return s?{data:null,error:s}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:s})})}catch(r){if(re(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await ie(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(re(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=ol(i.access_token);let s=null;o.aal&&(s=o.aal);let l=s;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:s,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(s=>s.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(s=>s.kid===e),n&&this.jwks_cached_at+Dy>i)return n;const{data:a,error:o}=await ie(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(s=>s.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};n=p.session.access_token}const{header:i,payload:a,signature:o,raw:{header:s,payload:l}}=ol(n);r!=null&&r.allowExpired||rx(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:a,header:i,signature:o},error:null}}const c=nx(i.alg),f=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,f,o,zy(`${s}.${l}`)))throw new Eu("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}}Na.nextInstanceID=0;const Ex=Na;class Cx extends Ex{constructor(e){super(e)}}var Sx=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(t,e||[])).next())})};class Ax{constructor(e,r,n){var i,a,o;this.supabaseUrl=e,this.supabaseKey=r;const s=Iy(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const l=`sb-${s.hostname.split(".")[0]}-auth-token`,u={db:my,realtime:xy,auth:Object.assign(Object.assign({},yy),{storageKey:l}),global:gy},c=by(n??{},u);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=c.global.headers)!==null&&a!==void 0?a:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(f,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=Cy(r,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new Rm(new URL("rest/v1",s).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new hy(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new fm(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Sx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:o,flowType:s,lock:l,debug:u},c,f){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Cx({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,flowType:s,lock:l,debug:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Ym(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const bx=(t,e,r)=>new Ax(t,e,r);function Ix(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Ix()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Nx="https://twudnelomzwqszqjqcgj.supabase.co",Tx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3dWRuZWxvbXp3cXN6cWpxY2dqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg5ODc5MjgsImV4cCI6MjA3NDU2MzkyOH0.YnCuda4OX561xrmBRCcqeQUEXLPXIX2-vn0XFpV5Vig",U=bx(Nx,Tx,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}}}),ul=async()=>{const{data:{user:t}}=await U.auth.getUser();if(!t)return null;const{data:e,error:r}=await U.from("profiles").select("*").eq("id",t.id).single();if(r){if(r.code==="PGRST116"){const n=t.user_metadata;if(n&&n.name&&n.username){const{data:i,error:a}=await U.from("profiles").insert([{id:t.id,name:n.name,username:n.username,role:n.role||"counter",status:n.status||"inactive"}]).select().single();return a?(console.error("Error creating user profile:",a),null):i}}return console.error("Error fetching user profile:",r),null}return e},Ox=async t=>{try{const{data:e,error:r}=await U.from("categories").select("name").eq("id",t).single();if(r)throw r;const{data:n,error:i}=await U.from("items").select("id, item_name, sku").eq("category",e.name);if(i)throw i;const{data:a,error:o}=await U.from("locations").select("id, name").eq("category_id",t);if(o)throw o;return{category:e.name,itemCount:(n==null?void 0:n.length)||0,locationCount:(a==null?void 0:a.length)||0,items:n||[],locations:a||[],canDelete:n.length===0&&a.length===0}}catch(e){throw console.error("Error checking category usage:",e),e}},kd=async t=>{try{const{data:e,error:r}=await U.from("counts").select("id, session_id, item_id, counted_qty, timestamp").eq("location_id",t);if(r)throw r;const{data:n,error:i}=await U.from("locations").select("id, name, category_id, is_active").eq("id",t).single();if(i)throw i;const{data:a,error:o}=await U.from("categories").select("name").eq("id",n.category_id).single();if(o)throw o;return{location:n.name,category:a.name,countRecords:(e==null?void 0:e.length)||0,sessions:[...new Set((e==null?void 0:e.map(s=>s.session_id))||[])],isActive:n.is_active,canModify:e.length===0,counts:e||[]}}catch(e){throw console.error("Error checking location usage:",e),e}},Dd=async(t,e)=>{try{const{data:r,error:n}=await U.rpc("soft_delete_location",{location_id_param:t,user_id_param:e});if(n)throw n;return r}catch(r){throw console.error("Error soft deleting location:",r),r}},kx=async t=>{try{const{data:e,error:r}=await U.rpc("reactivate_location",{location_id_param:t});if(r)throw r;return e}catch(e){throw console.error("Error reactivating location:",e),e}},ip=T.createContext({}),Ii=()=>{const t=T.useContext(ip);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Dx=({children:t})=>{const[e,r]=T.useState(null),[n,i]=T.useState(null),[a,o]=T.useState(!0);T.useEffect(()=>{(async()=>{try{const{data:{session:v}}=await U.auth.getSession();if(v!=null&&v.user){const g=await ul();!g||g.status!=="active"?(await U.auth.signOut(),r(null),i(null)):(r(v.user),i(g))}o(!1)}catch(v){console.error("Error getting initial session:",v),o(!1)}})();const{data:{subscription:p}}=U.auth.onAuthStateChange(async(v,g)=>{if(console.log("Auth event:",v,"Session:",!!g),v==="SIGNED_OUT"||!g){r(null),i(null),o(!1);return}if(v==="SIGNED_IN"){console.log("SIGNED_IN event - skipping (handled by signIn function)");return}if(g!=null&&g.user)try{const w=await ul();!w||w.status!=="active"?(console.log("Profile inactive or not found, signing out"),await U.auth.signOut(),r(null),i(null)):(r(g.user),i(w))}catch(w){console.error("Error in auth state change:",w),await U.auth.signOut(),r(null),i(null)}o(!1)});return()=>p.unsubscribe()},[]);const s=T.useCallback(async(d,p)=>{try{console.log("Starting sign in...");const{data:v,error:g}=await U.auth.signInWithPassword({email:d,password:p});if(console.log("Auth result:",{success:!!v.session,error:g}),g)throw g;console.log("Checking user profile...");const w=await ul();if(console.log("Profile fetched:",w),!w)throw console.log("No profile found, signing out"),await U.auth.signOut(),new Error("User profile not found. Please contact administrator.");if(console.log("Profile status:",w.status),w.status!=="active"){console.log("Profile is not active, signing out"),await U.auth.signOut();const x=w.status==="inactive"?"Your account is currently inactive and cannot be used for login.":`Your account status is "${w.status}" and cannot be used for login.`;throw new Error(`${x} Please contact your administrator to activate your account before attempting to log in.`)}return console.log("Setting user and profile - login successful"),r(v.user),i(w),{data:v,error:null}}catch(v){return console.error("Sign in error:",v),await U.auth.signOut(),r(null),i(null),{data:null,error:v}}},[]),l=T.useCallback(async(d,p,v)=>{try{console.log("Signing up with userData:",v);const{data:g,error:w}=await U.auth.signUp({email:d,password:p,options:{data:{name:v.name,username:v.username,role:v.role,status:v.status}}});if(w)throw w;return console.log("Signup successful:",g),{data:g,error:null}}catch(g){return console.error("Sign up error:",g),{data:null,error:g}}},[]),u=T.useCallback(async()=>{try{const{error:d}=await U.auth.signOut();if(d)throw d;r(null),i(null)}catch(d){throw console.error("Sign out error:",d),d}},[]),c=T.useCallback(async d=>{try{const{data:p,error:v}=await U.from("profiles").update(d).eq("id",e.id).select().single();if(v)throw v;return i(p),{data:p,error:null}}catch(p){return console.error("Update profile error:",p),{data:null,error:p}}},[e==null?void 0:e.id]),f=T.useMemo(()=>{var d;return{user:e,profile:n,loading:a,signIn:s,signUp:l,signOut:u,updateProfile:c,isAdmin:(n==null?void 0:n.role)==="admin"||((d=e==null?void 0:e.user_metadata)==null?void 0:d.role)==="admin",isAuthenticated:!!e&&!!n&&n.status==="active"}},[e,n,a,s,l,u,c]);return h.jsx(ip.Provider,{value:f,children:t})};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ap=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Px={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:o,...s},l)=>T.createElement("svg",{ref:l,...Px,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:ap("lucide",i),...s},[...o.map(([u,c])=>T.createElement(u,c)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=(t,e)=>{const r=T.forwardRef(({className:n,...i},a)=>T.createElement(Mx,{ref:a,iconNode:e,className:ap(`lucide-${Rx(t)}`,n),...i}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Lx=se("Bookmark",jx);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Fx=se("Building",Bx);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Rd=se("Calculator",Ux);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],op=se("Calendar",$x);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Hx=se("Camera",zx);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Wx=se("Check",Vx);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Xx=se("ChevronDown",Gx);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Pd=se("ChevronLeft",qx);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Yx=se("ChevronUp",Kx);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Cn=se("CircleAlert",Zx);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ss=se("CircleCheckBig",Qx);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],e2=se("CircleX",Jx);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],$c=se("ClipboardList",t2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],n2=se("Clock",r2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]],a2=se("Delete",i2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=[["circle",{cx:"12",cy:"6",r:"1",key:"1bh7o1"}],["line",{x1:"5",x2:"19",y1:"12",y2:"12",key:"13b5wn"}],["circle",{cx:"12",cy:"18",r:"1",key:"lqb9t5"}]],s2=se("Divide",o2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],u2=se("Download",l2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],f2=se("Info",c2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],h2=se("Lock",d2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],Cu=se("LogOut",p2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],g2=se("Mail",v2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],y2=se("MapPin",m2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=[["path",{d:"M5 12h14",key:"1ays0h"}]],w2=se("Minus",x2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=[["path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z",key:"1ront0"}],["path",{d:"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9",key:"19h2x1"}],["path",{d:"M12 3v6",key:"1holv5"}]],E2=se("Package2",_2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Ba=se("Package",C2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Xt=se("Plus",S2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],b2=se("QrCode",A2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Su=se("Save",I2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Au=se("Search",N2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ta=se("SquarePen",T2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],qi=se("Tag",O2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],wi=se("Trash2",k2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],R2=se("UserMinus",D2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],M2=se("UserPlus",P2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],bu=se("Users",j2);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Pt=se("X",L2),B2=()=>{const[t,e]=T.useState(""),[r,n]=T.useState(""),[i,a]=T.useState(!1),[o,s]=T.useState(""),[l,u]=T.useState(""),[c,f]=T.useState("counter"),[d,p]=T.useState("inactive"),[v,g]=T.useState(""),[w,x]=T.useState(""),[m,y]=T.useState(!1),{signIn:_,signUp:A}=Ii(),C=async b=>{b.preventDefault(),g(""),x(""),y(!0);try{if(i){if(!o||!l)throw new Error("Please fill in all fields");const{data:D,error:R}=await A(t,r,{name:o,username:l,role:c,status:d});if(R)throw R;D.user&&!D.session&&(x("Account created successfully! Please check your email to confirm your account. Note: Your account will be inactive until an administrator activates it."),E())}else{const{error:D}=await _(t,r);if(D)throw D}}catch(D){g(D.message||"An unexpected error occurred. Please try again.")}finally{y(!1)}},E=()=>{e(""),n(""),s(""),u(""),f("counter"),p("inactive"),g("")};return h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg w-full max-w-md",children:[h.jsxs("div",{className:"text-center mb-6",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-3",children:h.jsx(Ba,{className:"h-8 w-8 text-blue-600"})}),h.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Warehouse Cycle Count"}),h.jsx("p",{className:"text-gray-600 mt-1",children:i?"Create your account":"Sign in to your account"})]}),h.jsxs("form",{onSubmit:C,className:"space-y-4",children:[i&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-gray-700 text-sm font-semibold mb-2",children:"Full Name"}),h.jsx("input",{type:"text",value:o,onChange:b=>s(b.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"Enter your full name",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-gray-700 text-sm font-semibold mb-2",children:"Username"}),h.jsx("input",{type:"text",value:l,onChange:b=>u(b.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"Enter username",required:!0})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-gray-700 text-sm font-semibold mb-2",children:"Email"}),h.jsxs("div",{className:"relative",children:[h.jsx(g2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),h.jsx("input",{type:"email",value:t,onChange:b=>e(b.target.value),className:"w-full pl-11 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"your.email@example.com",required:!0})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-gray-700 text-sm font-semibold mb-2",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(h2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),h.jsx("input",{type:"password",value:r,onChange:b=>n(b.target.value),className:"w-full pl-11 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"Enter your password",required:!0,minLength:6})]})]}),v&&h.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-200 text-red-800 rounded-lg",children:[h.jsx(Cn,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),h.jsx("div",{className:"flex-1 text-sm leading-relaxed",children:v})]}),w&&h.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 border border-blue-200 text-blue-800 rounded-lg",children:[h.jsx(f2,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),h.jsx("div",{className:"flex-1 text-sm leading-relaxed",children:w})]}),h.jsx("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition font-semibold shadow-sm hover:shadow-md",children:m?h.jsxs("div",{className:"flex items-center justify-center",children:[h.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),i?"Creating Account...":"Signing In..."]}):h.jsx(h.Fragment,{children:i?"Create Account":"Sign In"})})]}),h.jsx("div",{className:"mt-6 text-center",children:h.jsx("button",{onClick:()=>{a(!i),E(),x("")},className:"text-blue-600 hover:text-blue-800 text-sm font-medium hover:underline transition",children:i?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})},F2=({message:t="Loading..."})=>h.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md text-center",children:[h.jsx(Ba,{className:"mx-auto h-12 w-12 text-blue-600 mb-4 animate-pulse"}),h.jsx("div",{className:"spinner mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600",children:t})]})}),U2=({items:t,onTagsUpdated:e,session:r})=>{const[n,i]=T.useState(new Set),[a,o]=T.useState(!1),[s,l]=T.useState([]),[u,c]=T.useState(""),[f,d]=T.useState(""),[p,v]=T.useState(new Set),[g,w]=T.useState("add"),[x,m]=T.useState(!1),[y,_]=T.useState(""),[A,C]=T.useState(null),E=T.useMemo(()=>{const P=new Set;return t.forEach(O=>{O.tags&&Array.isArray(O.tags)&&O.tags.forEach(L=>P.add(L))}),Array.from(P).sort()},[t]),b=T.useMemo(()=>{if(!y)return t;const P=y.toLowerCase().trim();return t.filter(O=>!!(O.sku&&O.sku.toLowerCase().includes(P)||O.item_code&&O.item_code.toLowerCase().includes(P)||O.item_name&&O.item_name.toLowerCase().includes(P)||O.category&&O.category.toLowerCase().includes(P)||O.tags&&Array.isArray(O.tags)&&O.tags.some(L=>L.toLowerCase().includes(P))||O.uom&&O.uom.toLowerCase().includes(P)))},[t,y]),D=T.useMemo(()=>u.trim()?E.filter(P=>P.toLowerCase().includes(u.toLowerCase())):E,[E,u]),R=P=>{i(O=>{const L=new Set(O);return L.has(P)?L.delete(P):L.add(P),L})},J=()=>{n.size===b.length?i(new Set):i(new Set(b.map(P=>P.id)))},q=P=>{v(O=>new Set([...O,P]))},ee=P=>{v(O=>{const L=new Set(O);return L.delete(P),L})},z=()=>{f.trim()&&!E.includes(f.trim())&&(q(f.trim()),d(""))},te=async()=>{if(!(n.size===0||p.size===0)){m(!0);try{const P=t.filter(O=>n.has(O.id));for(const O of P){let L=[...O.tags||[]];g==="add"?p.forEach(K=>{L.includes(K)||L.push(K)}):L=L.filter(K=>!p.has(K));const{error:X}=await U.from("items").update({tags:L}).eq("id",O.id);if(X)throw console.error("Error updating item tags:",X,{itemId:O.id,currentTags:O.tags,updatedTags:L}),X;console.log("Successfully updated tags for item:",O.id,{from:O.tags,to:L})}e&&(console.log("Calling onTagsUpdated callback to refresh data..."),await e());try{const O=localStorage.getItem("adminDashboardData");if(O){const L=JSON.parse(O);L.timestamp=0,localStorage.setItem("adminDashboardData",JSON.stringify(L)),console.log("Marked cache as expired to force fresh data on reload")}}catch(O){console.error("Error updating cache timestamp:",O)}i(new Set),v(new Set),o(!1),ce(`Successfully ${g==="add"?"added":"removed"} ${p.size} tag(s) from ${P.length} item(s)`,"success"),console.log("Tag update completed successfully:",{operation:g,tagCount:p.size,itemCount:P.length,tags:Array.from(p),items:P.map(O=>({id:O.id,sku:O.sku,name:O.item_name}))})}catch(P){console.error("Error updating tags:",P),ce("Error updating tags: "+P.message,"error")}finally{m(!1)}}},ce=(P,O="success")=>{C({message:P,type:O,id:Date.now()}),setTimeout(()=>C(null),5e3)};return h.jsxs("div",{className:"relative",children:[A&&h.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg border max-w-sm transition-all duration-300 ${A.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"flex-shrink-0",children:A.type==="success"?h.jsx(Ss,{className:"h-5 w-5 text-green-600"}):h.jsx(Cn,{className:"h-5 w-5 text-red-600"})}),h.jsx("div",{className:"flex-1",children:h.jsx("p",{className:"text-sm font-medium",children:A.message})}),h.jsx("button",{onClick:()=>C(null),className:"flex-shrink-0 text-gray-400 hover:text-gray-600",children:h.jsx(Pt,{className:"h-4 w-4"})})]})}),h.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-0",children:[h.jsxs("div",{className:"p-6 space-y-4 border-r border-gray-200",children:[h.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-gray-100",children:[h.jsx("h4",{className:"font-semibold text-gray-800",children:"Select Items"}),h.jsxs("div",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded",children:[n.size," selected"]})]}),h.jsxs("div",{className:"relative",children:[h.jsx(Au,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),h.jsx("input",{type:"text",placeholder:"Search by SKU, item code, name, category, UOM, or tags...",value:y,onChange:P=>_(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),h.jsxs("div",{className:"border rounded-lg max-h-96 overflow-y-auto bg-gray-50",children:[h.jsx("div",{className:"p-3 border-b bg-white",children:h.jsxs("label",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"checkbox",checked:n.size===b.length&&b.length>0,onChange:J,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),h.jsx("span",{className:"text-sm font-medium",children:"Select All Visible"})]})}),h.jsx("div",{className:"divide-y divide-gray-200",children:b.map(P=>h.jsx("div",{className:`p-3 hover:bg-gray-50 cursor-pointer transition-colors ${n.has(P.id)?"bg-blue-50 border-l-4 border-blue-500":"bg-white"}`,onClick:()=>R(P.id),children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("input",{type:"checkbox",checked:n.has(P.id),onChange:()=>R(P.id),className:"mt-0.5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1 text-sm",children:[h.jsx("span",{className:"font-semibold text-gray-900",children:P.sku}),h.jsx("span",{className:"text-gray-400",children:"|"}),h.jsx("span",{className:"text-gray-600 font-mono",children:P.item_code}),h.jsx("span",{className:"text-gray-400",children:"•"}),h.jsx("span",{className:"text-blue-600 font-medium",children:P.category}),h.jsx("span",{className:"text-gray-400",children:"•"}),h.jsx("span",{className:"text-green-600 font-medium",children:P.uom})]}),h.jsx("h5",{className:"font-medium text-gray-900 mb-2 truncate",children:P.item_name}),h.jsx("div",{className:"flex flex-wrap gap-1",children:P.tags&&P.tags.length>0?P.tags.map((O,L)=>h.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800",children:[h.jsx(qi,{className:"h-3 w-3"}),O]},L)):h.jsx("span",{className:"text-xs text-gray-400 italic",children:"No tags"})})]})]})},P.id))})]})]}),h.jsxs("div",{className:"p-6 space-y-4",children:[h.jsxs("div",{className:"pb-4 border-b border-gray-100",children:[h.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Manage Tags"}),h.jsx("p",{className:"text-sm text-gray-600",children:n.size>0?`Managing tags for ${n.size} selected item(s)`:"Select items from the left panel to manage their tags"})]}),n.size>0&&h.jsxs("div",{className:"flex gap-2 p-4 bg-gray-50 rounded-lg",children:[h.jsxs("button",{onClick:()=>{w("add"),o(!0)},className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center justify-center gap-2 text-sm font-medium transition-colors",children:[h.jsx(Xt,{className:"h-4 w-4"}),"Add Tags"]}),h.jsxs("button",{onClick:()=>{w("remove"),o(!0)},className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 flex items-center justify-center gap-2 text-sm font-medium transition-colors",children:[h.jsx(Pt,{className:"h-4 w-4"}),"Remove Tags"]})]}),h.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[h.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Statistics"}),h.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[h.jsxs("div",{className:"bg-white p-2 rounded border",children:[h.jsx("span",{className:"text-gray-600 block",children:"Total Items:"}),h.jsx("span",{className:"font-semibold text-lg",children:t.length})]}),h.jsxs("div",{className:"bg-white p-2 rounded border",children:[h.jsx("span",{className:"text-gray-600 block",children:"Items with Tags:"}),h.jsx("span",{className:"font-semibold text-lg text-blue-600",children:t.filter(P=>P.tags&&P.tags.length>0).length})]}),h.jsxs("div",{className:"bg-white p-2 rounded border",children:[h.jsx("span",{className:"text-gray-600 block",children:"Unique Tags:"}),h.jsx("span",{className:"font-semibold text-lg text-green-600",children:E.length})]}),h.jsxs("div",{className:"bg-white p-2 rounded border",children:[h.jsx("span",{className:"text-gray-600 block",children:"Selected:"}),h.jsx("span",{className:"font-semibold text-lg text-purple-600",children:n.size})]})]})]}),n.size>0&&h.jsxs("div",{className:"p-4 border rounded-lg bg-blue-50",children:[h.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Selected Items Preview:"}),h.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-2",children:[Array.from(n).slice(0,5).map(P=>{const O=t.find(L=>L.id===P);return O?h.jsxs("div",{className:"text-sm text-gray-700 flex items-center gap-2 p-2 bg-white rounded border",children:[h.jsx("span",{className:"font-semibold text-gray-900",children:O.sku}),h.jsx("span",{className:"text-gray-400",children:"•"}),h.jsx("span",{className:"truncate flex-1",children:O.item_name}),h.jsxs("div",{className:"flex gap-1",children:[O.tags&&O.tags.length>0?O.tags.slice(0,2).map((L,X)=>h.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-700 rounded text-xs",children:L},X)):h.jsx("span",{className:"text-xs text-gray-400",children:"No tags"}),O.tags&&O.tags.length>2&&h.jsxs("span",{className:"text-xs text-gray-400",children:["+",O.tags.length-2]})]})]},P):null}),n.size>5&&h.jsxs("div",{className:"text-sm text-gray-500 bg-white p-2 rounded border text-center",children:["... and ",n.size-5," more items selected"]})]})]}),n.size===0&&h.jsxs("div",{className:"p-8 text-center text-gray-500 bg-gray-50 rounded-lg",children:[h.jsx(qi,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),h.jsx("p",{className:"font-medium mb-1",children:"No items selected"}),h.jsx("p",{className:"text-sm",children:"Choose items from the left panel to start managing tags"})]})]})]}),a&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col shadow-2xl",children:[h.jsxs("div",{className:"p-6 border-b flex justify-between items-center bg-gray-50",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-bold text-gray-900",children:g==="add"?"Add Tags":"Remove Tags"}),h.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[g==="add"?"Adding":"Removing"," tags from ",n.size," selected item(s)"]})]}),h.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:h.jsx(Pt,{className:"h-6 w-6"})})]}),h.jsx("div",{className:"p-6 flex-1 overflow-y-auto",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsx("h4",{className:"font-medium text-gray-900",children:"Select Tags"}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:g==="add"?"Tags to Add:":"Tags to Remove:"}),h.jsx("div",{className:"flex flex-wrap gap-2 min-h-[60px] p-3 border border-gray-300 rounded-md",children:p.size===0?h.jsx("span",{className:"text-gray-400 text-sm",children:"No tags selected"}):Array.from(p).map(P=>h.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[h.jsx(qi,{className:"h-3 w-3"}),P,h.jsx("button",{onClick:()=>ee(P),className:"text-blue-600 hover:text-blue-800",children:h.jsx(Pt,{className:"h-3 w-3"})})]},P))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Existing Tags:"}),h.jsxs("div",{className:"relative",children:[h.jsx(Au,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),h.jsx("input",{type:"text",placeholder:"Search existing tags...",value:u,onChange:P=>c(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),D.length>0&&h.jsx("div",{className:"mt-2 max-h-32 overflow-y-auto border border-gray-200 rounded-md",children:D.map(P=>h.jsxs("button",{onClick:()=>q(P),disabled:p.has(P),className:`w-full text-left px-3 py-2 hover:bg-gray-50 flex items-center gap-2 ${p.has(P)?"bg-gray-100 text-gray-400":"text-gray-700"}`,children:[h.jsx(qi,{className:"h-3 w-3"}),P,p.has(P)&&h.jsx(Wx,{className:"h-3 w-3 text-green-600"})]},P))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Create New Tag:"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"text",placeholder:"Enter new tag name...",value:f,onChange:P=>d(P.target.value),onKeyPress:P=>P.key==="Enter"&&z(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),h.jsxs("button",{onClick:z,disabled:!f.trim()||E.includes(f.trim()),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-300 flex items-center gap-2",children:[h.jsx(Xt,{className:"h-4 w-4"}),"Create"]})]}),f.trim()&&E.includes(f.trim())&&h.jsx("p",{className:"text-sm text-red-600 mt-1",children:"Tag already exists"})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h4",{className:"font-medium text-gray-900",children:"Preview & Apply"}),h.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[h.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Changes Preview:"}),h.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[g==="add"?"Adding":"Removing"," ",p.size," tag(s) from ",n.size," item(s)"]}),p.size>0&&h.jsxs("div",{className:"mb-3",children:[h.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Tags:"}),h.jsx("div",{className:"flex flex-wrap gap-1",children:Array.from(p).map(P=>h.jsx("span",{className:"px-2 py-1 bg-blue-200 text-blue-800 rounded text-xs",children:P},P))})]}),n.size>0&&h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Items:"}),h.jsxs("div",{className:"max-h-24 overflow-y-auto text-xs text-gray-600",children:[Array.from(n).slice(0,3).map(P=>{const O=t.find(L=>L.id===P);return O?h.jsxs("div",{className:"mb-1",children:[O.sku," - ",O.item_name]},P):null}),n.size>3&&h.jsxs("div",{className:"text-gray-500",children:["... and ",n.size-3," more items"]})]})]})]})]})]})}),h.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-end gap-3",children:[h.jsx("button",{onClick:()=>o(!1),className:"px-6 py-2.5 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium transition-colors",disabled:x,children:"Cancel"}),h.jsxs("button",{onClick:te,disabled:n.size===0||p.size===0||x,className:"px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-blue-300 flex items-center gap-2 font-medium transition-colors shadow-sm",children:[x?h.jsx("div",{className:"spinner w-4 h-4"}):h.jsx(Su,{className:"h-4 w-4"}),g==="add"?"Add Tags":"Remove Tags"]})]})]})})]})]})},$2=({user:t,signOut:e})=>{var ee;const[r,n]=T.useState("sessions"),[i,a]=T.useState(!1),[o,s]=T.useState(""),[l,u]=T.useState([]),[c,f]=T.useState([]),[d,p]=T.useState([]),[v,g]=T.useState([]),[w,x]=T.useState([]),[m,y]=T.useState(!0),_=5*60*1e3,A=T.useRef(0),C=T.useRef(!1),[E,b]=T.useState(()=>{const z=localStorage.getItem("adminDashboardData");if(z)try{const te=JSON.parse(z);if(Date.now()-(te.timestamp||0)<_)return u(te.sessions||[]),f(te.items||[]),p(te.categories||[]),g(te.locations||[]),x(te.users||[]),y(!1),A.current=te.timestamp||Date.now(),!0;localStorage.removeItem("adminDashboardData")}catch(te){console.error("Error parsing cached data:",te),localStorage.removeItem("adminDashboardData")}return!1}),D=T.useCallback(async({showLoading:z=!0}={})=>{if(!C.current)try{z&&y(!0),C.current=!0;const[te,ce,P,O,L]=await Promise.all([U.from("sessions").select("*, session_users (user_id)").order("created_date",{ascending:!1}),U.from("items").select("*").order("item_name"),U.from("categories").select("*").order("name"),U.from("location_usage").select("*").order("name"),U.from("profiles").select("*").order("name")]);if(te.data){const Ke=[...new Set(te.data.flatMap(Zt=>{var Qt;return((Qt=Zt.session_users)==null?void 0:Qt.map(Rr=>Rr.user_id))||[]}))];if(Ke.length>0){const{data:Zt}=await U.from("profiles").select("id, name, username").in("id",Ke),Qt={};Zt==null||Zt.forEach(Rr=>{Qt[Rr.id]=Rr}),te.data.forEach(Rr=>{var jn;(jn=Rr.session_users)==null||jn.forEach(dr=>{dr.profiles=Qt[dr.user_id]})})}}const X=te.data||[],K=ce.data||[],Y=P.data||[],Ce=O.data||[],fe=L.data||[];if(te.error)throw te.error;if(ce.error)throw ce.error;if(P.error)throw P.error;if(O.error)throw O.error;if(L.error)throw L.error;u(X),f(K),p(Y),g(Ce),x(fe),s("");const fr={sessions:X,items:K,categories:Y,locations:Ce,users:fe,timestamp:Date.now()};localStorage.setItem("adminDashboardData",JSON.stringify(fr)),b(!0),A.current=fr.timestamp}catch(te){console.error("Error fetching dashboard data:",te),s("Failed to load dashboard data")}finally{z&&y(!1),C.current=!1}},[]);T.useEffect(()=>{E||D()},[E,D]),T.useEffect(()=>{const z=()=>{document.visibilityState==="visible"&&Date.now()-A.current>=_&&!C.current&&D({showLoading:!1})};return document.addEventListener("visibilitychange",z),()=>document.removeEventListener("visibilitychange",z)},[_,D]);const R=[{id:"sessions",label:"Sessions",icon:$c},{id:"items",label:"Items",icon:Ba},{id:"tags",label:"Tags",icon:qi},{id:"users",label:"Users",icon:bu},{id:"categories",label:"Categories & Locations",icon:Fx}],J=async()=>{try{await e()}catch(z){console.error("Sign out error:",z)}},q=async()=>{try{console.log("Refreshing items data after tag update...");const{data:z,error:te}=await U.from("items").select("*").order("item_name");if(te)throw console.error("Supabase error fetching items:",te),te;console.log("Successfully fetched updated items:",(z==null?void 0:z.length)||0,"items"),f(z);const ce=localStorage.getItem("adminDashboardData");if(ce)try{const P=JSON.parse(ce);P.items=z,P.timestamp=Date.now(),localStorage.setItem("adminDashboardData",JSON.stringify(P)),console.log("Updated localStorage cache with fresh items data")}catch(P){console.error("Error updating localStorage cache:",P)}else console.log("No existing cache found to update")}catch(z){console.error("Error refreshing items data:",z),alert("Error refreshing data: "+z.message)}};return h.jsxs("div",{className:"min-h-screen bg-gray-100",children:[h.jsx("div",{className:"bg-white shadow-sm",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsxs("div",{className:"flex justify-between items-center py-4",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("span",{className:"text-gray-600 hidden sm:block",children:["Welcome, ",((ee=t==null?void 0:t.user_metadata)==null?void 0:ee.name)||(t==null?void 0:t.email)]}),h.jsxs("button",{onClick:J,className:"text-red-600 hover:text-red-800 flex items-center space-x-1",title:"Logout",children:[h.jsx(Cu,{className:"h-5 w-5"}),h.jsx("span",{className:"hidden sm:block",children:"Logout"})]})]})]}),h.jsx("div",{className:"border-b border-gray-200",children:h.jsx("nav",{className:"-mb-px flex space-x-4 overflow-x-auto",children:R.map(z=>{const te=z.icon;return h.jsxs("button",{onClick:()=>n(z.id),className:`flex items-center gap-2 whitespace-nowrap py-3 px-2 border-b-2 font-medium text-sm ${r===z.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[h.jsx(te,{className:"h-4 w-4"}),z.label]},z.id)})})})]})}),h.jsxs("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[o&&h.jsxs("div",{className:"mb-6 flex items-center p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:[h.jsx(Cn,{className:"h-4 w-4 mr-2"}),o]}),m?h.jsxs("div",{className:"flex items-center justify-center py-8",children:[h.jsx("div",{className:"spinner"}),h.jsx("span",{className:"ml-2 text-gray-600",children:"Loading dashboard data..."})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{style:{display:r==="sessions"?"block":"none"},children:h.jsx(z2,{sessions:l,setSessions:u,onDataChange:D})}),h.jsx("div",{style:{display:r==="items"?"block":"none"},children:h.jsx(H2,{items:c,setItems:f,categories:d,setCategories:p,onDataChange:D})}),h.jsxs("div",{style:{display:r==="tags"?"block":"none"},children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-xl font-semibold",children:"Tag Management"}),h.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Manage tags for all items in the system. Select items to add or remove tags in bulk."})]}),h.jsx(U2,{items:c,onTagsUpdated:q})]}),h.jsx("div",{style:{display:r==="users"?"block":"none"},children:h.jsx(V2,{users:w,setUsers:x,onDataChange:D})}),h.jsx("div",{style:{display:r==="categories"?"block":"none"},children:h.jsx(W2,{items:c,categories:d,setCategories:p,locations:v,setLocations:g,onDataChange:D})})]})]})]})},z2=Ot.memo(({sessions:t,setSessions:e,onDataChange:r})=>{const[n,i]=T.useState(!1),[a,o]=T.useState(null),[s,l]=T.useState(!1),[u,c]=T.useState(!1),[f,d]=T.useState(null),[p,v]=T.useState(null),g=()=>{o(null),i(!0)},w=C=>{o(C),i(!0)},x=async C=>{if(window.confirm("Are you sure you want to delete this session? All count data will be lost."))try{const{error:E}=await U.from("sessions").delete().eq("id",C);if(E)throw E;await r()}catch(E){console.error("Error deleting session:",E)}},m=C=>{d(C),l(!0)},y=C=>{v(C),c(!0)},_=C=>{const E=new Date(C),b=String(E.getDate()).padStart(2,"0"),D=String(E.getMonth()+1).padStart(2,"0"),R=E.getFullYear(),J=String(E.getHours()).padStart(2,"0"),q=String(E.getMinutes()).padStart(2,"0"),ee=String(E.getSeconds()).padStart(2,"0");return`${b}/${D}/${R} ${J}:${q}:${ee}`},A=async C=>{try{const{data:E,error:b}=await U.from("session_items").select(`
          items (
            id,
            sku,
            item_name
          )
        `).eq("session_id",C.id);if(b)throw b;const D=E.map(Y=>Y.items.id),{data:R,error:J}=await U.from("counts").select(`
          *,
          items (
            sku,
            item_name
          ),
          locations (
            name
          )
        `).eq("session_id",C.id);if(J)throw J;const q=[...new Set(R.map(Y=>Y.user_id))],{data:ee,error:z}=await U.from("profiles").select("id, name").in("id",q);if(z)throw z;const te={};ee==null||ee.forEach(Y=>{te[Y.id]=Y.name});const ce=`data:text/csv;charset=utf-8,Session,SKU,Item Name,Location,Counted Qty,User,Timestamp
`,O=R.map(Y=>{var Ce,fe,fr;return{sessionName:C.name,sku:((Ce=Y.items)==null?void 0:Ce.sku)||"",itemName:((fe=Y.items)==null?void 0:fe.item_name)||"",location:((fr=Y.locations)==null?void 0:fr.name)||"",quantity:Y.counted_qty,userName:te[Y.user_id]||"",timestamp:_(Y.timestamp)}}).map(Y=>`${Y.sessionName},"${Y.sku}","${Y.itemName}",${Y.location},${Y.quantity},"${Y.userName}","${Y.timestamp}"`).join(`
`),L=ce+O,X=encodeURI(L),K=document.createElement("a");K.setAttribute("href",X),K.setAttribute("download",`${C.name}_report.csv`),document.body.appendChild(K),K.click(),document.body.removeChild(K)}catch(E){console.error("Error exporting report:",E),alert("Error exporting report: "+E.message)}};return h.jsxs("div",{children:[h.jsx("div",{className:"mb-6",children:h.jsxs("button",{onClick:g,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center space-x-2",children:[h.jsx(Xt,{className:"h-4 w-4"}),h.jsx("span",{children:"Create Session"})]})}),h.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:h.jsx("ul",{className:"divide-y divide-gray-200",children:t.map(C=>{var E;return h.jsx("li",{className:"px-6 py-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"text-lg font-medium text-gray-900",children:C.name}),h.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-gray-500",children:[h.jsxs("span",{className:"flex items-center",children:[h.jsx($c,{className:"h-4 w-4 mr-1"}),C.type]}),h.jsxs("span",{className:"flex items-center",children:[h.jsx(bu,{className:"h-4 w-4 mr-1"}),((E=C.session_users)==null?void 0:E.length)||0," Counter(s)"]}),h.jsxs("span",{className:"flex items-center",children:[h.jsx(op,{className:"h-4 w-4 mr-1"}),new Date(C.created_date).toLocaleDateString()]}),h.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${C.status==="active"?"bg-green-100 text-green-800":C.status==="completed"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:C.status})]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("button",{onClick:()=>m(C),className:"text-blue-600 hover:text-blue-800 p-2",title:"Manage Users",children:h.jsx(bu,{className:"h-5 w-5"})}),h.jsx("button",{onClick:()=>y(C),className:"text-green-600 hover:text-green-800 p-2",title:"Manage Items",children:h.jsx(Ba,{className:"h-5 w-5"})}),h.jsx("button",{onClick:()=>w(C),className:"text-indigo-600 hover:text-indigo-800 p-2",title:"Edit Session",children:h.jsx(Ta,{className:"h-5 w-5"})}),h.jsx("button",{onClick:()=>A(C),className:"text-green-600 hover:text-green-800 p-2",title:"Export Report",children:h.jsx(u2,{className:"h-5 w-5"})}),h.jsx("button",{onClick:()=>x(C.id),className:"text-red-600 hover:text-red-800 p-2",title:"Delete Session",children:h.jsx(wi,{className:"h-5 w-5"})})]})]})},C.id)})})}),n&&h.jsx(Y2,{session:a,onClose:()=>i(!1),onSave:r}),s&&h.jsx(q2,{session:f,onClose:()=>{l(!1),d(null),r()},onSave:()=>fetchAllData()}),u&&h.jsx(K2,{session:p,onClose:()=>{c(!1),v(null),r()},onSave:r,onDataChange:r})]})}),H2=Ot.memo(({items:t,setItems:e,categories:r,setCategories:n,onDataChange:i})=>{const[a,o]=T.useState(!1),[s,l]=T.useState(null),[u,c]=T.useState(null),[f,d]=T.useState(!1),[p,v]=T.useState(""),[g,w]=T.useState(!1),x=()=>{l(null),o(!0)},m=C=>{l(C),o(!0)},y=async C=>{if(window.confirm("Are you sure you want to delete this item?"))try{const{error:E}=await U.from("items").delete().eq("id",C);if(E)throw E;await i()}catch(E){console.error("Error deleting item:",E)}},_=()=>{const b=`data:text/csv;charset=utf-8,SKU,Item Code,Item Name,Category,UOM,Tags
`+`SAMPLE001,SAMPLE001,Sample Item,Electronics,Pcs,tag1;tag2
`,D=encodeURI(b),R=document.createElement("a");R.setAttribute("href",D),R.setAttribute("download","items_template.csv"),document.body.appendChild(R),R.click(),document.body.removeChild(R)},A=async()=>{if(!u){v("Please select a CSV file");return}d(!0),v("");try{const E=(await u.text()).split(`
`).filter(z=>z.trim()),b=E[0].split(",").map(z=>z.trim().replace(/"/g,""));if(!["SKU","Item Code","Item Name","Category","UOM","Tags"].every(z=>b.includes(z)))throw new Error("CSV must have headers: SKU, Item Code, Item Name, Category, UOM, Tags");const J=E.slice(1),q=[];for(let z=0;z<J.length;z++){const ce=J[z].split(",").map(fe=>fe.trim().replace(/"/g,""));if(ce.length!==6)throw new Error(`Row ${z+2}: Invalid number of columns`);const[P,O,L,X,K,Y]=ce;if(!P||!O||!L||!X||!K)throw new Error(`Row ${z+2}: Required fields missing`);if(!r.some(fe=>fe.name===X))throw new Error(`Row ${z+2}: Category "${X}" does not exist`);q.push({sku:P,item_code:O,item_name:L,category:X,uom:K,tags:Y?Y.split(";").map(fe=>fe.trim()).filter(fe=>fe):[]})}if(q.length===0)throw new Error("No valid items to upload");const{error:ee}=await U.from("items").insert(q);if(ee)throw ee;c(null),w(!1),v(""),await i(),alert(`Successfully uploaded ${q.length} items`)}catch(C){v(C.message)}finally{d(!1)}};return h.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-xl font-semibold",children:"Manage Items"}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsxs("button",{onClick:x,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center space-x-2",children:[h.jsx(Xt,{className:"h-4 w-4"}),h.jsx("span",{children:"Add Item"})]}),h.jsxs("button",{onClick:()=>w(!0),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 flex items-center space-x-2",children:[h.jsx(Xt,{className:"h-4 w-4"}),h.jsx("span",{children:"Bulk Add"})]})]})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[h.jsx("thead",{className:"bg-gray-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"UOM"}),h.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),h.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(C=>h.jsxs("tr",{children:[h.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[h.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.sku}),h.jsx("div",{className:"text-sm text-gray-500",children:C.item_code})]}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.item_name}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C.category}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C.uom}),h.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[h.jsx("button",{onClick:()=>m(C),className:"text-indigo-600 hover:text-indigo-900",children:h.jsx(Ta,{className:"h-5 w-5"})}),h.jsx("button",{onClick:()=>y(C.id),className:"text-red-600 hover:text-red-900",children:h.jsx(wi,{className:"h-5 w-5"})})]})]},C.id))})]})}),g&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md flex flex-col",children:[h.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[h.jsx("h3",{className:"text-xl font-bold",children:"Bulk Upload Items"}),h.jsx("button",{onClick:()=>w(!1),className:"text-gray-500 hover:text-gray-700",children:h.jsx(Pt,{className:"h-6 w-6"})})]}),h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("p",{className:"text-sm text-gray-600",children:"Upload a CSV file with columns: SKU, Item Code, Item Name, Category, UOM, Tags (multiple tags separated by semicolons)"}),h.jsx("button",{onClick:_,className:"text-blue-600 hover:text-blue-800 text-sm underline",children:"Download Template"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CSV File"}),h.jsx("input",{type:"file",accept:".csv",onChange:C=>c(C.target.files[0]),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),p&&h.jsx("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:p})]}),h.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[h.jsx("button",{onClick:()=>{w(!1),c(null),v("")},className:"px-4 py-2 text-gray-600 border rounded-md hover:bg-gray-50",disabled:f,children:"Cancel"}),h.jsxs("button",{onClick:A,disabled:!u||f,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[f?h.jsx("div",{className:"spinner w-4 h-4"}):h.jsx(Xt,{className:"h-4 w-4"}),h.jsx("span",{children:f?"Uploading...":"Upload"})]})]})]})]})}),a&&h.jsx(Z2,{item:s,categories:r,onClose:()=>o(!1),onSave:i})]})}),V2=Ot.memo(({users:t,setUsers:e,onDataChange:r})=>{const[n,i]=T.useState(!1),[a,o]=T.useState(null),s=()=>{o(null),i(!0)},l=c=>{o(c),i(!0)},u=async c=>{if(window.confirm("Are you sure you want to delete this user?"))try{const{error:f}=await U.from("profiles").delete().eq("id",c);if(f)throw f;await r()}catch(f){console.error("Error deleting user:",f)}};return h.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-xl font-semibold",children:"Manage Users"}),h.jsxs("button",{onClick:s,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center space-x-2",children:[h.jsx(Xt,{className:"h-4 w-4"}),h.jsx("span",{children:"Add User"})]})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[h.jsx("thead",{className:"bg-gray-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Username"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),h.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),h.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(c=>h.jsxs("tr",{children:[h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsx("div",{className:"text-sm font-medium text-gray-900",children:c.name})}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.username}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${c.role==="admin"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:c.role})}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${c.status==="active"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:c.status||"inactive"})}),h.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[h.jsx("button",{onClick:()=>l(c),className:"text-indigo-600 hover:text-indigo-900",children:h.jsx(Ta,{className:"h-5 w-5"})}),h.jsx("button",{onClick:()=>u(c.id),className:"text-red-600 hover:text-red-900",children:h.jsx(wi,{className:"h-5 w-5"})})]})]},c.id))})]})}),n&&h.jsx(Q2,{user:a,onClose:()=>i(!1),onSave:r})]})}),W2=Ot.memo(({items:t,categories:e,setCategories:r,locations:n,setLocations:i,onDataChange:a})=>{const[o,s]=T.useState(!1),[l,u]=T.useState(null),[c,f]=T.useState(!1),[d,p]=T.useState(null),v=C=>{const E=t.filter(D=>D.category===C.name).length,b=n.filter(D=>D.category_id===C.id).length;return{isInUse:E>0||b>0,itemCount:E,locationCount:b}},g=async C=>{try{const{error:E}=await U.from("categories").insert([{name:C}]);if(E)throw E;await a()}catch(E){throw console.error("Error creating category:",E),E}},w=C=>{u(C),s(!0)},x=async C=>{try{const E=await Ox(C);if(!E.canDelete){const b=`Cannot delete category "${E.category}" because it is currently in use:

`+(E.itemCount>0?`• Used by ${E.itemCount} item(s)
`:"")+(E.locationCount>0?`• Has ${E.locationCount} location(s)
`:"")+`
Please reassign or remove these dependencies before deleting the category.`;alert(b);return}if(window.confirm(`Are you sure you want to delete the category "${E.category}"?`)){const{error:b}=await U.from("categories").delete().eq("id",C);if(b)throw b;await a()}}catch(E){console.error("Error deleting category:",E),alert("Error deleting category: "+E.message)}},m=async(C,E)=>{try{const{error:b}=await U.from("locations").insert([{name:C,category_id:E}]);if(b)throw b;await a()}catch(b){throw console.error("Error creating location:",b),b}},y=C=>{p(C),f(!0)},_=async C=>{try{const E=await kd(C);if(!E.canModify){const b=`Cannot delete location "${E.location}" because it has count data in ${E.countRecords} record(s) across ${E.sessions.length} session(s).

This location will be hidden instead to preserve data integrity.`;window.confirm(b+`

Do you want to hide this location?`)&&await Dd(C,user.id)&&(await a(),alert("Location has been hidden successfully."));return}if(window.confirm(`Are you sure you want to delete the location "${E.location}"? This action cannot be undone.`)){const{error:b}=await U.from("locations").delete().eq("id",C);if(b)throw b;await a()}}catch(E){console.error("Error managing location:",E),alert("Error managing location: "+E.message)}},A=async C=>{try{const E=await kd(C);if(E.isActive){const b=`This will hide the location "${E.location}" from future use while preserving existing count data.

Count records: ${E.countRecords}
Sessions affected: ${E.sessions.length}

Do you want to proceed?`;window.confirm(b)&&await Dd(C,user.id)&&(await a(),alert("Location has been hidden successfully."))}else window.confirm(`Do you want to reactivate the location "${E.location}"?`)&&await kx(C)&&(await a(),alert("Location has been reactivated successfully."))}catch(E){console.error("Error toggling location visibility:",E),alert("Error toggling location visibility: "+E.message)}};return h.jsxs("div",{children:[h.jsx(G2,{onSubmit:g}),h.jsx(X2,{categories:e,onSubmit:m}),h.jsx("div",{className:"grid gap-6 md:grid-cols-2 mt-6",children:e.map(C=>{const E=v(C);return h.jsxs("div",{className:`bg-white p-4 rounded-lg shadow ${E.isInUse?"border-l-4 border-orange-500":""}`,children:[h.jsxs("div",{className:"flex justify-between items-center border-b pb-2 mb-3",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-gray-800",children:C.name}),E.isInUse&&h.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[E.itemCount>0&&h.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:[E.itemCount," item(s)"]}),E.locationCount>0&&h.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:[E.locationCount," location(s)"]})]})]}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx("button",{onClick:()=>w(C),className:`hover:text-blue-700 ${E.isInUse?"text-gray-400 cursor-not-allowed":"text-blue-500"}`,title:E.isInUse?"Cannot edit category that is in use":"Edit Category",disabled:E.isInUse,children:h.jsx(Ta,{className:"h-4 w-4"})}),h.jsx("button",{onClick:()=>x(C.id),className:`hover:text-red-700 ${E.isInUse?"text-gray-400 cursor-not-allowed":"text-red-500"}`,title:E.isInUse?"Cannot delete category that is in use":"Delete Category",disabled:E.isInUse,children:h.jsx(wi,{className:"h-4 w-4"})})]})]}),h.jsxs("ul",{className:"space-y-2",children:[n.filter(b=>b.category_id===C.id).map(b=>{const D=b.count_records>0;return h.jsxs("li",{className:`flex justify-between items-center p-2 rounded ${b.is_active?"bg-gray-50":"bg-red-50 opacity-60"}`,children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("span",{className:`text-gray-700 ${b.is_active?"":"line-through"}`,children:[b.name,!b.is_active&&h.jsx("span",{className:"text-xs text-red-600 ml-2",children:"(Hidden)"})]}),D&&h.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[h.jsxs("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded",children:[b.count_records," count(s)"]}),h.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:[b.sessions_with_counts," session(s)"]})]})]}),h.jsx("div",{className:"flex space-x-2",children:D?h.jsx("button",{onClick:()=>A(b.id),className:`p-1 rounded ${b.is_active?"text-orange-500 hover:text-orange-700":"text-green-500 hover:text-green-700"}`,title:b.is_active?"Hide Location":"Show Location",children:b.is_active?h.jsx(Pt,{className:"h-4 w-4"}):h.jsx(Ss,{className:"h-4 w-4"})}):h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>y(b),className:"text-blue-500 hover:text-blue-700",title:"Edit Location",children:h.jsx(Ta,{className:"h-4 w-4"})}),h.jsx("button",{onClick:()=>_(b.id),className:"text-red-500 hover:text-red-700",title:"Delete Location",children:h.jsx(wi,{className:"h-4 w-4"})})]})})]},b.id)}),n.filter(b=>b.category_id===C.id).length===0&&h.jsx("p",{className:"text-gray-500 text-sm",children:"No locations defined."})]})]},C.id)})}),o&&h.jsx(J2,{category:l,onClose:()=>{s(!1),u(null)},onSave:()=>{a(),s(!1),u(null)}}),c&&h.jsx(ew,{location:d,categories:e,onClose:()=>{f(!1),p(null)},onSave:()=>{a(),f(!1),p(null)}})]})}),G2=({onSubmit:t})=>{const[e,r]=T.useState(""),n=i=>{i.preventDefault(),t(e),r("")};return h.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[h.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Add New Category"}),h.jsxs("form",{onSubmit:n,className:"flex gap-3",children:[h.jsx("input",{type:"text",value:e,onChange:i=>r(i.target.value),placeholder:"New category name",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md",required:!0}),h.jsxs("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center justify-center space-x-2",children:[h.jsx(Xt,{className:"h-4 w-4"}),h.jsx("span",{children:"Add Category"})]})]})]})},X2=({categories:t,onSubmit:e})=>{const[r,n]=T.useState(""),[i,a]=T.useState(""),o=s=>{s.preventDefault(),e(r,i),n(""),a("")};return h.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[h.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Add New Location"}),h.jsxs("form",{onSubmit:o,className:"flex flex-col sm:flex-row gap-3",children:[h.jsxs("select",{value:i,onChange:s=>a(s.target.value),className:"w-full sm:w-1/3 px-3 py-2 border border-gray-300 rounded-md",required:!0,children:[h.jsx("option",{value:"",children:"Select Category"}),t.map(s=>h.jsx("option",{value:s.id,children:s.name},s.id))]}),h.jsx("input",{type:"text",value:r,onChange:s=>n(s.target.value),placeholder:"New location name",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md",required:!0}),h.jsxs("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center justify-center space-x-2",children:[h.jsx(Xt,{className:"h-4 w-4"}),h.jsx("span",{children:"Add Location"})]})]})]})},q2=Ot.memo(({session:t,onClose:e,onSave:r})=>{const[n,i]=T.useState([]),[a,o]=T.useState([]),[s,l]=T.useState(!0),[u,c]=T.useState(!1);T.useEffect(()=>{t&&f()},[t]);const f=async()=>{try{l(!0);const{data:v,error:g}=await U.from("profiles").select("id, name, username").order("name");if(g)throw g;const{data:w,error:x}=await U.from("session_users").select("user_id").eq("session_id",t.id);if(x)throw x;const m=new Set(w.map(A=>A.user_id)),y=v.filter(A=>!m.has(A.id)),_=v.filter(A=>m.has(A.id));i(y),o(_)}catch(v){console.error("Error fetching users:",v)}finally{l(!1)}},d=async v=>{try{c(!0);const{error:g}=await U.from("session_users").insert([{session_id:t.id,user_id:v}]);if(g)throw g;const w=n.find(x=>x.id===v);w&&(i(x=>x.filter(m=>m.id!==v)),o(x=>[...x,w].sort((m,y)=>m.name.localeCompare(y.name))))}catch(g){console.error("Error assigning user:",g)}finally{c(!1)}},p=async v=>{try{c(!0);const{error:g}=await U.from("session_users").delete().eq("session_id",t.id).eq("user_id",v);if(g)throw g;const w=a.find(x=>x.id===v);w&&(o(x=>x.filter(m=>m.id!==v)),i(x=>[...x,w].sort((m,y)=>m.name.localeCompare(y.name))))}catch(g){console.error("Error unassigning user:",g)}finally{c(!1)}};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[h.jsxs("h3",{className:"text-xl font-bold",children:["Manage Users for Session: ",t==null?void 0:t.name]}),h.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:h.jsx(Pt,{className:"h-6 w-6"})})]}),h.jsx("div",{className:"p-6 flex-1 overflow-y-auto",children:s?h.jsx("div",{className:"flex items-center justify-center py-8",children:h.jsx("div",{className:"spinner"})}):h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Available Users"}),h.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:n.length===0?h.jsx("p",{className:"text-gray-500 text-sm",children:"No available users"}):n.map(v=>h.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[h.jsxs("div",{children:[h.jsx("p",{className:"font-medium text-gray-900",children:v.name}),h.jsxs("p",{className:"text-sm text-gray-500",children:["@",v.username]})]}),h.jsx("button",{onClick:()=>d(v.id),disabled:u,className:"text-blue-600 hover:text-blue-800 disabled:opacity-50",title:"Assign User",children:h.jsx(M2,{className:"h-5 w-5"})})]},v.id))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"text-lg font-semibold mb-4 text-gray-700",children:["Assigned Users (",a.length,")"]}),h.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:a.length===0?h.jsx("p",{className:"text-gray-500 text-sm",children:"No users assigned"}):a.map(v=>h.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[h.jsxs("div",{children:[h.jsx("p",{className:"font-medium text-gray-900",children:v.name}),h.jsxs("p",{className:"text-sm text-gray-500",children:["@",v.username]})]}),h.jsx("button",{onClick:()=>p(v.id),disabled:u,className:"text-red-600 hover:text-red-800 disabled:opacity-50",title:"Unassign User",children:h.jsx(R2,{className:"h-5 w-5"})})]},v.id))})]})]})}),h.jsx("div",{className:"p-4 border-t flex justify-end",children:h.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})})}),K2=Ot.memo(({session:t,onClose:e,onSave:r,onDataChange:n})=>{const[i,a]=T.useState([]),[o,s]=T.useState([]),[l,u]=T.useState(!0),[c,f]=T.useState(""),[d,p]=T.useState(!1);T.useEffect(()=>{t&&v()},[t]);const v=async()=>{try{u(!0);const{data:y,error:_}=await U.from("items").select("id, sku, item_code, item_name, category, tags").order("item_name");if(_)throw _;const{data:A,error:C}=await U.from("session_items").select("item_id").eq("session_id",t.id);if(C)throw C;const E=new Set(A.map(R=>R.item_id)),b=y.filter(R=>!E.has(R.id)),D=y.filter(R=>E.has(R.id));a(b),s(D)}catch(y){console.error("Error fetching items:",y)}finally{u(!1)}},g=async y=>{try{p(!0);const{error:_}=await U.from("session_items").insert([{session_id:t.id,item_id:y}]);if(_)throw _;const A=i.find(C=>C.id===y);A&&(a(C=>C.filter(E=>E.id!==y)),s(C=>[...C,A]))}catch(_){console.error("Error selecting item:",_)}finally{p(!1)}},w=async y=>{try{p(!0);const{error:_}=await U.from("session_items").delete().eq("session_id",t.id).eq("item_id",y);if(_)throw _;const A=o.find(C=>C.id===y);A&&(s(C=>C.filter(E=>E.id!==y)),a(C=>[...C,A].sort((E,b)=>E.item_name.localeCompare(b.item_name))))}catch(_){console.error("Error deselecting item:",_)}finally{p(!1)}},x=async()=>{if(m.length!==0)try{p(!0);const y=m.map(C=>({session_id:t.id,item_id:C.id})),{error:_}=await U.from("session_items").insert(y);if(_)throw _;const A=m;s(C=>[...C,...A].sort((E,b)=>E.item_name.localeCompare(b.item_name))),a(C=>C.filter(E=>!A.some(b=>b.id===E.id))),f("")}catch(y){console.error("Error adding all filtered items:",y)}finally{p(!1)}},m=i.filter(y=>{var _,A;return y.item_name.toLowerCase().includes(c.toLowerCase())||y.sku.toLowerCase().includes(c.toLowerCase())||((_=y.item_code)==null?void 0:_.toLowerCase().includes(c.toLowerCase()))||((A=y.category)==null?void 0:A.toLowerCase().includes(c.toLowerCase()))||y.tags&&y.tags.some(C=>C.toLowerCase().includes(c.toLowerCase()))});return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[h.jsxs("h3",{className:"text-xl font-bold",children:["Manage Items for Session: ",t==null?void 0:t.name]}),h.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:h.jsx(Pt,{className:"h-6 w-6"})})]}),h.jsx("div",{className:"p-6 flex-1 overflow-y-auto",children:l?h.jsx("div",{className:"flex items-center justify-center py-8",children:h.jsx("div",{className:"spinner"})}):h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Available Items"}),h.jsxs("div",{className:"mb-4 flex gap-2",children:[h.jsx("input",{type:"text",placeholder:"Search items...",value:c,onChange:y=>f(y.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),h.jsxs("button",{onClick:x,disabled:d||m.length===0,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[h.jsx(Xt,{className:"h-4 w-4"}),h.jsxs("span",{children:["Add All (",m.length,")"]})]})]}),h.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:m.length===0?h.jsx("p",{className:"text-gray-500 text-sm",children:c?"No items match your search":"No available items"}):m.map(y=>h.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[h.jsxs("div",{children:[h.jsx("p",{className:"font-medium text-gray-900",children:y.item_name}),h.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",y.sku," | Code: ",y.item_code," | Category: ",y.category,y.tags&&y.tags.length>0&&` | Tags: ${y.tags.join(", ")}`]})]}),h.jsx("button",{onClick:()=>g(y.id),disabled:d,className:"text-green-600 hover:text-green-800 disabled:opacity-50",title:"Select Item",children:h.jsx(Xt,{className:"h-5 w-5"})})]},y.id))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"text-lg font-semibold mb-4 text-gray-700",children:["Selected Items (",o.length,")"]}),h.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:o.length===0?h.jsx("p",{className:"text-gray-500 text-sm",children:"No items selected"}):o.map(y=>h.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[h.jsxs("div",{children:[h.jsx("p",{className:"font-medium text-gray-900",children:y.item_name}),h.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",y.sku," | Code: ",y.item_code," | Category: ",y.category,y.tags&&y.tags.length>0&&` | Tags: ${y.tags.join(", ")}`]})]}),h.jsx("button",{onClick:()=>w(y.id),disabled:d,className:"text-red-600 hover:text-red-800 disabled:opacity-50",title:"Deselect Item",children:h.jsx(wi,{className:"h-5 w-5"})})]},y.id))})]})]})}),h.jsx("div",{className:"p-4 border-t flex justify-end",children:h.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})})}),Y2=Ot.memo(({session:t,onClose:e,onSave:r})=>{const{user:n}=Ii(),[i,a]=T.useState({name:(t==null?void 0:t.name)||"",status:(t==null?void 0:t.status)||"draft"}),[o,s]=T.useState(!1),[l,u]=T.useState(""),c=async d=>{d.preventDefault(),s(!0),u("");try{const p={name:i.name,status:i.status};if(t){const{error:v}=await U.from("sessions").update(p).eq("id",t.id);if(v)throw v}else{const{error:v}=await U.from("sessions").insert([{...p,type:"inventory",created_by:n.id}]);if(v)throw v}r(),e()}catch(p){console.error("Error saving session:",p),u(p.message||"Failed to save session")}finally{s(!1)}},f=d=>{const{name:p,value:v}=d.target;a(g=>({...g,[p]:v}))};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md flex flex-col",children:[h.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[h.jsx("h3",{className:"text-xl font-bold",children:t?"Edit Session":"Create New Session"}),h.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:h.jsx(Pt,{className:"h-6 w-6"})})]}),h.jsxs("div",{className:"p-6",children:[l&&h.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:l}),h.jsxs("form",{onSubmit:c,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Name *"}),h.jsx("input",{type:"text",name:"name",value:i.name,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),h.jsxs("select",{name:"status",value:i.status,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[h.jsx("option",{value:"draft",children:"Draft"}),h.jsx("option",{value:"active",children:"Active"}),h.jsx("option",{value:"completed",children:"Completed"}),h.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),h.jsx("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded",children:h.jsxs("p",{children:[h.jsx("strong",{children:"Note:"})," User assignments and item selections for this session are managed separately after creation."]})}),h.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[h.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 border rounded-md hover:bg-gray-50",disabled:o,children:"Cancel"}),h.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",disabled:o,children:o?"Saving...":"Save"})]})]})]})]})})}),Z2=Ot.memo(({item:t,categories:e,onClose:r,onSave:n})=>{var p;const{user:i}=Ii(),[a,o]=T.useState({sku:(t==null?void 0:t.sku)||"",item_code:(t==null?void 0:t.item_code)||"",item_name:(t==null?void 0:t.item_name)||"",category:(t==null?void 0:t.category)||"",uom:(t==null?void 0:t.uom)||"",tags:((p=t==null?void 0:t.tags)==null?void 0:p.join(", "))||""}),[s,l]=T.useState(!1),[u,c]=T.useState(""),f=async v=>{v.preventDefault(),l(!0),c("");try{const g={sku:a.sku,item_code:a.item_code,item_name:a.item_name,category:a.category,uom:a.uom,tags:a.tags.split(",").map(w=>w.trim()).filter(w=>w)};if(t){const{error:w}=await U.from("items").update(g).eq("id",t.id);if(w)throw w}else{const{error:w}=await U.from("items").insert([{...g,created_by:i.id}]);if(w)throw w}n(),r()}catch(g){console.error("Error saving item:",g),c(g.message||"Failed to save item")}finally{l(!1)}},d=v=>{const{name:g,value:w}=v.target;o(x=>({...x,[g]:w}))};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white p-6 rounded-lg w-full max-w-md",children:[h.jsx("h3",{className:"text-lg font-bold mb-4",children:t?"Edit Item":"Add New Item"}),u&&h.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:u}),h.jsxs("form",{onSubmit:f,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU *"}),h.jsx("input",{type:"text",name:"sku",value:a.sku,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Code *"}),h.jsx("input",{type:"text",name:"item_code",value:a.item_code,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Name *"}),h.jsx("input",{type:"text",name:"item_name",value:a.item_name,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),h.jsxs("select",{name:"category",value:a.category,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[h.jsx("option",{value:"",children:"Select Category"}),e.map(v=>h.jsx("option",{value:v.name,children:v.name},v.id))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"UOM *"}),h.jsx("input",{type:"text",name:"uom",value:a.uom,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags (comma-separated)"}),h.jsx("input",{type:"text",name:"tags",value:a.tags,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"tag1, tag2, tag3"})]}),h.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[h.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 border rounded-md hover:bg-gray-50",disabled:s,children:"Cancel"}),h.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",disabled:s,children:s?"Saving...":"Save"})]})]})]})})}),Q2=Ot.memo(({user:t,onClose:e,onSave:r})=>{const[n,i]=T.useState({name:(t==null?void 0:t.name)||"",username:(t==null?void 0:t.username)||"",role:(t==null?void 0:t.role)||"user",status:(t==null?void 0:t.status)||"inactive"}),[a,o]=T.useState(!1),[s,l]=T.useState(""),u=async f=>{f.preventDefault(),o(!0),l("");try{const{error:d}=await U.from("profiles").update({name:n.name,username:n.username,role:n.role,status:n.status}).eq("id",t.id);if(d)throw d;r(),e()}catch(d){console.error("Error updating user:",d),l(d.message||"Failed to update user")}finally{o(!1)}},c=f=>{const{name:d,value:p}=f.target;i(v=>({...v,[d]:p}))};return t?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white p-6 rounded-lg w-full max-w-md",children:[h.jsx("h3",{className:"text-lg font-bold mb-4",children:"Edit User"}),s&&h.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:s}),h.jsxs("form",{onSubmit:u,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),h.jsx("input",{type:"text",name:"name",value:n.name,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username *"}),h.jsx("input",{type:"text",name:"username",value:n.username,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),h.jsxs("select",{name:"role",value:n.role,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[h.jsx("option",{value:"user",children:"User"}),h.jsx("option",{value:"admin",children:"Admin"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),h.jsxs("select",{name:"status",value:n.status,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[h.jsx("option",{value:"inactive",children:"Inactive"}),h.jsx("option",{value:"active",children:"Active"})]})]}),h.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[h.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 border rounded-md hover:bg-gray-50",disabled:a,children:"Cancel"}),h.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",disabled:a,children:a?"Saving...":"Save"})]})]})]})}):h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white p-6 rounded-lg w-full max-w-md",children:[h.jsx("h3",{className:"text-lg font-bold mb-4",children:"Add New User"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"User creation is handled through the signup process. Only existing users can be edited."}),h.jsx("div",{className:"flex justify-end",children:h.jsx("button",{onClick:e,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"OK"})})]})})}),J2=Ot.memo(({category:t,onClose:e,onSave:r})=>{const[n,i]=T.useState({name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||""}),[a,o]=T.useState(!1),[s,l]=T.useState(""),u=async f=>{f.preventDefault(),o(!0),l("");try{if(t){const{error:d}=await U.from("categories").update(n).eq("id",t.id);if(d)throw d}else throw new Error("Create not implemented here");r(),e()}catch(d){console.error("Error saving category:",d),l(d.message||"Failed to save category")}finally{o(!1)}},c=f=>{const{name:d,value:p}=f.target;i(v=>({...v,[d]:p}))};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white p-6 rounded-lg w-full max-w-md",children:[h.jsx("h3",{className:"text-lg font-bold mb-4",children:"Edit Category"}),s&&h.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:s}),h.jsxs("form",{onSubmit:u,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),h.jsx("input",{type:"text",name:"name",value:n.name,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),h.jsx("textarea",{name:"description",value:n.description,onChange:c,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),h.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[h.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 border rounded-md hover:bg-gray-50",disabled:a,children:"Cancel"}),h.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",disabled:a,children:a?"Saving...":"Save"})]})]})]})})}),ew=Ot.memo(({location:t,categories:e,onClose:r,onSave:n})=>{const[i,a]=T.useState({name:(t==null?void 0:t.name)||"",category_id:(t==null?void 0:t.category_id)||""}),[o,s]=T.useState(!1),[l,u]=T.useState(""),c=async d=>{d.preventDefault(),s(!0),u("");try{if(t){const{error:p}=await U.from("locations").update(i).eq("id",t.id);if(p)throw p}else throw new Error("Create not implemented here");n(),r()}catch(p){console.error("Error saving location:",p),u(p.message||"Failed to save location")}finally{s(!1)}},f=d=>{const{name:p,value:v}=d.target;a(g=>({...g,[p]:v}))};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white p-6 rounded-lg w-full max-w-md",children:[h.jsx("h3",{className:"text-lg font-bold mb-4",children:"Edit Location"}),l&&h.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:l}),h.jsxs("form",{onSubmit:c,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),h.jsx("input",{type:"text",name:"name",value:i.name,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),h.jsxs("select",{name:"category_id",value:i.category_id,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[h.jsx("option",{value:"",children:"Select Category"}),e.map(d=>h.jsx("option",{value:d.id,children:d.name},d.id))]})]}),h.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[h.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 border rounded-md hover:bg-gray-50",disabled:o,children:"Cancel"}),h.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",disabled:o,children:o?"Saving...":"Save"})]})]})]})})}),Md=Ot.memo($2),jd=({onSessionSelect:t})=>{var f,d;const{user:e,signOut:r}=Ii(),[n,i]=T.useState([]),[a,o]=T.useState(!0),[s,l]=T.useState("");T.useEffect(()=>{e&&u()},[e]);const u=async()=>{try{o(!0),l("");const{data:p,error:v}=await U.from("profiles").select("id, role").eq("id",e.id).single();if(v)throw v;let g=U.from("sessions").select(`
          *,
          session_users (
            user_id
          )
        `).neq("status","completed");p.role!=="admin"&&(g=g.eq("session_users.user_id",e.id));const{data:w,error:x}=await g.order("created_date",{ascending:!1});if(x)throw x;i(w||[])}catch(p){console.error("Error fetching sessions:",p),l("Failed to load sessions")}finally{o(!1)}},c=async()=>{try{await r()}catch(p){console.error("Sign out error:",p)}};return a?h.jsxs("div",{className:"min-h-screen bg-gray-100",children:[h.jsx("div",{className:"bg-white shadow-sm",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex justify-between items-center py-4",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Select Session"}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("span",{className:"text-gray-600 hidden sm:block",children:["Welcome, ",((f=e==null?void 0:e.user_metadata)==null?void 0:f.name)||(e==null?void 0:e.email)]}),h.jsx("button",{onClick:c,className:"text-red-600 hover:text-red-800",title:"Logout",children:h.jsx(Cu,{className:"h-5 w-5"})})]})]})})}),h.jsx("div",{className:"flex items-center justify-center py-8",children:h.jsx("div",{className:"spinner"})})]}):h.jsxs("div",{className:"min-h-screen bg-gray-100",children:[h.jsx("div",{className:"bg-white shadow-sm",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex justify-between items-center py-4",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Select Session"}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("span",{className:"text-gray-600 hidden sm:block",children:["Welcome, ",((d=e==null?void 0:e.user_metadata)==null?void 0:d.name)||(e==null?void 0:e.email)]}),h.jsx("button",{onClick:c,className:"text-red-600 hover:text-red-800",title:"Logout",children:h.jsx(Cu,{className:"h-5 w-5"})})]})]})})}),h.jsxs("main",{className:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8",children:[s&&h.jsx("div",{className:"mb-6 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:s}),h.jsx("div",{className:"grid gap-4",children:n.length===0?h.jsxs("div",{className:"text-center py-8",children:[h.jsx($c,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),h.jsx("p",{className:"text-gray-500",children:s||"No active sessions available."})]}):n.map(p=>h.jsx("div",{onClick:()=>t(p),className:"bg-white p-6 rounded-lg shadow hover:shadow-md cursor-pointer transition-shadow",children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:p.name}),h.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-gray-500",children:[h.jsxs("span",{className:"flex items-center",children:[h.jsx(op,{className:"h-4 w-4 mr-1"}),p.type]}),h.jsxs("span",{className:"flex items-center",children:[h.jsx(E2,{className:"h-4 w-4 mr-1"}),"Items to count"]}),h.jsxs("span",{className:"flex items-center",children:[h.jsx(n2,{className:"h-4 w-4 mr-1"}),"Created: ",new Date(p.created_date).toLocaleDateString()]})]})]}),h.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${p.status==="active"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:p.status})]})},p.id))})]})]})},Iu=()=>{const t=navigator.userAgent.toLowerCase(),r=["mobile","android","iphone","ipad","ipod","blackberry","windows phone","opera mini","iemobile"].some(a=>t.includes(a)),n="ontouchstart"in window||navigator.maxTouchPoints>0,i=window.innerWidth<=768;return n&&(i||r)},Ld=()=>!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources),tw=()=>{if(!window.screen||!window.screen.orientation)return window.innerHeight>window.innerWidth?"portrait":"landscape";const t=window.screen.orientation.type;return t.includes("portrait")?"portrait":t.includes("landscape")?"landscape":"unknown"},Bd=({value:t,onChange:e})=>{const r=o=>{e(o==="clear"?"":o==="backspace"?t.slice(0,-1):t+o)},n=[["7","8","9","backspace"],["4","5","6","+"],["1","2","3","-"],["0",".","*","/"],["clear"]],i=o=>{switch(o){case"backspace":return h.jsx(a2,{className:"h-4 w-4"});case"+":return h.jsx(Xt,{className:"h-4 w-4"});case"-":return h.jsx(w2,{className:"h-4 w-4"});case"*":return h.jsx(Pt,{className:"h-4 w-4"});case"/":return h.jsx(s2,{className:"h-4 w-4"});default:return o}},a=o=>{const s="p-3 m-1 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500";return o==="clear"?`${s} bg-red-500 text-white hover:bg-red-600 col-span-4 font-bold text-base`:["+","-","*","/"].includes(o)?`${s} bg-blue-500 text-white hover:bg-blue-600 font-bold text-xl`:o==="backspace"?`${s} bg-orange-500 text-white hover:bg-orange-600 font-bold text-lg`:`${s} bg-gray-200 text-gray-800 hover:bg-gray-300 font-bold text-lg`};return h.jsx("div",{className:"p-1",children:h.jsx("div",{className:"grid grid-cols-4 gap-1",children:n.map((o,s)=>h.jsx(Ot.Fragment,{children:o.map((l,u)=>h.jsx("button",{onClick:()=>r(l),className:a(l),title:l==="backspace"?"Backspace":l==="clear"?"Clear":l,children:i(l)},u))},s))})})};function rw(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function nw(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var iw=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),aw=function(t){iw(e,t);function e(r,n){var i=this.constructor,a=t.call(this,r,n)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),rw(a,i.prototype),nw(a),a}return e}(Error),ow=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kt=function(t){ow(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(aw),sw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tr=function(t){sw(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(kt),lw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q=function(t){lw(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(kt),uw=function(){function t(e){if(this.binarizer=e,e===null)throw new Q("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,i){var a=this.binarizer.getLuminanceSource().crop(e,r,n,i);return new t(this.binarizer.createBinarizer(a))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),cw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Je=function(t){cw(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(kt),fw=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),be=function(){function t(){}return t.arraycopy=function(e,r,n,i,a){for(;a--;)n[i++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),dw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zc=function(t){dw(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(kt),hw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fd=function(t){hw(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var i=t.call(this,n)||this;return i.index=r,i.message=n,i}return e.kind="ArrayIndexOutOfBoundsException",e}(zc),pw=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ge=function(){function t(){}return t.fill=function(e,r){for(var n=0,i=e.length;n<i;n++)e[n]=r},t.fillWithin=function(e,r,n,i){t.rangeCheck(e.length,r,n);for(var a=r;a<n;a++)e[a]=i},t.rangeCheck=function(e,r,n){if(r>n)throw new Q("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new Fd(r);if(n>e)throw new Fd(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var i=1;try{for(var a=pw(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=31*i+s}}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var i=n-r,a=new Int32Array(i);return be.arraycopy(e,r,a,0,i),a},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var i=0,a=e.length-1;i<=a;){var o=a+i>>1,s=n(r,e[o]);if(s>0)i=o+1;else if(s<0)a=o-1;else return o}return-i-1},t.numberComparator=function(e,r){return e-r},t}(),ae=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),et=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);be.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),a=n[i];a&=~((1<<(e&31))-1);for(var o=n.length;a===0;){if(++i===o)return r;a=n[i]}var s=i*32+ae.numberOfTrailingZeros(a);return s>r?r:s},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),a=~n[i];a&=~((1<<(e&31))-1);for(var o=n.length;a===0;){if(++i===o)return r;a=~n[i]}var s=i*32+ae.numberOfTrailingZeros(a);return s>r?r:s},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new Q;if(r!==e){r--;for(var n=Math.floor(e/32),i=Math.floor(r/32),a=this.bits,o=n;o<=i;o++){var s=o>n?0:e&31,l=o<i?31:r&31,u=(2<<l)-(1<<s);a[o]|=u}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new Q;if(r===e)return!0;r--;for(var i=Math.floor(e/32),a=Math.floor(r/32),o=this.bits,s=i;s<=a;s++){var l=s>i?0:e&31,u=s<a?31:r&31,c=(2<<u)-(1<<l)&4294967295;if((o[s]&c)!==(n?c:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new Q("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new Q("Sizes don't match");for(var r=this.bits,n=0,i=r.length;n<i;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,i){for(var a=0;a<i;a++){for(var o=0,s=0;s<8;s++)this.get(e)&&(o|=1<<7-s),e++;r[n+a]=o}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,i=this.bits,a=0;a<n;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[r-a]=o}if(this.size!==n*32){for(var s=n*32-this.size,l=e[0]>>>s,a=1;a<n;a++){var u=e[a];l|=u<<32-s,e[a-1]=l,l=u>>>s}e[n-1]=l}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&Ge.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+Ge.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),Nu;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Nu||(Nu={}));const ke=Nu;var vw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),B=function(t){vw(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(kt),gw=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xe;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(xe||(xe={}));var We=function(){function t(e,r,n){for(var i,a,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=o,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var l=this.values,u=0,c=l.length;u!==c;u++){var f=l[u];t.VALUES_TO_ECI.set(f,this)}try{for(var d=gw(o),p=d.next();!p.done;p=d.next()){var v=p.value;t.NAME_TO_ECI.set(v,this)}}catch(g){i={error:g}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new B("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new B("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new B("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(xe.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(xe.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(xe.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(xe.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(xe.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(xe.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(xe.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(xe.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(xe.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(xe.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(xe.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(xe.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(xe.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(xe.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(xe.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(xe.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(xe.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(xe.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(xe.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(xe.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(xe.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(xe.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(xe.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(xe.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(xe.Big5,28,"Big5"),t.GB18030=new t(xe.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(xe.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),mw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bo=function(t){mw(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(kt),qt=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof We?e:We.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var i="",a=0,o=e.length;a<o;a++){var s=e[a].toString(16);s.length<2&&(s="0"+s),i+="%"+s}return decodeURIComponent(i)}if(n.equals(We.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new bo("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(We.UTF8)||e.equals(We.ISO8859_1)||e.equals(We.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),i=[],a=0;a<n.length;a++)i.push(n[a].charCodeAt(0));return new Uint8Array(i)},t}(),ue=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return qt.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(ke.CHARACTER_SET)!==void 0)return r.get(ke.CHARACTER_SET).toString();for(var n=e.length,i=!0,a=!0,o=!0,s=0,l=0,u=0,c=0,f=0,d=0,p=0,v=0,g=0,w=0,x=0,m=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,y=0;y<n&&(i||a||o);y++){var _=e[y]&255;o&&(s>0?_&128?s--:o=!1:_&128&&(_&64?(s++,_&32?(s++,_&16?(s++,_&8?o=!1:c++):u++):l++):o=!1)),i&&(_>127&&_<160?i=!1:_>159&&(_<192||_===215||_===247)&&x++),a&&(f>0?_<64||_===127||_>252?a=!1:f--:_===128||_===160||_>239?a=!1:_>160&&_<224?(d++,v=0,p++,p>g&&(g=p)):_>127?(f++,p=0,v++,v>w&&(w=v)):(p=0,v=0))}return o&&s>0&&(o=!1),a&&f>0&&(a=!1),o&&(m||l+u+c>0)?t.UTF8:a&&(t.ASSUME_SHIFT_JIS||g>=3||w>=3)?t.SHIFT_JIS:i&&a?g===2&&d===2||x*10>=n?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:a?t.SHIFT_JIS:o?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=-1;function a(s,l,u,c,f,d){if(s==="%%")return"%";if(r[++i]!==void 0){s=c?parseInt(c.substr(1)):void 0;var p=f?parseInt(f.substr(1)):void 0,v;switch(d){case"s":v=r[i];break;case"c":v=r[i][0];break;case"f":v=parseFloat(r[i]).toFixed(s);break;case"p":v=parseFloat(r[i]).toPrecision(s);break;case"e":v=parseFloat(r[i]).toExponential(s);break;case"x":v=parseInt(r[i]).toString(p||16);break;case"d":v=parseFloat(parseInt(r[i],p||10).toPrecision(s)).toFixed(0);break}v=typeof v=="object"?JSON.stringify(v):(+v).toString(p);for(var g=parseInt(u),w=u&&u[0]+""=="0"?"0":" ";v.length<g;)v=l!==void 0?v+w:w+v;return v}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,a)},t.getBytes=function(e,r){return qt.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=We.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=We.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=We.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),ne=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ue.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var i=r;r<r+n;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),_r=function(){function t(e,r,n,i){if(this.width=e,this.height=r,this.rowSize=n,this.bits=i,r==null&&(r=e),this.height=r,e<1||r<1)throw new Q("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,i=new t(n,r),a=0;a<r;a++)for(var o=e[a],s=0;s<n;s++)o[s]&&i.set(s,a);return i},t.parseFromString=function(e,r,n){if(e===null)throw new Q("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,o=0,s=-1,l=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new Q("row lengths do not match");o=a,l++}u++}else if(e.substring(u,u+r.length)===r)u+=r.length,i[a]=!0,a++;else if(e.substring(u,u+n.length)===n)u+=n.length,i[a]=!1,a++;else throw new Q("illegal character encountered: "+e.substring(u));if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new Q("row lengths do not match");l++}for(var c=new t(s,l),f=0;f<a;f++)i[f]&&c.set(Math.floor(f%s),Math.floor(f/s));return c},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Q("input matrix dimensions do not match");for(var r=new et(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var s=a*n,l=e.getRow(a,r).getBitArray(),u=0;u<n;u++)i[s+u]^=l[u]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,i){if(r<0||e<0)throw new Q("Left and top must be nonnegative");if(i<1||n<1)throw new Q("Height and width must be at least 1");var a=e+n,o=r+i;if(o>this.height||a>this.width)throw new Q("The region must fit inside the matrix");for(var s=this.rowSize,l=this.bits,u=r;u<o;u++)for(var c=u*s,f=e;f<a;f++)l[c+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new et(this.width):r.clear();for(var n=this.rowSize,i=this.bits,a=e*n,o=0;o<n;o++)r.setBulk(o*32,i[a+o]);return r},t.prototype.setRow=function(e,r){be.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new et(e),i=new et(e),a=0,o=Math.floor((r+1)/2);a<o;a++)n=this.getRow(a,n),i=this.getRow(r-1-a,i),n.reverse(),i.reverse(),this.setRow(a,i),this.setRow(r-1-a,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,i=this.bits,a=e,o=r,s=-1,l=-1,u=0;u<r;u++)for(var c=0;c<n;c++){var f=i[u*n+c];if(f!==0){if(u<o&&(o=u),u>l&&(l=u),c*32<a){for(var d=0;!(f<<31-d&4294967295);)d++;c*32+d<a&&(a=c*32+d)}if(c*32+31>s){for(var d=31;!(f>>>d);)d--;c*32+d>s&&(s=c*32+d)}}}return s<a||l<o?null:Int32Array.from([a,o,s-a+1,l-o+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var i=n/e,a=n%e*32,o=r[n],s=0;!(o<<31-s&4294967295);)s++;return a+=s,Int32Array.from([a,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var i=Math.floor(n/e),a=Math.floor(n%e)*32,o=r[n],s=31;!(o>>>s);)s--;return a+=s,Int32Array.from([a,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&Ge.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Ge.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var i=new ne,a=0,o=this.height;a<o;a++){for(var s=0,l=this.width;s<l;s++)i.append(this.get(s,a)?e:r);i.append(n)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),yw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),k=function(t){yw(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(kt),xw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ww=function(t){xw(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var i=this.getLuminanceSource(),a=i.getWidth();n==null||n.getSize()<a?n=new et(a):n.clear(),this.initArrays(a);for(var o=i.getRow(r,this.luminances),s=this.buckets,l=0;l<a;l++)s[(o[l]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(s);if(a<3)for(var l=0;l<a;l++)(o[l]&255)<u&&n.set(l);else for(var c=o[0]&255,f=o[1]&255,l=1;l<a-1;l++){var d=o[l+1]&255;(f*4-c-d)/2<u&&n.set(l),c=f,f=d}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight(),a=new _r(n,i);this.initArrays(n);for(var o=this.buckets,s=1;s<5;s++)for(var l=Math.floor(i*s/5),u=r.getRow(l,this.luminances),c=Math.floor(n*4/5),f=Math.floor(n/5);f<c;f++){var d=u[f]&255;o[d>>e.LUMINANCE_SHIFT]++}for(var p=e.estimateBlackPoint(o),v=r.getMatrix(),s=0;s<i;s++)for(var g=s*n,f=0;f<n;f++){var d=v[g+f]&255;d<p&&a.set(f,s)}return a},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)n[i]=0},e.estimateBlackPoint=function(r){for(var n=r.length,i=0,a=0,o=0,s=0;s<n;s++)r[s]>o&&(a=s,o=r[s]),r[s]>i&&(i=r[s]);for(var l=0,u=0,s=0;s<n;s++){var c=s-a,f=r[s]*c*c;f>u&&(l=s,u=f)}if(a>l){var d=a;a=l,l=d}if(l-a<=n/16)throw new k;for(var p=l-1,v=-1,s=l-1;s>a;s--){var g=s-a,f=g*g*(l-s)*(i-r[s]);f>v&&(p=s,v=f)}return p<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(fw),_w=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ew=function(t){_w(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=r.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&o++;var s=i>>e.BLOCK_SIZE_POWER;i&e.BLOCK_SIZE_MASK&&s++;var l=e.calculateBlackPoints(a,o,s,n,i),u=new _r(n,i);e.calculateThresholdForBlock(a,o,s,n,i,l,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,i,a,o,s,l){for(var u=o-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,f=0;f<i;f++){var d=f<<e.BLOCK_SIZE_POWER;d>u&&(d=u);for(var p=e.cap(f,2,i-3),v=0;v<n;v++){var g=v<<e.BLOCK_SIZE_POWER;g>c&&(g=c);for(var w=e.cap(v,2,n-3),x=0,m=-2;m<=2;m++){var y=s[p+m];x+=y[w-2]+y[w-1]+y[w]+y[w+1]+y[w+2]}var _=x/25;e.thresholdBlock(r,g,d,_,a,l)}}},e.cap=function(r,n,i){return r<n?n:r>i?i:r},e.thresholdBlock=function(r,n,i,a,o,s){for(var l=0,u=i*o+n;l<e.BLOCK_SIZE;l++,u+=o)for(var c=0;c<e.BLOCK_SIZE;c++)(r[u+c]&255)<=a&&s.set(n+c,i+l)},e.calculateBlackPoints=function(r,n,i,a,o){for(var s=o-e.BLOCK_SIZE,l=a-e.BLOCK_SIZE,u=new Array(i),c=0;c<i;c++){u[c]=new Int32Array(n);var f=c<<e.BLOCK_SIZE_POWER;f>s&&(f=s);for(var d=0;d<n;d++){var p=d<<e.BLOCK_SIZE_POWER;p>l&&(p=l);for(var v=0,g=255,w=0,x=0,m=f*a+p;x<e.BLOCK_SIZE;x++,m+=a){for(var y=0;y<e.BLOCK_SIZE;y++){var _=r[m+y]&255;v+=_,_<g&&(g=_),_>w&&(w=_)}if(w-g>e.MIN_DYNAMIC_RANGE)for(x++,m+=a;x<e.BLOCK_SIZE;x++,m+=a)for(var y=0;y<e.BLOCK_SIZE;y++)v+=r[m+y]&255}var A=v>>e.BLOCK_SIZE_POWER*2;if(w-g<=e.MIN_DYNAMIC_RANGE&&(A=g/2,c>0&&d>0)){var C=(u[c-1][d]+2*u[c][d-1]+u[c-1][d-1])/4;g<C&&(A=C)}u[c][d]=A}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(ww),As=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,i){throw new bo("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new bo("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new bo("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new ne,n=0;n<this.height;n++){for(var i=this.getRow(n,e),a=0;a<this.width;a++){var o=i[a]&255,s=void 0;o<64?s="#":o<128?s="+":o<192?s=".":s=" ",r.append(s)}r.append(`
`)}return r.toString()},t}(),Cw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hc=function(t){Cw(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var i=this.delegate.getRow(r,n),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n),a=0;a<n;a++)i[a]=255-(r[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,i,a){return new e(this.delegate.crop(r,n,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(As),Sw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Aw=function(t){Sw(e,t);function e(r,n){n===void 0&&(n=!1);var i=t.call(this,r.width,r.height)||this;return i.canvas=r,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(r,n),i}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var i=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(i.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,i,a){a===void 0&&(a=!1);var o=new Uint8ClampedArray(n*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var s=0,l=0,u=r.length;s<u;s+=4,l++){var c=void 0,f=r[s+3];if(f===0)c=255;else{var d=r[s],p=r[s+1],v=r[s+2];c=306*d+601*p+117*v+512>>10}o[l]=c}else for(var s=0,l=0,g=r.length;s<g;s+=4,l++){var c=void 0,f=r[s+3];if(f===0)c=255;else{var d=r[s],p=r[s+1],v=r[s+2];c=306*d+601*p+117*v+512>>10}o[l]=255-c}return o},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Q("Requested row is outside the image: "+r);var i=this.getWidth(),a=r*i;return n===null?n=this.buffer.slice(a,a+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(a,a+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return t.prototype.crop.call(this,r,n,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),i=n.getContext("2d"),a=r*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*s),u=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*s);return n.width=l,n.height=u,i.translate(l/2,u/2),i.rotate(a),i.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new Hc(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(As),bw=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),pt=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(t,e||[])).next())})},vt=function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(c){u=[6,c],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Iw=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ni=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return pt(this,void 0,void 0,function(){var e,r,n,i,a,o,s,l,u,c,f,d;return vt(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),r=[];try{for(n=Iw(e),i=n.next();!i.done;i=n.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(s=a.deviceId||a.id,l=a.label||"Video device "+(r.length+1),u=a.groupId,c={deviceId:s,label:l,kind:o,groupId:u},r.push(c))}catch(v){f={error:v}}finally{try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return pt(this,void 0,void 0,function(){var e;return vt(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new bw(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return pt(this,void 0,void 0,function(){var r;return vt(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return pt(this,void 0,void 0,function(){return vt(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return pt(this,void 0,void 0,function(){var n,i;return vt(this,function(a){switch(a.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,r)];case 1:return[2,a.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return pt(this,void 0,void 0,function(){var n;return vt(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return pt(this,void 0,void 0,function(){var n,i;return vt(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=a.sent(),[4,this.decodeOnce(n)];case 2:return i=a.sent(),[2,i]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return pt(this,void 0,void 0,function(){return vt(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return pt(this,void 0,void 0,function(){var i,a;return vt(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return pt(this,void 0,void 0,function(){var i;return vt(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,r,n)];case 2:return[2,a.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return pt(this,void 0,void 0,function(){var i;return vt(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,n)];case 2:return[2,a.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return pt(this,void 0,void 0,function(){var n;return vt(this,function(i){switch(i.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return i.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,i){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return pt(this,void 0,void 0,function(){return vt(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new tr("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new tr("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new tr("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new tr("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new tr("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new tr("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new tr("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new tr("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new tr("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new tr("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,r);return n.src=e,i},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,i){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,i)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return pt(this,void 0,void 0,function(){return vt(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return pt(this,void 0,void 0,function(){return vt(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var i=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var a=function(o,s){if(i._stopAsyncDecode){s(new k("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var l=i.decode(e);o(l)}catch(d){var u=r&&d instanceof k,c=d instanceof Je||d instanceof B,f=c&&n;if(u||f)return setTimeout(a,i._timeBetweenDecodingAttempts,o,s);s(d)}};return new Promise(function(o,s){return a(o,s)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var i=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var a=n.decode(e);r(a,null),setTimeout(i,n.timeBetweenScansMillis)}catch(l){r(null,l);var o=l instanceof Je||l instanceof B,s=l instanceof k;(o||s)&&setTimeout(i,n._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),i=new Aw(n,r),a=new Ew(i);return new uw(a)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=i+"px",r.width=n,r.height=i,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),ht=function(){function t(e,r,n,i,a,o){n===void 0&&(n=r==null?0:8*r.length),o===void 0&&(o=be.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=be.currentTimeMillis():this.timestamp=o}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);be.arraycopy(r,0,n,0,r.length),be.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),Tu;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Tu||(Tu={}));const Z=Tu;var Ou;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ou||(Ou={}));const at=Ou;var bs=function(){function t(e,r,n,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),Ki=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Q;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),tn=function(){function t(e,r){if(r.length===0)throw new Q;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-i),be.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var i=0,a=r.length;i!==a;i++){var o=r[i];n=Ki.addOrSubtract(n,o)}return n}n=r[0];for(var s=r.length,l=this.field,i=1;i<s;i++)n=Ki.addOrSubtract(l.multiply(e,n),r[i]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Q("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var a=new Int32Array(n.length),o=n.length-r.length;be.arraycopy(n,0,a,0,o);for(var s=o;s<n.length;s++)a[s]=Ki.addOrSubtract(r[s-o],n[s]);return new t(this.field,a)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Q("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,i=e.coefficients,a=i.length,o=new Int32Array(n+a-1),s=this.field,l=0;l<n;l++)for(var u=r[l],c=0;c<a;c++)o[l+c]=Ki.addOrSubtract(o[l+c],s.multiply(u,i[c]));return new t(s,o)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,i=new Int32Array(r),a=this.coefficients,o=0;o<r;o++)i[o]=n.multiply(a[o],e);return new t(n,i)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Q;if(r===0)return this.field.getZero();for(var n=this.coefficients,i=n.length,a=new Int32Array(i+e),o=this.field,s=0;s<i;s++)a[s]=o.multiply(n[s],r);return new t(o,a)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Q("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Q("Divide by 0");for(var r=this.field,n=r.getZero(),i=this,a=e.getCoefficient(e.getDegree()),o=r.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var s=i.getDegree()-e.getDegree(),l=r.multiply(i.getCoefficient(i.getDegree()),o),u=e.multiplyByMonomial(s,l),c=r.buildMonomial(s,l);n=n.addOrSubtract(c),i=i.addOrSubtract(u)}return[n,i]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var i=this.field.log(n);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),Nw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sp=function(t){Nw(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(kt),Tw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),At=function(t){Tw(e,t);function e(r,n,i){var a=t.call(this)||this;a.primitive=r,a.size=n,a.generatorBase=i;for(var o=new Int32Array(n),s=1,l=0;l<n;l++)o[l]=s,s*=2,s>=n&&(s^=r,s&=n-1);a.expTable=o;for(var u=new Int32Array(n),l=0;l<n-1;l++)u[o[l]]=l;return a.logTable=u,a.zero=new tn(a,Int32Array.from([0])),a.one=new tn(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Q;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new tn(this,i)},e.prototype.inverse=function(r){if(r===0)throw new sp;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+ae.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Ki),Ow=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lo=function(t){Ow(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(kt),kw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fa=function(t){kw(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(kt),Is=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,i=new tn(n,e),a=new Int32Array(r),o=!0,s=0;s<r;s++){var l=i.evaluateAt(n.exp(s+n.getGeneratorBase()));a[a.length-1-s]=l,l!==0&&(o=!1)}if(!o)for(var u=new tn(n,a),c=this.runEuclideanAlgorithm(n.buildMonomial(r,1),u,r),f=c[0],d=c[1],p=this.findErrorLocations(f),v=this.findErrorMagnitudes(d,p),s=0;s<p.length;s++){var g=e.length-1-n.log(p[s]);if(g<0)throw new lo("Bad error location");e[g]=At.addOrSubtract(e[g],v[s])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var a=this.field,o=e,s=r,l=a.getZero(),u=a.getOne();s.getDegree()>=(n/2|0);){var c=o,f=l;if(o=s,l=u,o.isZero())throw new lo("r_{i-1} was zero");s=c;for(var d=a.getZero(),p=o.getCoefficient(o.getDegree()),v=a.inverse(p);s.getDegree()>=o.getDegree()&&!s.isZero();){var g=s.getDegree()-o.getDegree(),w=a.multiply(s.getCoefficient(s.getDegree()),v);d=d.addOrSubtract(a.buildMonomial(g,w)),s=s.addOrSubtract(o.multiplyByMonomial(g,w))}if(u=d.multiply(l).addOrSubtract(f),s.getDegree()>=o.getDegree())throw new Fa("Division algorithm failed to reduce polynomial?")}var x=u.getCoefficient(0);if(x===0)throw new lo("sigmaTilde(0) was zero");var m=a.inverse(x),y=u.multiplyScalar(m),_=s.multiplyScalar(m);return[y,_]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),i=0,a=this.field,o=1;o<a.getSize()&&i<r;o++)e.evaluateAt(o)===0&&(n[i]=a.inverse(o),i++);if(i!==r)throw new lo("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,i=new Int32Array(n),a=this.field,o=0;o<n;o++){for(var s=a.inverse(r[o]),l=1,u=0;u<n;u++)if(o!==u){var c=a.multiply(r[u],s),f=c&1?c&-2:c|1;l=a.multiply(l,f)}i[o]=a.multiply(e.evaluateAt(s),a.inverse(l)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],s))}return i},t}(),rt;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(rt||(rt={}));var Ud=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),i=this.correctBits(n),a=t.convertBoolArrayToByteArray(i),o=t.getEncodedData(i),s=new bs(a,o,null,null);return s.setNumBits(i.length),s},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=rt.UPPER,i=rt.UPPER,a="",o=0;o<r;)if(i===rt.BINARY){if(r-o<5)break;var s=t.readCode(e,o,5);if(o+=5,s===0){if(r-o<11)break;s=t.readCode(e,o,11)+31,o+=11}for(var l=0;l<s;l++){if(r-o<8){o=r;break}var u=t.readCode(e,o,8);a+=ue.castAsNonUtf8Char(u),o+=8}i=n}else{var c=i===rt.DIGIT?4:5;if(r-o<c)break;var u=t.readCode(e,o,c);o+=c;var f=t.getCharacter(i,u);f.startsWith("CTRL_")?(n=i,i=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=i)):(a+=f,i=n)}return a},t.getTable=function(e){switch(e){case"L":return rt.LOWER;case"P":return rt.PUNCT;case"M":return rt.MIXED;case"D":return rt.DIGIT;case"B":return rt.BINARY;case"U":default:return rt.UPPER}},t.getCharacter=function(e,r){switch(e){case rt.UPPER:return t.UPPER_TABLE[r];case rt.LOWER:return t.LOWER_TABLE[r];case rt.MIXED:return t.MIXED_TABLE[r];case rt.PUNCT:return t.PUNCT_TABLE[r];case rt.DIGIT:return t.DIGIT_TABLE[r];default:throw new Fa("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=At.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=At.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=At.AZTEC_DATA_10):(n=12,r=At.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/n;if(a<i)throw new B;for(var o=e.length%n,s=new Int32Array(a),l=0;l<a;l++,o+=n)s[l]=t.readCode(e,o,n);try{var u=new Is(r);u.decode(s,a-i)}catch(w){throw new B(w)}for(var c=(1<<n)-1,f=0,l=0;l<i;l++){var d=s[l];if(d===0||d===c)throw new B;(d===1||d===c-1)&&f++}for(var p=new Array(i*n-f),v=0,l=0;l<i;l++){var d=s[l];if(d===1||d===c-1)p.fill(d>1,v,v+n-1),v+=n-1;else for(var g=n-1;g>=0;--g)p[v++]=(d&1<<g)!==0}return p},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(r?11:14)+n*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(n,r));if(r)for(var s=0;s<a.length;s++)a[s]=s;else for(var l=i+1+2*ae.truncDivision(ae.truncDivision(i,2)-1,15),u=i/2,c=ae.truncDivision(l,2),s=0;s<u;s++){var f=s+ae.truncDivision(s,15);a[u-s-1]=c-f-1,a[u+s]=c+f+1}for(var s=0,d=0;s<n;s++){for(var p=(n-s)*4+(r?9:12),v=s*2,g=i-1-v,w=0;w<p;w++)for(var x=w*2,m=0;m<2;m++)o[d+x+m]=e.get(a[v+m],a[v+w]),o[d+2*p+x+m]=e.get(a[v+w],a[g-m]),o[d+4*p+x+m]=e.get(a[g-m],a[g-w]),o[d+6*p+x+m]=e.get(a[g-w],a[v+m]);d+=p*8}return o},t.readCode=function(e,r,n){for(var i=0,a=r;a<r+n;a++)i<<=1,e[a]&&(i|=1);return i},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),ve=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,i){var a=e-n,o=r-i;return Math.sqrt(a*a+o*o)},t.sum=function(e){for(var r=0,n=0,i=e.length;n!==i;n++){var a=e[n];r+=a}return r},t}(),ku=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),W=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*ku.floatToIntBits(this.x)+ku.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,o,s;if(n>=r&&n>=i?(o=e[0],a=e[1],s=e[2]):i>=n&&i>=r?(o=e[1],a=e[0],s=e[2]):(o=e[2],a=e[0],s=e[1]),this.crossProductZ(a,o,s)<0){var l=a;a=s,s=l}e[0]=a,e[1]=o,e[2]=s},t.distance=function(e,r){return ve.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var i=r.x,a=r.y;return(n.x-i)*(e.y-a)-(n.y-a)*(e.x-i)},t}(),Vc=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),Dw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rw=function(t){Dw(e,t);function e(r,n,i,a,o){var s=t.call(this,r,n)||this;return s.compact=i,s.nbDatablocks=a,s.nbLayers=o,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(Vc),Du=function(){function t(e,r,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=r/2|0;if(this.leftInit=n-a,this.rightInit=n+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new k}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,i=this.downInit,a=!1,o=!0,s=!1,l=!1,u=!1,c=!1,f=!1,d=this.width,p=this.height;o;){o=!1;for(var v=!0;(v||!l)&&r<d;)v=this.containsBlackPoint(n,i,r,!1),v?(r++,o=!0,l=!0):l||r++;if(r>=d){a=!0;break}for(var g=!0;(g||!u)&&i<p;)g=this.containsBlackPoint(e,r,i,!0),g?(i++,o=!0,u=!0):u||i++;if(i>=p){a=!0;break}for(var w=!0;(w||!c)&&e>=0;)w=this.containsBlackPoint(n,i,e,!1),w?(e--,o=!0,c=!0):c||e--;if(e<0){a=!0;break}for(var x=!0;(x||!f)&&n>=0;)x=this.containsBlackPoint(e,r,n,!0),x?(n--,o=!0,f=!0):f||n--;if(n<0){a=!0;break}o&&(s=!0)}if(!a&&s){for(var m=r-e,y=null,_=1;y===null&&_<m;_++)y=this.getBlackPointOnSegment(e,i-_,e+_,i);if(y==null)throw new k;for(var A=null,_=1;A===null&&_<m;_++)A=this.getBlackPointOnSegment(e,n+_,e+_,n);if(A==null)throw new k;for(var C=null,_=1;C===null&&_<m;_++)C=this.getBlackPointOnSegment(r,n+_,r-_,n);if(C==null)throw new k;for(var E=null,_=1;E===null&&_<m;_++)E=this.getBlackPointOnSegment(r,i-_,r-_,i);if(E==null)throw new k;return this.centerEdges(E,y,C,A)}else throw new k},t.prototype.getBlackPointOnSegment=function(e,r,n,i){for(var a=ve.round(ve.distance(e,r,n,i)),o=(n-e)/a,s=(i-r)/a,l=this.image,u=0;u<a;u++){var c=ve.round(e+u*o),f=ve.round(r+u*s);if(l.get(c,f))return new W(c,f)}return null},t.prototype.centerEdges=function(e,r,n,i){var a=e.getX(),o=e.getY(),s=r.getX(),l=r.getY(),u=n.getX(),c=n.getY(),f=i.getX(),d=i.getY(),p=t.CORR;return a<this.width/2?[new W(f-p,d+p),new W(s+p,l+p),new W(u-p,c-p),new W(a+p,o-p)]:[new W(f+p,d+p),new W(s+p,l-p),new W(u-p,c+p),new W(a-p,o-p)]},t.prototype.containsBlackPoint=function(e,r,n,i){var a=this.image;if(i){for(var o=e;o<=r;o++)if(a.get(o,n))return!0}else for(var s=e;s<=r;s++)if(a.get(n,s))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),$d=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),i=e.getHeight(),a=!0,o=0;o<r.length&&a;o+=2){var s=Math.floor(r[o]),l=Math.floor(r[o+1]);if(s<-1||s>n||l<-1||l>i)throw new k;a=!1,s===-1?(r[o]=0,a=!0):s===n&&(r[o]=n-1,a=!0),l===-1?(r[o+1]=0,a=!0):l===i&&(r[o+1]=i-1,a=!0)}a=!0;for(var o=r.length-2;o>=0&&a;o-=2){var s=Math.floor(r[o]),l=Math.floor(r[o+1]);if(s<-1||s>n||l<-1||l>i)throw new k;a=!1,s===-1?(r[o]=0,a=!0):s===n&&(r[o]=n-1,a=!0),l===-1?(r[o+1]=0,a=!0):l===i&&(r[o+1]=i-1,a=!0)}},t}(),lp=function(){function t(e,r,n,i,a,o,s,l,u){this.a11=e,this.a21=r,this.a31=n,this.a12=i,this.a22=a,this.a32=o,this.a13=s,this.a23=l,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,r,n,i,a,o,s,l,u,c,f,d,p,v,g,w){var x=t.quadrilateralToSquare(e,r,n,i,a,o,s,l),m=t.squareToQuadrilateral(u,c,f,d,p,v,g,w);return m.times(x)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,l=this.a23,u=this.a31,c=this.a32,f=this.a33,d=0;d<r;d+=2){var p=e[d],v=e[d+1],g=a*p+l*v+f;e[d]=(n*p+o*v+u)/g,e[d+1]=(i*p+s*v+c)/g}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,l=this.a23,u=this.a31,c=this.a32,f=this.a33,d=e.length,p=0;p<d;p++){var v=e[p],g=r[p],w=a*v+l*g+f;e[p]=(n*v+o*g+u)/w,r[p]=(i*v+s*g+c)/w}},t.squareToQuadrilateral=function(e,r,n,i,a,o,s,l){var u=e-n+a-s,c=r-i+o-l;if(u===0&&c===0)return new t(n-e,a-n,e,i-r,o-i,r,0,0,1);var f=n-a,d=s-a,p=i-o,v=l-o,g=f*v-d*p,w=(u*v-d*c)/g,x=(f*c-u*p)/g;return new t(n-e+w*n,s-e+x*s,e,i-r+w*i,l-r+x*l,r,w,x,1)},t.quadrilateralToSquare=function(e,r,n,i,a,o,s,l){return t.squareToQuadrilateral(e,r,n,i,a,o,s,l).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),Pw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mw=function(t){Pw(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,i,a,o,s,l,u,c,f,d,p,v,g,w,x,m,y,_){var A=lp.quadrilateralToQuadrilateral(a,o,s,l,u,c,f,d,p,v,g,w,x,m,y,_);return this.sampleGridWithTransform(r,n,i,A)},e.prototype.sampleGridWithTransform=function(r,n,i,a){if(n<=0||i<=0)throw new k;for(var o=new _r(n,i),s=new Float32Array(2*n),l=0;l<i;l++){for(var u=s.length,c=l+.5,f=0;f<u;f+=2)s[f]=f/2+.5,s[f+1]=c;a.transformPoints(s),$d.checkAndNudgePoints(r,s);try{for(var f=0;f<u;f+=2)r.get(Math.floor(s[f]),Math.floor(s[f+1]))&&o.set(f/2,l)}catch{throw new k}}return o},e}($d),Wc=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new Mw,t}(),Et=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new W(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),jw=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var i=n[0];n[0]=n[2],n[2]=i}this.extractParameters(n);var a=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new Rw(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new k;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var i=0,a=0;a<4;a++){var o=n[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var s=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(a,o,s){var l=(a>>r-2<<1)+(a&1);n=(n<<3)+l}),n=((n&1)<<11)+(n>>1);for(var i=0;i<4;i++)if(ae.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new k},t.prototype.getCorrectedParameterData=function(e,r){var n,i;r?(n=7,i=2):(n=10,i=4);for(var a=n-i,o=new Int32Array(n),s=n-1;s>=0;--s)o[s]=e&15,e>>=4;try{var l=new Is(At.AZTEC_PARAM);l.decode(o,a)}catch{throw new k}for(var u=0,s=0;s<i;s++)u=(u<<4)+o[s];return u},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(r,o,1,-1),l=this.getFirstDifferent(n,o,1,1),u=this.getFirstDifferent(i,o,-1,1),c=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(c,s)*this.nbCenterLayers/(this.distancePoint(a,r)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(s,l,u,c))break}r=s,n=l,i=u,a=c,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new k;this.compact=this.nbCenterLayers===5;var d=new W(r.getX()+.5,r.getY()-.5),p=new W(n.getX()+.5,n.getY()+.5),v=new W(i.getX()-.5,i.getY()+.5),g=new W(a.getX()-.5,a.getY()-.5);return this.expandSquare([d,p,v,g],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,i;try{var a=new Du(this.image).detect();e=a[0],r=a[1],n=a[2],i=a[3]}catch{var o=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new Et(o+7,s-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Et(o+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Et(o-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Et(o-7,s-7),!1,-1,-1).toResultPoint()}var l=ve.round((e.getX()+i.getX()+r.getX()+n.getX())/4),u=ve.round((e.getY()+i.getY()+r.getY()+n.getY())/4);try{var a=new Du(this.image,15,l,u).detect();e=a[0],r=a[1],n=a[2],i=a[3]}catch{e=this.getFirstDifferent(new Et(l+7,u-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Et(l+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Et(l-7,u+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Et(l-7,u-7),!1,-1,-1).toResultPoint()}return l=ve.round((e.getX()+i.getX()+r.getX()+n.getX())/4),u=ve.round((e.getY()+i.getY()+r.getY()+n.getY())/4),new Et(l,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,i,a){var o=Wc.getInstance(),s=this.getDimension(),l=s/2-this.nbCenterLayers,u=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,l,l,u,l,u,u,l,u,r.getX(),r.getY(),n.getX(),n.getY(),i.getX(),i.getY(),a.getX(),a.getY())},t.prototype.sampleLine=function(e,r,n){for(var i=0,a=this.distanceResultPoint(e,r),o=a/n,s=e.getX(),l=e.getY(),u=o*(r.getX()-e.getX())/a,c=o*(r.getY()-e.getY())/a,f=0;f<n;f++)this.image.get(ve.round(s+f*u),ve.round(l+f*c))&&(i|=1<<n-f-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,i){var a=3;e=new Et(e.getX()-a,e.getY()+a),r=new Et(r.getX()-a,r.getY()-a),n=new Et(n.getX()+a,n.getY()-a),i=new Et(i.getX()+a,i.getY()+a);var o=this.getColor(i,e);if(o===0)return!1;var s=this.getColor(e,r);return s!==o||(s=this.getColor(r,n),s!==o)?!1:(s=this.getColor(n,i),s===o)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),i=(r.getX()-e.getX())/n,a=(r.getY()-e.getY())/n,o=0,s=e.getX(),l=e.getY(),u=this.image.get(e.getX(),e.getY()),c=Math.ceil(n),f=0;f<c;f++)s+=i,l+=a,this.image.get(ve.round(s),ve.round(l))!==u&&o++;var d=o/n;return d>.1&&d<.9?0:d<=.1===u?1:-1},t.prototype.getFirstDifferent=function(e,r,n,i){for(var a=e.getX()+n,o=e.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===r;)a+=n,o+=i;for(a-=n,o-=i;this.isValid(a,o)&&this.image.get(a,o)===r;)a+=n;for(a-=n;this.isValid(a,o)&&this.image.get(a,o)===r;)o+=i;return o-=i,new Et(a,o)},t.prototype.expandSquare=function(e,r,n){var i=n/(2*r),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,u=new W(s+i*a,l+i*o),c=new W(s-i*a,l-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var f=new W(s+i*a,l+i*o),d=new W(s-i*a,l-i*o),p=[u,f,c,d];return p},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=ve.round(e.getX()),n=ve.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return ve.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return ve.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ae.truncDivision(this.nbLayers-4,8)+1)+15},t}(),Ru=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,i=new jw(e.getBlackMatrix()),a=null,o=null;try{var s=i.detectMirror(!1);a=s.getPoints(),this.reportFoundResultPoints(r,a),o=new Ud().decode(s)}catch(f){n=f}if(o==null)try{var s=i.detectMirror(!0);a=s.getPoints(),this.reportFoundResultPoints(r,a),o=new Ud().decode(s)}catch(f){throw n??f}var l=new ht(o.getText(),o.getRawBytes(),o.getNumBits(),a,Z.AZTEC,be.currentTimeMillis()),u=o.getByteSegments();u!=null&&l.putMetadata(at.BYTE_SEGMENTS,u);var c=o.getECLevel();return c!=null&&l.putMetadata(at.ERROR_CORRECTION_LEVEL,c),l},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(ke.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(i,a,o){n.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t}(),Lw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){Lw(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Ru,r)||this}return e})(Ni);var qe=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(ke.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,r),o=a.getResultMetadata(),s=270;o!==null&&o.get(at.ORIENTATION)===!0&&(s=s+o.get(at.ORIENTATION)%360),a.putMetadata(at.ORIENTATION,s);var l=a.getResultPoints();if(l!==null)for(var u=i.getHeight(),c=0;c<l.length;c++)l[c]=new W(u-l[c].getY()-1,l[c].getX());return a}else throw new k}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),i=e.getHeight(),a=new et(n),o=r&&r.get(ke.TRY_HARDER)===!0,s=Math.max(1,i>>(o?8:5)),l;o?l=i:l=15;for(var u=Math.trunc(i/2),c=0;c<l;c++){var f=Math.trunc((c+1)/2),d=(c&1)===0,p=u+s*(d?f:-f);if(p<0||p>=i)break;try{a=e.getBlackRow(p,a)}catch{continue}for(var v=function(m){if(m===1&&(a.reverse(),r&&r.get(ke.NEED_RESULT_POINT_CALLBACK)===!0)){var y=new Map;r.forEach(function(C,E){return y.set(E,C)}),y.delete(ke.NEED_RESULT_POINT_CALLBACK),r=y}try{var _=g.decodeRow(p,a,r);if(m===1){_.putMetadata(at.ORIENTATION,180);var A=_.getResultPoints();A!==null&&(A[0]=new W(n-A[0].getX()-1,A[0].getY()),A[1]=new W(n-A[1].getX()-1,A[1].getY()))}return{value:_}}catch{}},g=this,w=0;w<2;w++){var x=v(w);if(typeof x=="object")return x.value}}throw new k},t.recordPattern=function(e,r,n){for(var i=n.length,a=0;a<i;a++)n[a]=0;var o=e.getSize();if(r>=o)throw new k;for(var s=!e.get(r),l=0,u=r;u<o;){if(e.get(u)!==s)n[l]++;else{if(++l===i)break;n[l]=1,s=!s}u++}if(!(l===i||l===i-1&&u===o))throw new k},t.recordPatternInReverse=function(e,r,n){for(var i=n.length,a=e.get(r);r>0&&i>=0;)e.get(--r)!==a&&(i--,a=!a);if(i>=0)throw new k;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=r[s];if(a<o)return Number.POSITIVE_INFINITY;var l=a/o;n*=l;for(var u=0,c=0;c<i;c++){var f=e[c],d=r[c]*l,p=f>d?f-d:d-f;if(p>n)return Number.POSITIVE_INFINITY;u+=p}return u/a},t}(),Bw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zd=function(t){Bw(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),i=r.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),s=i,l=!1,u=6,c=i;c<n;c++)if(r.get(c)!==l)o[a]++;else{if(a===u-1){for(var f=e.MAX_AVG_VARIANCE,d=-1,p=e.CODE_START_A;p<=e.CODE_START_C;p++){var v=qe.patternMatchVariance(o,e.CODE_PATTERNS[p],e.MAX_INDIVIDUAL_VARIANCE);v<f&&(f=v,d=p)}if(d>=0&&r.isRange(Math.max(0,s-(c-s)/2),s,!1))return Int32Array.from([s,c,d]);s+=o[0]+o[1],o=o.slice(2,o.length),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,l=!l}throw new k},e.decodeCode=function(r,n,i){qe.recordPattern(r,i,n);for(var a=e.MAX_AVG_VARIANCE,o=-1,s=0;s<e.CODE_PATTERNS.length;s++){var l=e.CODE_PATTERNS[s],u=this.patternMatchVariance(n,l,e.MAX_INDIVIDUAL_VARIANCE);u<a&&(a=u,o=s)}if(o>=0)return o;throw new k},e.prototype.decodeRow=function(r,n,i){var a=i&&i.get(ke.ASSUME_GS1)===!0,o=e.findStartPattern(n),s=o[2],l=0,u=new Uint8Array(20);u[l++]=s;var c;switch(s){case e.CODE_START_A:c=e.CODE_CODE_A;break;case e.CODE_START_B:c=e.CODE_CODE_B;break;case e.CODE_START_C:c=e.CODE_CODE_C;break;default:throw new B}for(var f=!1,d=!1,p="",v=o[0],g=o[1],w=Int32Array.from([0,0,0,0,0,0]),x=0,m=0,y=s,_=0,A=!0,C=!1,E=!1;!f;){var b=d;switch(d=!1,x=m,m=e.decodeCode(n,w,g),u[l++]=m,m!==e.CODE_STOP&&(A=!0),m!==e.CODE_STOP&&(_++,y+=_*m),v=g,g+=w.reduce(function(P,O){return P+O},0),m){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new B}switch(c){case e.CODE_CODE_A:if(m<64)E===C?p+=String.fromCharCode(32+m):p+=String.fromCharCode(32+m+128),E=!1;else if(m<96)E===C?p+=String.fromCharCode(m-64):p+=String.fromCharCode(m+64),E=!1;else switch(m!==e.CODE_STOP&&(A=!1),m){case e.CODE_FNC_1:a&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!C&&E?(C=!0,E=!1):C&&E?(C=!1,E=!1):E=!0;break;case e.CODE_SHIFT:d=!0,c=e.CODE_CODE_B;break;case e.CODE_CODE_B:c=e.CODE_CODE_B;break;case e.CODE_CODE_C:c=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(m<96)E===C?p+=String.fromCharCode(32+m):p+=String.fromCharCode(32+m+128),E=!1;else switch(m!==e.CODE_STOP&&(A=!1),m){case e.CODE_FNC_1:a&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!C&&E?(C=!0,E=!1):C&&E?(C=!1,E=!1):E=!0;break;case e.CODE_SHIFT:d=!0,c=e.CODE_CODE_A;break;case e.CODE_CODE_A:c=e.CODE_CODE_A;break;case e.CODE_CODE_C:c=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(m<100)m<10&&(p+="0"),p+=m;else switch(m!==e.CODE_STOP&&(A=!1),m){case e.CODE_FNC_1:a&&(p.length===0?p+="]C1":p+="");break;case e.CODE_CODE_A:c=e.CODE_CODE_A;break;case e.CODE_CODE_B:c=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}b&&(c=c===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var D=g-v;if(g=n.getNextUnset(g),!n.isRange(g,Math.min(n.getSize(),g+(g-v)/2),!1))throw new k;if(y-=_*x,y%103!==x)throw new Je;var R=p.length;if(R===0)throw new k;R>0&&A&&(c===e.CODE_CODE_C?p=p.substring(0,R-2):p=p.substring(0,R-1));for(var J=(o[1]+o[0])/2,q=v+D/2,ee=u.length,z=new Uint8Array(ee),te=0;te<ee;te++)z[te]=u[te];var ce=[new W(J,r),new W(q,r)];return new ht(p,z,0,ce,Z.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(qe),Fw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cl=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hd=function(t){Fw(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var i=t.call(this)||this;return i.usingCheckDigit=r,i.extendedMode=n,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(r,n,i){var a,o,s,l,u=this.counters;u.fill(0),this.decodeRowResult="";var c=e.findAsteriskPattern(n,u),f=n.getNextSet(c[1]),d=n.getSize(),p,v;do{e.recordPattern(n,f,u);var g=e.toNarrowWidePattern(u);if(g<0)throw new k;p=e.patternToChar(g),this.decodeRowResult+=p,v=f;try{for(var w=(a=void 0,cl(u)),x=w.next();!x.done;x=w.next()){var m=x.value;f+=m}}catch(ee){a={error:ee}}finally{try{x&&!x.done&&(o=w.return)&&o.call(w)}finally{if(a)throw a.error}}f=n.getNextSet(f)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var y=0;try{for(var _=cl(u),A=_.next();!A.done;A=_.next()){var m=A.value;y+=m}}catch(ee){s={error:ee}}finally{try{A&&!A.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}var C=f-v-y;if(f!==d&&C*2<y)throw new k;if(this.usingCheckDigit){for(var E=this.decodeRowResult.length-1,b=0,D=0;D<E;D++)b+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(D));if(this.decodeRowResult.charAt(E)!==e.ALPHABET_STRING.charAt(b%43))throw new Je;this.decodeRowResult=this.decodeRowResult.substring(0,E)}if(this.decodeRowResult.length===0)throw new k;var R;this.extendedMode?R=e.decodeExtended(this.decodeRowResult):R=this.decodeRowResult;var J=(c[1]+c[0])/2,q=v+y/2;return new ht(R,null,0,[new W(J,r),new W(q,r)],Z.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var i=r.getSize(),a=r.getNextSet(0),o=0,s=a,l=!1,u=n.length,c=a;c<i;c++)if(r.get(c)!==l)n[o]++;else{if(o===u-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,s-Math.floor((c-s)/2)),s,!1))return[s,c];s+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,l=!l}throw new k},e.toNarrowWidePattern=function(r){var n,i,a=r.length,o=0,s;do{var l=2147483647;try{for(var u=(n=void 0,cl(r)),c=u.next();!c.done;c=u.next()){var f=c.value;f<l&&f>o&&(l=f)}}catch(g){n={error:g}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}o=l,s=0;for(var d=0,p=0,v=0;v<a;v++){var f=r[v];f>o&&(p|=1<<a-1-v,s++,d+=f)}if(s===3){for(var v=0;v<a&&s>0;v++){var f=r[v];if(f>o&&(s--,f*2>=d))return-1}return p}}while(s>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new k},e.decodeExtended=function(r){for(var n=r.length,i="",a=0;a<n;a++){var o=r.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var s=r.charAt(a+1),l="\0";switch(o){case"+":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new B;break;case"$":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new B;break;case"%":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s==="X"||s==="Y"||s==="Z")l="";else throw new B;break;case"/":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new B;break}i+=l,a++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(qe),Uw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fl=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vd=function(t){Uw(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,i){var a,o,s,l,u=this.findAsteriskPattern(n),c=n.getNextSet(u[1]),f=n.getSize(),d=this.counters;d.fill(0),this.decodeRowResult="";var p,v;do{e.recordPattern(n,c,d);var g=this.toPattern(d);if(g<0)throw new k;p=this.patternToChar(g),this.decodeRowResult+=p,v=c;try{for(var w=(a=void 0,fl(d)),x=w.next();!x.done;x=w.next()){var m=x.value;c+=m}}catch(D){a={error:D}}finally{try{x&&!x.done&&(o=w.return)&&o.call(w)}finally{if(a)throw a.error}}c=n.getNextSet(c)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var y=0;try{for(var _=fl(d),A=_.next();!A.done;A=_.next()){var m=A.value;y+=m}}catch(D){s={error:D}}finally{try{A&&!A.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}if(c===f||!n.get(c))throw new k;if(this.decodeRowResult.length<2)throw new k;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var C=this.decodeExtended(this.decodeRowResult),E=(u[1]+u[0])/2,b=v+y/2;return new ht(C,null,0,[new W(E,r),new W(b,r)],Z.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),i=r.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,s=!1,l=a.length,u=0,c=i;c<n;c++)if(r.get(c)!==s)a[u]++;else{if(u===l-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([o,c]);o+=a[0]+a[1],a.copyWithin(0,2,2+u-1),a[u-1]=0,a[u]=0,u--}else u++;a[u]=1,s=!s}throw new k},e.prototype.toPattern=function(r){var n,i,a=0;try{for(var o=fl(r),s=o.next();!s.done;s=o.next()){var l=s.value;a+=l}}catch(v){n={error:v}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}for(var u=0,c=r.length,f=0;f<c;f++){var d=Math.round(r[f]*9/a);if(d<1||d>4)return-1;if(f&1)u<<=d;else for(var p=0;p<d;p++)u=u<<1|1}return u},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new k},e.prototype.decodeExtended=function(r){for(var n=r.length,i="",a=0;a<n;a++){var o=r.charAt(a);if(o>="a"&&o<="d"){if(a>=n-1)throw new B;var s=r.charAt(a+1),l="\0";switch(o){case"d":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new B;break;case"a":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new B;break;case"b":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s>="X"&&s<="Z")l="";else throw new B;break;case"c":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new B;break}i+=l,a++}else i+=o}return i},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,i){for(var a=1,o=0,s=n-1;s>=0;s--)o+=a*e.ALPHABET_STRING.indexOf(r.charAt(s)),++a>i&&(a=1);if(r.charAt(n)!==e.ALPHABET_STRING[o%47])throw new Je},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(qe),$w=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zw=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wd=function(t){$w(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,i){var a,o,s=this.decodeStart(n),l=this.decodeEnd(n),u=new ne;e.decodeMiddle(n,s[1],l[0],u);var c=u.toString(),f=null;i!=null&&(f=i.get(ke.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var d=c.length,p=!1,v=0;try{for(var g=zw(f),w=g.next();!w.done;w=g.next()){var x=w.value;if(d===x){p=!0;break}x>v&&(v=x)}}catch(_){a={error:_}}finally{try{w&&!w.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}if(!p&&d>v&&(p=!0),!p)throw new B;var m=[new W(s[1],r),new W(l[0],r)],y=new ht(c,null,0,m,Z.ITF,new Date().getTime());return y},e.decodeMiddle=function(r,n,i,a){var o=new Int32Array(10),s=new Int32Array(5),l=new Int32Array(5);for(o.fill(0),s.fill(0),l.fill(0);n<i;){qe.recordPattern(r,n,o);for(var u=0;u<5;u++){var c=2*u;s[u]=o[c],l[u]=o[c+1]}var f=e.decodeDigit(s);a.append(f.toString()),f=this.decodeDigit(l),a.append(f.toString()),o.forEach(function(d){n+=d})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),i=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(r,i[0]),i},e.prototype.validateQuietZone=function(r,n){var i=this.narrowLineWidth*10;i=i<n?i:n;for(var a=n-1;i>0&&a>=0&&!r.get(a);a--)i--;if(i!==0)throw new k},e.skipWhiteSpace=function(r){var n=r.getSize(),i=r.getNextSet(0);if(i===n)throw new k;return i},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),i=void 0;try{i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof k&&(i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,i[0]);var a=i[0];return i[0]=r.getSize()-i[1],i[1]=r.getSize()-a,i}finally{r.reverse()}},e.findGuardPattern=function(r,n,i){var a=i.length,o=new Int32Array(a),s=r.getSize(),l=!1,u=0,c=n;o.fill(0);for(var f=n;f<s;f++)if(r.get(f)!==l)o[u]++;else{if(u===a-1){if(qe.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[c,f];c+=o[0]+o[1],be.arraycopy(o,2,o,0,u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,l=!l}throw new k},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,o=0;o<a;o++){var s=e.PATTERNS[o],l=qe.patternMatchVariance(r,s,e.MAX_INDIVIDUAL_VARIANCE);l<n?(n=l,i=o):l===n&&(i=-1)}if(i>=0)return i%10;throw new k},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(qe),Hw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_i=function(t){Hw(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,i,a=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(r,a,!1,this.START_END_PATTERN,o);var s=i[0];a=i[1];var l=s-(a-s);l>=0&&(n=r.isRange(l,s,!1))}return i},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,a=n-1;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new B;i+=o}i*=3;for(var a=n-2;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new B;i+=o}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,i,a){return this.findGuardPattern(r,n,i,a,new Int32Array(a.length))},e.findGuardPattern=function(r,n,i,a,o){var s=r.getSize();n=i?r.getNextUnset(n):r.getNextSet(n);for(var l=0,u=n,c=a.length,f=i,d=n;d<s;d++)if(r.get(d)!==f)o[l]++;else{if(l===c-1){if(qe.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,d]);u+=o[0]+o[1];for(var p=o.slice(2,o.length),v=0;v<l-1;v++)o[v]=p[v];o[l-1]=0,o[l]=0,l--}else l++;o[l]=1,f=!f}throw new k},e.decodeDigit=function(r,n,i,a){this.recordPattern(r,i,n);for(var o=this.MAX_AVG_VARIANCE,s=-1,l=a.length,u=0;u<l;u++){var c=a[u],f=qe.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);f<o&&(o=f,s=u)}if(s>=0)return s;throw new k},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(qe),Vw=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ww=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(r,n,i),o=i.toString(),s=t.parseExtensionString(o),l=[new W((n[0]+n[1])/2,e),new W(a,e)],u=new ht(o,null,0,l,Z.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&u.putAllMetadata(s),u},t.prototype.decodeMiddle=function(e,r,n){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),l=r[1],u=0,c=0;c<5&&l<s;c++){var f=_i.decodeDigit(e,o,l,_i.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var d=(i=void 0,Vw(o)),p=d.next();!p.done;p=d.next()){var v=p.value;l+=v}}catch(w){i={error:w}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}f>=10&&(u|=1<<4-c),c!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==5)throw new k;var g=this.determineCheckDigit(u);if(t.extensionChecksum(n.toString())!==g)throw new k;return l},t.extensionChecksum=function(e){for(var r=e.length,n=0,i=r-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;n*=3;for(var i=r-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new k},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[at.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="£";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),i=(n/100).toString(),a=n%100,o=a<10?"0"+a:a.toString();return r+i+"."+o},t}(),Gw=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xw=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(r,n,i),o=i.toString(),s=t.parseExtensionString(o),l=[new W((n[0]+n[1])/2,e),new W(a,e)],u=new ht(o,null,0,l,Z.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&u.putAllMetadata(s),u},t.prototype.decodeMiddle=function(e,r,n){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),l=r[1],u=0,c=0;c<2&&l<s;c++){var f=_i.decodeDigit(e,o,l,_i.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var d=(i=void 0,Gw(o)),p=d.next();!p.done;p=d.next()){var v=p.value;l+=v}}catch(g){i={error:g}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}f>=10&&(u|=1<<1-c),c!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==2)throw new k;if(parseInt(n.toString())%4!==u)throw new k;return l},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[at.ISSUE_NUMBER,parseInt(e)]])},t}(),qw=function(){function t(){}return t.decodeRow=function(e,r,n){var i=_i.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new Ww;return a.decodeRow(e,r,i)}catch{var o=new Xw;return o.decodeRow(e,r,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),Kw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ve=function(t){Kw(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var n=10;n<20;n++){for(var i=e.L_PATTERNS[n-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[n]=a}return r}return e.prototype.decodeRow=function(r,n,i){var a=e.findStartGuardPattern(n),o=i==null?null:i.get(ke.NEED_RESULT_POINT_CALLBACK);if(o!=null){var s=new W((a[0]+a[1])/2,r);o.foundPossibleResultPoint(s)}var l=this.decodeMiddle(n,a,this.decodeRowStringBuffer),u=l.rowOffset,c=l.resultString;if(o!=null){var f=new W(u,r);o.foundPossibleResultPoint(f)}var d=e.decodeEnd(n,u);if(o!=null){var p=new W((d[0]+d[1])/2,r);o.foundPossibleResultPoint(p)}var v=d[1],g=v+(v-d[0]);if(g>=n.getSize()||!n.isRange(v,g,!1))throw new k;var w=c.toString();if(w.length<8)throw new B;if(!e.checkChecksum(w))throw new Je;var x=(a[1]+a[0])/2,m=(d[1]+d[0])/2,y=this.getBarcodeFormat(),_=[new W(x,r),new W(m,r)],A=new ht(w,null,0,_,y,new Date().getTime()),C=0;try{var E=qw.decodeRow(r,n,d[1]);A.putMetadata(at.UPC_EAN_EXTENSION,E.getText()),A.putAllMetadata(E.getResultMetadata()),A.addResultPoints(E.getResultPoints()),C=E.getText().length}catch{}var b=i==null?null:i.get(ke.ALLOWED_EAN_EXTENSIONS);if(b!=null){var D=!1;for(var R in b)if(C.toString()===R){D=!0;break}if(!D)throw new k}return y===Z.EAN_13||Z.UPC_A,A},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,a=n-1;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new B;i+=o}i*=3;for(var a=n-2;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new B;i+=o}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(_i),Yw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gd=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pu=function(t){Yw(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var a,o,s,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var c=r.getSize(),f=n[1],d=0,p=0;p<6&&f<c;p++){var v=Ve.decodeDigit(r,u,f,Ve.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);try{for(var g=(a=void 0,Gd(u)),w=g.next();!w.done;w=g.next()){var x=w.value;f+=x}}catch(A){a={error:A}}finally{try{w&&!w.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}v>=10&&(d|=1<<5-p)}i=e.determineFirstDigit(i,d);var m=Ve.findGuardPattern(r,f,!0,Ve.MIDDLE_PATTERN,new Int32Array(Ve.MIDDLE_PATTERN.length).fill(0));f=m[1];for(var p=0;p<6&&f<c;p++){var v=Ve.decodeDigit(r,u,f,Ve.L_PATTERNS);i+=String.fromCharCode(48+v);try{for(var y=(s=void 0,Gd(u)),_=y.next();!_.done;_=y.next()){var x=_.value;f+=x}}catch(E){s={error:E}}finally{try{_&&!_.done&&(l=y.return)&&l.call(y)}finally{if(s)throw s.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return Z.EAN_13},e.determineFirstDigit=function(r,n){for(var i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return r=String.fromCharCode(48+i)+r,r;throw new k},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Ve),Zw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xd=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qd=function(t){Zw(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var a,o,s,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var c=r.getSize(),f=n[1],d=0;d<4&&f<c;d++){var p=Ve.decodeDigit(r,u,f,Ve.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var v=(a=void 0,Xd(u)),g=v.next();!g.done;g=v.next()){var w=g.value;f+=w}}catch(_){a={error:_}}finally{try{g&&!g.done&&(o=v.return)&&o.call(v)}finally{if(a)throw a.error}}}var x=Ve.findGuardPattern(r,f,!0,Ve.MIDDLE_PATTERN,new Int32Array(Ve.MIDDLE_PATTERN.length).fill(0));f=x[1];for(var d=0;d<4&&f<c;d++){var p=Ve.decodeDigit(r,u,f,Ve.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var m=(s=void 0,Xd(u)),y=m.next();!y.done;y=m.next()){var w=y.value;f+=w}}catch(C){s={error:C}}finally{try{y&&!y.done&&(l=m.return)&&l.call(m)}finally{if(s)throw s.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return Z.EAN_8},e}(Ve),Qw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kd=function(t){Qw(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new Pu,r}return e.prototype.getBarcodeFormat=function(){return Z.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,i))},e.prototype.decodeMiddle=function(r,n,i){return this.ean13Reader.decodeMiddle(r,n,i)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var i=new ht(n.substring(1),null,null,r.getResultPoints(),Z.UPC_A);return r.getResultMetadata()!=null&&i.putAllMetadata(r.getResultMetadata()),i}else throw new k},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Ve),Jw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),e_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yd=function(t){Jw(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,i){var a,o,s=this.decodeMiddleCounters.map(function(w){return w});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=r.getSize(),u=n[1],c=0,f=0;f<6&&u<l;f++){var d=e.decodeDigit(r,s,u,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+d%10);try{for(var p=(a=void 0,e_(s)),v=p.next();!v.done;v=p.next()){var g=v.value;u+=g}}catch(w){a={error:w}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}d>=10&&(c|=1<<5-f)}return e.determineNumSysAndCheckDigit(new ne(i),c),u},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return Ve.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){r.insert(0,"0"+i),r.append("0"+a);return}throw k.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Z.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new ne;i.append(r.charAt(0));var a=n[5];switch(a){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(a),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(a);break}return r.length>=8&&i.append(r.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Ve),t_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zd=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dl=function(t){t_(e,t);function e(r){var n=t.call(this)||this,i=r==null?null:r.get(ke.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Z.EAN_13)>-1&&a.push(new Pu),i.indexOf(Z.UPC_A)>-1&&a.push(new Kd),i.indexOf(Z.EAN_8)>-1&&a.push(new qd),i.indexOf(Z.UPC_E)>-1&&a.push(new Yd)),a.length===0&&(a.push(new Pu),a.push(new Kd),a.push(new qd),a.push(new Yd)),n.readers=a,n}return e.prototype.decodeRow=function(r,n,i){var a,o;try{for(var s=Zd(this.readers),l=s.next();!l.done;l=s.next()){var u=l.value;try{var c=u.decodeRow(r,n,i),f=c.getBarcodeFormat()===Z.EAN_13&&c.getText().charAt(0)==="0",d=i==null?null:i.get(ke.POSSIBLE_FORMATS),p=d==null||d.includes(Z.UPC_A);if(f&&p){var v=c.getRawBytes(),g=new ht(c.getText().substring(1),v,v?v.length:null,c.getResultPoints(),Z.UPC_A);return g.putAllMetadata(c.getResultMetadata()),g}return c}catch{}}}catch(w){a={error:w}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(a)throw a.error}}throw new k},e.prototype.reset=function(){var r,n;try{for(var i=Zd(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e}(qe),r_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),n_=function(t){r_(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,i){var a=this.getValidRowData(n);if(!a)throw new k;var o=this.codaBarDecodeRow(a.row);if(!o)throw new k;return new ht(o,null,0,[new W(a.left,r),new W(a.right,r)],Z.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),i=n.indexOf(!0);if(i===-1)return null;var a=n.lastIndexOf(!0);if(a<=i)return null;n=n.slice(i,a+1);for(var o=[],s=n[0],l=1,u=1;u<n.length;u++)n[u]===s?l++:(s=n[u],o.push(l),l=1);return o.push(l),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],i=Math.ceil(r.reduce(function(l,u){return(l+u)/2},0));r.length>0;){var a=r.splice(0,8).splice(0,7),o=a.map(function(l){return l<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[o])}var s=n.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(qe),i_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),a_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yn=function(t){i_(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var i=0;i<n.length;i++)if(qe.patternMatchVariance(r,n[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new k},e.count=function(r){return ve.sum(new Int32Array(r))},e.increment=function(r,n){for(var i=0,a=n[0],o=1;o<r.length;o++)n[o]>a&&(a=n[o],i=o);r[i]++},e.decrement=function(r,n){for(var i=0,a=n[0],o=1;o<r.length;o++)n[o]<a&&(a=n[o],i=o);r[i]--},e.isFinderPattern=function(r){var n,i,a=r[0]+r[1],o=a+r[2]+r[3],s=a/o;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var c=a_(r),f=c.next();!f.done;f=c.next()){var d=f.value;d>u&&(u=d),d<l&&(l=d)}}catch(p){n={error:p}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return u<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(qe),ts=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),up=function(){function t(e,r,n,i,a){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new W(n,a)),this.resultPoints.push(new W(i,a))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),o_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ii=function(){function t(){}return t.getRSSvalue=function(e,r,n){var i,a,o=0;try{for(var s=o_(e),l=s.next();!l.done;l=s.next()){var u=l.value;o+=u}}catch(m){i={error:m}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}for(var c=0,f=0,d=e.length,p=0;p<d-1;p++){var v=void 0;for(v=1,f|=1<<p;v<e[p];v++,f&=~(1<<p)){var g=t.combins(o-v-1,d-p-2);if(n&&f===0&&o-v-(d-p-1)>=d-p-1&&(g-=t.combins(o-v-(d-p),d-p-2)),d-p-1>1){for(var w=0,x=o-v-(d-p-2);x>r;x--)w+=t.combins(o-v-x-1,d-p-3);g-=w*(d-1-p)}else o-v>r&&g--;c+=g}o-=v}return c},t.combins=function(e,r){var n,i;e-r>r?(i=r,n=e-r):(i=e-r,n=r);for(var a=1,o=1,s=e;s>n;s--)a*=s,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},t}(),s_=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,i=new et(n),a=0,o=e[0],s=o.getRightChar().getValue(),l=11;l>=0;--l)s&1<<l&&i.set(a),a++;for(var l=1;l<e.length;++l){for(var u=e[l],c=u.getLeftChar().getValue(),f=11;f>=0;--f)c&1<<f&&i.set(a),a++;if(u.getRightChar()!==null)for(var d=u.getRightChar().getValue(),f=11;f>=0;--f)d&1<<f&&i.set(a),a++}return i},t}(),hn=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),Gc=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),l_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),er=function(t){l_(e,t);function e(r,n){var i=t.call(this,r)||this;return i.value=n,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(Gc),u_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pn=function(t){u_(e,t);function e(r,n,i){var a=t.call(this,r)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=n,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(Gc),c_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hn=function(t){c_(e,t);function e(r,n,i){var a=t.call(this,r)||this;if(n<0||n>10||i<0||i>10)throw new B;return a.firstDigit=n,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(Gc),uo=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},f_=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,i,a,o,s,l,u;if(!e)return null;if(e.length<2)throw new k;var c=e.substring(0,2);try{for(var f=uo(t.TWO_DIGIT_DATA_LENGTH),d=f.next();!d.done;d=f.next()){var p=d.value;if(p[0]===c)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,p[2],e):t.processFixedAI(2,p[1],e)}}catch(C){r={error:C}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}if(e.length<3)throw new k;var v=e.substring(0,3);try{for(var g=uo(t.THREE_DIGIT_DATA_LENGTH),w=g.next();!w.done;w=g.next()){var p=w.value;if(p[0]===v)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,p[2],e):t.processFixedAI(3,p[1],e)}}catch(C){i={error:C}}finally{try{w&&!w.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}try{for(var x=uo(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),m=x.next();!m.done;m=x.next()){var p=m.value;if(p[0]===v)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(C){o={error:C}}finally{try{m&&!m.done&&(s=x.return)&&s.call(x)}finally{if(o)throw o.error}}if(e.length<4)throw new k;var y=e.substring(0,4);try{for(var _=uo(t.FOUR_DIGIT_DATA_LENGTH),A=_.next();!A.done;A=_.next()){var p=A.value;if(p[0]===y)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(C){l={error:C}}finally{try{A&&!A.done&&(u=_.return)&&u.call(_)}finally{if(l)throw l.error}}throw new k},t.processFixedAI=function(e,r,n){if(n.length<e)throw new k;var i=n.substring(0,e);if(n.length<e+r)throw new k;var a=n.substring(e,e+r),o=n.substring(e+r),s="("+i+")"+a,l=t.parseFieldsInGeneralPurpose(o);return l==null?s:s+l},t.processVariableAI=function(e,r,n){var i=n.substring(0,e),a;n.length<e+r?a=n.length:a=e+r;var o=n.substring(e,a),s=n.substring(a),l="("+i+")"+o,u=t.parseFieldsInGeneralPurpose(s);return u==null?l:l+u},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),Io=function(){function t(e){this.buffer=new ne,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,i=null;do{var a=this.decodeGeneralPurposeField(n,i),o=f_.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,n===a.getNewPosition())break;n=a.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new Hn(this.information.getSize(),Hn.FNC1,Hn.FNC1):new Hn(this.information.getSize(),r-1,Hn.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,a=(n-8)%11;return new Hn(e+7,i,a)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var i=0,a=0;a<n;++a)e.get(r+a)&&(i|=1<<n-a-1);return i},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new pn(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new pn(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var i=n!==this.current.getPosition();if(!i&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new pn(this.current.getPosition(),this.buffer.toString()):r=new pn(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new hn(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new pn(this.current.getPosition(),this.buffer.toString());return new hn(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new hn(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new pn(this.current.getPosition(),this.buffer.toString());return new hn(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new hn(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new pn(this.current.getPosition(),this.buffer.toString());return new hn(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new hn(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new er(e+5,er.FNC1);if(r>=5&&r<15)return new er(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new er(e+7,""+(n+1));if(n>=90&&n<116)return new er(e+7,""+(n+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new B}return new er(e+8,a)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new er(e+5,er.FNC1);if(r>=5&&r<15)return new er(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new er(e+6,""+(n+33));var i;switch(n){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Fa("Decoding invalid alphanumeric value: "+n)}return new er(e+6,i)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),cp=function(){function t(e){this.information=e,this.generalDecoder=new Io(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),d_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),or=function(t){d_(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var i=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,i)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*a,10);o/100===0&&r.append("0"),o/10===0&&r.append("0"),r.append(o)}e.appendCheckDigit(r,i)},e.appendCheckDigit=function(r,n){for(var i=0,a=0;a<13;a++){var o=r.charAt(a+n).charCodeAt(0)-48;i+=a&1?o:3*o}i=10-i%10,i===10&&(i=0),r.append(i)},e.GTIN_SIZE=40,e}(cp),h_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),p_=function(t){h_(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new ne;r.append("(01)");var n=r.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(i),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(or),v_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),g_=function(t){v_(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new ne;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(cp),m_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),No=function(t){m_(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(r,a);for(var o=this.checkWeight(a),s=1e5,l=0;l<5;++l)o/s===0&&r.append("0"),s/=10;r.append(o)},e}(or),y_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fp=function(t){y_(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+No.GTIN_SIZE+e.WEIGHT_SIZE)throw new k;var r=new ne;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+No.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(No),x_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),w_=function(t){x_(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(fp),__=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),E_=function(t){__(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(fp),C_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),S_=function(t){C_(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+or.GTIN_SIZE)throw new k;var r=new ne;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+or.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+or.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(i.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(or),A_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),b_=function(t){A_(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+or.GTIN_SIZE)throw new k;var r=new ne;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+or.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+or.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&r.append("0"),i/10===0&&r.append("0"),r.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+or.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(or),I_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jr=function(t){I_(e,t);function e(r,n,i){var a=t.call(this,r)||this;return a.dateCode=i,a.firstAIdigits=n,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new k;var r=new ne;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(i!==38400){r.append("("),r.append(this.dateCode),r.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var s=i;s/10===0&&r.append("0"),r.append(s),o/10===0&&r.append("0"),r.append(o),a/10===0&&r.append("0"),r.append(a)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(No);function N_(t){try{if(t.get(1))return new p_(t);if(!t.get(2))return new g_(t);var e=Io.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new w_(t);case 5:return new E_(t)}var r=Io.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new S_(t);case 13:return new b_(t)}var n=Io.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new jr(t,"310","11");case 57:return new jr(t,"320","11");case 58:return new jr(t,"310","13");case 59:return new jr(t,"320","13");case 60:return new jr(t,"310","15");case 61:return new jr(t,"320","15");case 62:return new jr(t,"310","17");case 63:return new jr(t,"320","17")}}catch(i){throw console.log(i),new Fa("unknown decoder: "+t)}}var Qd=function(){function t(e,r,n,i){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),T_=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(i,a){r.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),O_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lr=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k_=function(t){O_(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(s){if(s instanceof k){if(!this.pairs.length)throw new k;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(r,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new k},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(i){console.log(i)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var i,a,o=n;o<this.rows.length;o++){var s=this.rows[o];this.pairs.length=0;try{for(var l=(i=void 0,Lr(r)),u=l.next();!u.done;u=l.next()){var c=u.value;this.pairs.push(c.getPairs())}}catch(d){i={error:d}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(r);f.push(s);try{return this.checkRows(f,o+1)}catch(d){console.log(d)}}}throw new k},e.isValidSequence=function(r){var n,i;try{for(var a=Lr(e.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var s=o.value;if(!(r.length>s.length)){for(var l=!0,u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!==s[u]){l=!1;break}if(l)return!0}}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var i=0,a=!1,o=!1;i<this.rows.length;){var s=this.rows[i];if(s.getRowNumber()>r){o=s.isEquivalent(this.pairs);break}a=s.isEquivalent(this.pairs),i++}o||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new T_(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var i,a,o,s,l,u;try{for(var c=Lr(n),f=c.next();!f.done;f=c.next()){var d=f.value;if(d.getPairs().length!==r.length){var p=!0;try{for(var v=(o=void 0,Lr(d.getPairs())),g=v.next();!g.done;g=v.next()){var w=g.value,x=!1;try{for(var m=(l=void 0,Lr(r)),y=m.next();!y.done;y=m.next()){var _=y.value;if(Qd.equals(w,_)){x=!0;break}}}catch(A){l={error:A}}finally{try{y&&!y.done&&(u=m.return)&&u.call(m)}finally{if(l)throw l.error}}x||(p=!1)}}catch(A){o={error:A}}finally{try{g&&!g.done&&(s=v.return)&&s.call(v)}finally{if(o)throw o.error}}}}}catch(A){i={error:A}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}},e.isPartialRow=function(r,n){var i,a,o,s,l,u;try{for(var c=Lr(n),f=c.next();!f.done;f=c.next()){var d=f.value,p=!0;try{for(var v=(o=void 0,Lr(r)),g=v.next();!g.done;g=v.next()){var w=g.value,x=!1;try{for(var m=(l=void 0,Lr(d.getPairs())),y=m.next();!y.done;y=m.next()){var _=y.value;if(w.equals(_)){x=!0;break}}}catch(A){l={error:A}}finally{try{y&&!y.done&&(u=m.return)&&u.call(m)}finally{if(l)throw l.error}}if(!x){p=!1;break}}}catch(A){o={error:A}}finally{try{g&&!g.done&&(s=v.return)&&s.call(v)}finally{if(o)throw o.error}}if(p)return!0}}catch(A){i={error:A}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=s_.buildBitArray(r),i=N_(n),a=i.parseInformation(),o=r[0].getFinderPattern().getResultPoints(),s=r[r.length-1].getFinderPattern().getResultPoints(),l=[o[0],o[1],s[0],s[1]];return new ht(a,null,null,l,Z.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),i=r.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,s=1;s<this.pairs.size();++s){var l=this.pairs.get(s);a+=l.getLeftChar().getChecksumPortion(),o++;var u=l.getRightChar();u!=null&&(a+=u.getChecksumPortion(),o++)}a%=211;var c=211*(o-4)+a;return c===n.getValue()},e.getNextSecondBar=function(r,n){var i;return r.get(n)?(i=r.getNextUnset(n),i=r.getNextSet(i)):(i=r.getNextSet(n),i=r.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(r,n,i){var a=n.length%2===0;this.startFromEven&&(a=!a);var o,s=!0,l=-1;do this.findNextPair(r,n,l),o=this.parseFoundFinderPattern(r,i,a),o===null?l=e.getNextSecondBar(r,this.startEnd[0]):s=!1;while(s);var u=this.decodeDataCharacter(r,o,a,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new k;var c;try{c=this.decodeDataCharacter(r,o,a,!1)}catch(f){c=null,console.log(f)}return new Qd(u,c,o,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=r.getSize(),s;if(i>=0)s=i;else if(this.isEmptyPair(n))s=0;else{var l=n[n.length-1];s=l.getFinderPattern().getStartEnd()[1]}var u=n.length%2!==0;this.startFromEven&&(u=!u);for(var c=!1;s<o&&(c=!r.get(s),!!c);)s++;for(var f=0,d=s,p=s;p<o;p++)if(r.get(p)!==c)a[f]++;else{if(f===3){if(u&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=d,this.startEnd[1]=p;return}u&&e.reverseCounters(a),d+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,f--}else f++;a[f]=1,c=!c}throw new k},e.reverseCounters=function(r){for(var n=r.length,i=0;i<n/2;++i){var a=r[i];r[i]=r[n-i-1],r[n-i-1]=a}},e.prototype.parseFoundFinderPattern=function(r,n,i){var a,o,s;if(i){for(var l=this.startEnd[0]-1;l>=0&&!r.get(l);)l--;l++,a=this.startEnd[0]-l,o=l,s=this.startEnd[1]}else o=this.startEnd[0],s=r.getNextUnset(this.startEnd[1]+1),a=s-this.startEnd[1];var u=this.getDecodeFinderCounters();be.arraycopy(u,0,u,1,u.length-1),u[0]=a;var c;try{c=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new up(c,[o,s],o,s,n)},e.prototype.decodeDataCharacter=function(r,n,i,a){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(a)e.recordPatternInReverse(r,n.getStartEnd()[0],o);else{e.recordPattern(r,n.getStartEnd()[1],o);for(var l=0,u=o.length-1;l<u;l++,u--){var c=o[l];o[l]=o[u],o[u]=c}}var f=17,d=ve.sum(new Int32Array(o))/f,p=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(d-p)/p>.3)throw new k;for(var v=this.getOddCounts(),g=this.getEvenCounts(),w=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),l=0;l<o.length;l++){var m=1*o[l]/d,y=m+.5;if(y<1){if(m<.3)throw new k;y=1}else if(y>8){if(m>8.7)throw new k;y=8}var _=l/2;l&1?(g[_]=y,x[_]=m-y):(v[_]=y,w[_]=m-y)}this.adjustOddEvenCounts(f);for(var A=4*n.getValue()+(i?0:2)+(a?0:1)-1,C=0,E=0,l=v.length-1;l>=0;l--){if(e.isNotA1left(n,i,a)){var b=e.WEIGHTS[A][2*l];E+=v[l]*b}C+=v[l]}for(var D=0,l=g.length-1;l>=0;l--)if(e.isNotA1left(n,i,a)){var b=e.WEIGHTS[A][2*l+1];D+=g[l]*b}var R=E+D;if(C&1||C>13||C<4)throw new k;var J=(13-C)/2,q=e.SYMBOL_WIDEST[J],ee=9-q,z=ii.getRSSvalue(v,q,!0),te=ii.getRSSvalue(g,ee,!1),ce=e.EVEN_TOTAL_SUBSET[J],P=e.GSUM[J],O=z*ce+te+P;return new ts(O,R)},e.isNotA1left=function(r,n,i){return!(r.getValue()===0&&n&&i)},e.prototype.adjustOddEvenCounts=function(r){var n=ve.sum(new Int32Array(this.getOddCounts())),i=ve.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;n>13?o=!0:n<4&&(a=!0);var s=!1,l=!1;i>13?l=!0:i<4&&(s=!0);var u=n+i-r,c=(n&1)===1,f=(i&1)===0;if(u===1)if(c){if(f)throw new k;o=!0}else{if(!f)throw new k;l=!0}else if(u===-1)if(c){if(f)throw new k;a=!0}else{if(!f)throw new k;s=!0}else if(u===0){if(c){if(!f)throw new k;n<i?(a=!0,l=!0):(o=!0,s=!0)}else if(f)throw new k}else throw new k;if(a){if(o)throw new k;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(l)throw new k;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(yn),D_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),R_=function(t){D_(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(ts),P_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hl=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jd=function(t){P_(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,i){var a,o,s,l,u=this.decodePair(n,!1,r,i);e.addOrTally(this.possibleLeftPairs,u),n.reverse();var c=this.decodePair(n,!0,r,i);e.addOrTally(this.possibleRightPairs,c),n.reverse();try{for(var f=hl(this.possibleLeftPairs),d=f.next();!d.done;d=f.next()){var p=d.value;if(p.getCount()>1)try{for(var v=(s=void 0,hl(this.possibleRightPairs)),g=v.next();!g.done;g=v.next()){var w=g.value;if(w.getCount()>1&&e.checkChecksum(p,w))return e.constructResult(p,w)}}catch(x){s={error:x}}finally{try{g&&!g.done&&(l=v.return)&&l.call(v)}finally{if(s)throw s.error}}}}catch(x){a={error:x}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(a)throw a.error}}throw new k},e.addOrTally=function(r,n){var i,a;if(n!=null){var o=!1;try{for(var s=hl(r),l=s.next();!l.done;l=s.next()){var u=l.value;if(u.getValue()===n.getValue()){u.incrementCount(),o=!0;break}}}catch(c){i={error:c}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}o||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var i=4537077*r.getValue()+n.getValue(),a=new String(i).toString(),o=new ne,s=13-a.length;s>0;s--)o.append("0");o.append(a);for(var l=0,s=0;s<13;s++){var u=o.charAt(s).charCodeAt(0)-48;l+=s&1?u:3*u}l=10-l%10,l===10&&(l=0),o.append(l.toString());var c=r.getFinderPattern().getResultPoints(),f=n.getFinderPattern().getResultPoints();return new ht(o.toString(),null,0,[c[0],c[1],f[0],f[1]],Z.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var i=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,a=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(r,n,i,a){try{var o=this.findFinderPattern(r,n),s=this.parseFoundFinderPattern(r,i,n,o),l=a==null?null:a.get(ke.NEED_RESULT_POINT_CALLBACK);if(l!=null){var u=(o[0]+o[1])/2;n&&(u=r.getSize()-1-u),l.foundPossibleResultPoint(new W(u,i))}var c=this.decodeDataCharacter(r,s,!0),f=this.decodeDataCharacter(r,s,!1);return new R_(1597*c.getValue()+f.getValue(),c.getChecksumPortion()+4*f.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)qe.recordPatternInReverse(r,n.getStartEnd()[0],a);else{qe.recordPattern(r,n.getStartEnd()[1]+1,a);for(var s=0,l=a.length-1;s<l;s++,l--){var u=a[s];a[s]=a[l],a[l]=u}}for(var c=i?16:15,f=ve.sum(new Int32Array(a))/c,d=this.getOddCounts(),p=this.getEvenCounts(),v=this.getOddRoundingErrors(),g=this.getEvenRoundingErrors(),s=0;s<a.length;s++){var w=a[s]/f,x=Math.floor(w+.5);x<1?x=1:x>8&&(x=8);var m=Math.floor(s/2);s&1?(p[m]=x,g[m]=w-x):(d[m]=x,v[m]=w-x)}this.adjustOddEvenCounts(i,c);for(var y=0,_=0,s=d.length-1;s>=0;s--)_*=9,_+=d[s],y+=d[s];for(var A=0,C=0,s=p.length-1;s>=0;s--)A*=9,A+=p[s],C+=p[s];var E=_+3*A;if(i){if(y&1||y>12||y<4)throw new k;var b=(12-y)/2,D=e.OUTSIDE_ODD_WIDEST[b],R=9-D,J=ii.getRSSvalue(d,D,!1),q=ii.getRSSvalue(p,R,!0),ee=e.OUTSIDE_EVEN_TOTAL_SUBSET[b],z=e.OUTSIDE_GSUM[b];return new ts(J*ee+q+z,E)}else{if(C&1||C>10||C<4)throw new k;var b=(10-C)/2,D=e.INSIDE_ODD_WIDEST[b],R=9-D,J=ii.getRSSvalue(d,D,!0),q=ii.getRSSvalue(p,R,!1),te=e.INSIDE_ODD_TOTAL_SUBSET[b],z=e.INSIDE_GSUM[b];return new ts(q*te+J+z,E)}},e.prototype.findFinderPattern=function(r,n){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=r.getSize(),o=!1,s=0;s<a&&(o=!r.get(s),n!==o);)s++;for(var l=0,u=s,c=s;c<a;c++)if(r.get(c)!==o)i[l]++;else{if(l===3){if(yn.isFinderPattern(i))return[u,c];u+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,o=!o}throw new k},e.prototype.parseFoundFinderPattern=function(r,n,i,a){for(var o=r.get(a[0]),s=a[0]-1;s>=0&&o!==r.get(s);)s--;s++;var l=a[0]-s,u=this.getDecodeFinderCounters(),c=new Int32Array(u.length);be.arraycopy(u,0,c,1,u.length-1),c[0]=l;var f=this.parseFinderValue(c,e.FINDER_PATTERNS),d=s,p=a[1];return i&&(d=r.getSize()-1-d,p=r.getSize()-1-p),new up(f,[s,a[1]],d,p,n)},e.prototype.adjustOddEvenCounts=function(r,n){var i=ve.sum(new Int32Array(this.getOddCounts())),a=ve.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1,l=!1,u=!1;r?(i>12?s=!0:i<4&&(o=!0),a>12?u=!0:a<4&&(l=!0)):(i>11?s=!0:i<5&&(o=!0),a>10?u=!0:a<4&&(l=!0));var c=i+a-n,f=(i&1)===(r?1:0),d=(a&1)===1;if(c===1)if(f){if(d)throw new k;s=!0}else{if(!d)throw new k;u=!0}else if(c===-1)if(f){if(d)throw new k;o=!0}else{if(!d)throw new k;l=!0}else if(c===0){if(f){if(!d)throw new k;i<a?(o=!0,u=!0):(s=!0,l=!0)}else if(d)throw new k}else throw new k;if(o){if(s)throw new k;yn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&yn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(u)throw new k;yn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&yn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(yn),M_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yi=function(t){M_(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var i=r?r.get(ke.POSSIBLE_FORMATS):null,a=r&&r.get(ke.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=r&&r.get(ke.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Z.EAN_13)||i.includes(Z.UPC_A)||i.includes(Z.EAN_8)||i.includes(Z.UPC_E))&&n.readers.push(new dl(r)),i.includes(Z.CODE_39)&&n.readers.push(new Hd(a,o)),i.includes(Z.CODE_93)&&n.readers.push(new Vd),i.includes(Z.CODE_128)&&n.readers.push(new zd),i.includes(Z.ITF)&&n.readers.push(new Wd),i.includes(Z.CODABAR)&&n.readers.push(new n_),i.includes(Z.RSS_14)&&n.readers.push(new Jd),i.includes(Z.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new k_))),n.readers.length===0&&(n.readers.push(new dl(r)),n.readers.push(new Hd),n.readers.push(new Vd),n.readers.push(new dl(r)),n.readers.push(new zd),n.readers.push(new Wd),n.readers.push(new Jd)),n}return e.prototype.decodeRow=function(r,n,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(r,n,i)}catch{}throw new k},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(qe),j_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){j_(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new Yi(n),r,n)||this}return e})(Ni);var eh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ye=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),ge=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),L_=function(){function t(e,r,n,i,a,o){var s,l;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var u=0,c=o.getECCodewords(),f=o.getECBlocks();try{for(var d=eh(f),p=d.next();!p.done;p=d.next()){var v=p.value;u+=v.getCount()*(v.getDataCodewords()+c)}}catch(g){s={error:g}}finally{try{p&&!p.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,i;if(e&1||r&1)throw new B;try{for(var a=eh(t.VERSIONS),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===r)return s}}catch(l){n={error:l}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}throw new B},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new ye(5,new ge(1,3))),new t(2,12,12,10,10,new ye(7,new ge(1,5))),new t(3,14,14,12,12,new ye(10,new ge(1,8))),new t(4,16,16,14,14,new ye(12,new ge(1,12))),new t(5,18,18,16,16,new ye(14,new ge(1,18))),new t(6,20,20,18,18,new ye(18,new ge(1,22))),new t(7,22,22,20,20,new ye(20,new ge(1,30))),new t(8,24,24,22,22,new ye(24,new ge(1,36))),new t(9,26,26,24,24,new ye(28,new ge(1,44))),new t(10,32,32,14,14,new ye(36,new ge(1,62))),new t(11,36,36,16,16,new ye(42,new ge(1,86))),new t(12,40,40,18,18,new ye(48,new ge(1,114))),new t(13,44,44,20,20,new ye(56,new ge(1,144))),new t(14,48,48,22,22,new ye(68,new ge(1,174))),new t(15,52,52,24,24,new ye(42,new ge(2,102))),new t(16,64,64,14,14,new ye(56,new ge(2,140))),new t(17,72,72,16,16,new ye(36,new ge(4,92))),new t(18,80,80,18,18,new ye(48,new ge(4,114))),new t(19,88,88,20,20,new ye(56,new ge(4,144))),new t(20,96,96,22,22,new ye(68,new ge(4,174))),new t(21,104,104,24,24,new ye(56,new ge(6,136))),new t(22,120,120,18,18,new ye(68,new ge(6,175))),new t(23,132,132,20,20,new ye(62,new ge(8,163))),new t(24,144,144,22,22,new ye(62,new ge(8,156),new ge(2,155))),new t(25,8,18,6,16,new ye(7,new ge(1,5))),new t(26,8,32,6,14,new ye(11,new ge(1,10))),new t(27,12,26,10,24,new ye(14,new ge(1,16))),new t(28,12,36,10,16,new ye(18,new ge(1,22))),new t(29,16,36,14,16,new ye(24,new ge(1,32))),new t(30,16,48,14,22,new ye(28,new ge(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),B_=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new B;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new _r(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return L_.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),s=!1,l=!1,u=!1,c=!1;do if(n===a&&i===0&&!s)e[r++]=this.readCorner1(a,o)&255,n-=2,i+=2,s=!0;else if(n===a-2&&i===0&&o&3&&!l)e[r++]=this.readCorner2(a,o)&255,n-=2,i+=2,l=!0;else if(n===a+4&&i===2&&!(o&7)&&!u)e[r++]=this.readCorner3(a,o)&255,n-=2,i+=2,u=!0;else if(n===a-2&&i===0&&(o&7)===4&&!c)e[r++]=this.readCorner4(a,o)&255,n-=2,i+=2,c=!0;else{do n<a&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,a,o)&255),n-=2,i+=2;while(n>=0&&i<o);n+=1,i+=3;do n>=0&&i<o&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,a,o)&255),n+=2,i-=2;while(n<a&&i>=0);n+=3,i+=1}while(n<a||i<o);if(r!==this.version.getTotalCodewords())throw new B;return e},t.prototype.readModule=function(e,r,n,i){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,i){var a=0;return this.readModule(e-2,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e-2,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r,n,i)&&(a|=1),a<<=1,this.readModule(e,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e,r,n,i)&&(a|=1),a},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new Q("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=r/i|0,s=n/a|0,l=o*i,u=s*a,c=new _r(u,l),f=0;f<o;++f)for(var d=f*i,p=0;p<s;++p)for(var v=p*a,g=0;g<i;++g)for(var w=f*(i+2)+1+g,x=d+g,m=0;m<a;++m){var y=p*(a+2)+1+m;if(e.get(y,w)){var _=v+m;c.set(_,x)}}return c},t}(),th=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},F_=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,i,a,o,s=r.getECBlocks(),l=0,u=s.getECBlocks();try{for(var c=th(u),f=c.next();!f.done;f=c.next()){var d=f.value;l+=d.getCount()}}catch(z){n={error:z}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}var p=new Array(l),v=0;try{for(var g=th(u),w=g.next();!w.done;w=g.next())for(var d=w.value,x=0;x<d.getCount();x++){var m=d.getDataCodewords(),y=s.getECCodewords()+m;p[v++]=new t(m,new Uint8Array(y))}}catch(z){a={error:z}}finally{try{w&&!w.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}for(var _=p[0].codewords.length,A=_-s.getECCodewords(),C=A-1,E=0,x=0;x<C;x++)for(var b=0;b<v;b++)p[b].codewords[x]=e[E++];for(var D=r.getVersionNumber()===24,R=D?8:v,b=0;b<R;b++)p[b].codewords[A-1]=e[E++];for(var J=p[0].codewords.length,x=A;x<J;x++)for(var b=0;b<v;b++){var q=D?(b+8)%v:b,ee=D&&q>7?x-1:x;p[q].codewords[ee]=e[E++]}if(E!==e.length)throw new Q;return p},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),dp=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Q(""+e);var r=0,n=this.bitOffset,i=this.byteOffset,a=this.bytes;if(n>0){var o=8-n,s=e<o?e:o,l=o-s,u=255>>8-s<<l;r=(a[i]&u)>>l,e-=s,n+=s,n===8&&(n=0,i++)}if(e>0){for(;e>=8;)r=r<<8|a[i]&255,i++,e-=8;if(e>0){var l=8-e,u=255>>l<<l;r=r<<e|(a[i]&u)>>l,n+=e}}return this.bitOffset=n,this.byteOffset=i,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),$e;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})($e||($e={}));var U_=function(){function t(){}return t.decode=function(e){var r=new dp(e),n=new ne,i=new ne,a=new Array,o=$e.ASCII_ENCODE;do if(o===$e.ASCII_ENCODE)o=this.decodeAsciiSegment(r,n,i);else{switch(o){case $e.C40_ENCODE:this.decodeC40Segment(r,n);break;case $e.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case $e.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case $e.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case $e.BASE256_ENCODE:this.decodeBase256Segment(r,n,a);break;default:throw new B}o=$e.ASCII_ENCODE}while(o!==$e.PAD_ENCODE&&r.available()>0);return i.length()>0&&n.append(i.toString()),new bs(e,n.toString(),a.length===0?null:a,null)},t.decodeAsciiSegment=function(e,r,n){var i=!1;do{var a=e.readBits(8);if(a===0)throw new B;if(a<=128)return i&&(a+=128),r.append(String.fromCharCode(a-1)),$e.ASCII_ENCODE;if(a===129)return $e.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&r.append("0"),r.append(""+o)}else switch(a){case 230:return $e.C40_ENCODE;case 231:return $e.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return $e.ANSIX12_ENCODE;case 239:return $e.TEXT_ENCODE;case 240:return $e.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new B;break}}while(e.available()>0);return $e.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var l=i[s];switch(a){case 0:if(l<3)a=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[l];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new B;break;case 1:n?(r.append(String.fromCharCode(l+128)),n=!1):r.append(String.fromCharCode(l)),a=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[l];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(l){case 27:r.append("");break;case 30:n=!0;break;default:throw new B}a=0;break;case 3:n?(r.append(String.fromCharCode(l+224)),n=!1):r.append(String.fromCharCode(l+96)),a=0;break;default:throw new B}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var l=i[s];switch(a){case 0:if(l<3)a=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[l];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new B;break;case 1:n?(r.append(String.fromCharCode(l+128)),n=!1):r.append(String.fromCharCode(l)),a=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[l];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(l){case 27:r.append("");break;case 30:n=!0;break;default:throw new B}a=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[l];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u),a=0}else throw new B;break;default:throw new B}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),n);for(var a=0;a<3;a++){var o=n[a];switch(o){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(o<14)r.append(String.fromCharCode(o+44));else if(o<40)r.append(String.fromCharCode(o+51));else throw new B;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var i=(e<<8)+r-1,a=Math.floor(i/1600);n[0]=a,i-=a*1600,a=Math.floor(i/40),n[1]=a,n[2]=i-a*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}i&32||(i|=64),r.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new B;for(var s=new Uint8Array(o),l=0;l<o;l++){if(e.available()<8)throw new B;s[l]=this.unrandomize255State(e.readBits(8),i++)}n.push(s);try{r.append(qt.decode(s,ue.ISO88591))}catch(u){throw new Fa("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,i=e-n;return i>=0?i:i+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),$_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},z_=function(){function t(){this.rsDecoder=new Is(At.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,i=new B_(e),a=i.getVersion(),o=i.readCodewords(),s=F_.getDataBlocks(o,a),l=0;try{for(var u=$_(s),c=u.next();!c.done;c=u.next()){var f=c.value;l+=f.getNumDataCodewords()}}catch(y){r={error:y}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}for(var d=new Uint8Array(l),p=s.length,v=0;v<p;v++){var g=s[v],w=g.getCodewords(),x=g.getNumDataCodewords();this.correctErrors(w,x);for(var m=0;m<x;m++)d[m*p+v]=w[m]}return U_.decode(d)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new Je}for(var i=0;i<r;i++)e[i]=n[i]},t}(),H_=function(){function t(e){this.image=e,this.rectangleDetector=new Du(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new k;r=this.shiftToModuleCenter(r);var n=r[0],i=r[1],a=r[2],o=r[3],s=this.transitionsBetween(n,o)+1,l=this.transitionsBetween(a,o)+1;(s&1)===1&&(s+=1),(l&1)===1&&(l+=1),4*s<7*l&&4*l<7*s&&(s=l=Math.max(s,l));var u=t.sampleGrid(this.image,n,i,a,o,s,l);return new Vc(u,[n,i,a,o])},t.shiftPoint=function(e,r,n){var i=(r.getX()-e.getX())/(n+1),a=(r.getY()-e.getY())/(n+1);return new W(e.getX()+i,e.getY()+a)},t.moveAway=function(e,r,n){var i=e.getX(),a=e.getY();return i<r?i-=1:i+=1,a<n?a-=1:a+=1,new W(i,a)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],i=e[3],a=e[2],o=this.transitionsBetween(r,n),s=this.transitionsBetween(n,i),l=this.transitionsBetween(i,a),u=this.transitionsBetween(a,r),c=o,f=[a,r,n,i];return c>s&&(c=s,f[0]=r,f[1]=n,f[2]=i,f[3]=a),c>l&&(c=l,f[0]=n,f[1]=i,f[2]=a,f[3]=r),c>u&&(f[0]=i,f[1]=a,f[2]=r,f[3]=n),f},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(r,a),s=t.shiftPoint(n,i,(o+1)*4),l=t.shiftPoint(i,n,(o+1)*4),u=this.transitionsBetween(s,r),c=this.transitionsBetween(l,a);return u<c?(e[0]=r,e[1]=n,e[2]=i,e[3]=a):(e[0]=n,e[1]=i,e[2]=a,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(r,a),s=this.transitionsBetween(n,a),l=t.shiftPoint(r,n,(s+1)*4),u=t.shiftPoint(i,n,(o+1)*4);o=this.transitionsBetween(l,a),s=this.transitionsBetween(u,a);var c=new W(a.getX()+(i.getX()-n.getX())/(o+1),a.getY()+(i.getY()-n.getY())/(o+1)),f=new W(a.getX()+(r.getX()-n.getX())/(s+1),a.getY()+(r.getY()-n.getY())/(s+1));if(!this.isValid(c))return this.isValid(f)?f:null;if(!this.isValid(f))return c;var d=this.transitionsBetween(l,c)+this.transitionsBetween(u,c),p=this.transitionsBetween(l,f)+this.transitionsBetween(u,f);return d>p?c:f},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(r,a)+1,s=this.transitionsBetween(i,a)+1,l=t.shiftPoint(r,n,s*4),u=t.shiftPoint(i,n,o*4);o=this.transitionsBetween(l,a)+1,s=this.transitionsBetween(u,a)+1,(o&1)===1&&(o+=1),(s&1)===1&&(s+=1);var c=(r.getX()+n.getX()+i.getX()+a.getX())/4,f=(r.getY()+n.getY()+i.getY()+a.getY())/4;r=t.moveAway(r,c,f),n=t.moveAway(n,c,f),i=t.moveAway(i,c,f),a=t.moveAway(a,c,f);var d,p;return l=t.shiftPoint(r,n,s*4),l=t.shiftPoint(l,a,o*4),d=t.shiftPoint(n,r,s*4),d=t.shiftPoint(d,i,o*4),u=t.shiftPoint(i,a,s*4),u=t.shiftPoint(u,n,o*4),p=t.shiftPoint(a,i,s*4),p=t.shiftPoint(p,r,o*4),[l,d,u,p]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,i,a,o,s){var l=Wc.getInstance();return l.sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,r.getX(),r.getY(),a.getX(),a.getY(),i.getX(),i.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(r.getX()),o=Math.trunc(r.getY()),s=Math.abs(o-i)>Math.abs(a-n);if(s){var l=n;n=i,i=l,l=a,a=o,o=l}for(var u=Math.abs(a-n),c=Math.abs(o-i),f=-u/2,d=i<o?1:-1,p=n<a?1:-1,v=0,g=this.image.get(s?i:n,s?n:i),w=n,x=i;w!==a;w+=p){var m=this.image.get(s?x:w,s?w:x);if(m!==g&&(v++,g=m),f+=c,f>0){if(x===o)break;x+=d,f-=u}}return v},t}(),Mu=function(){function t(){this.decoder=new z_}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,i;if(r!=null&&r.has(ke.PURE_BARCODE)){var a=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(a),i=t.NO_POINTS}else{var o=new H_(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),i=o.getPoints()}var s=n.getRawBytes(),l=new ht(n.getText(),s,8*s.length,i,Z.DATA_MATRIX,be.currentTimeMillis()),u=n.getByteSegments();u!=null&&l.putMetadata(at.BYTE_SEGMENTS,u);var c=n.getECLevel();return c!=null&&l.putMetadata(at.ERROR_CORRECTION_LEVEL,c),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new k;var i=this.moduleSize(r,e),a=r[1],o=n[1],s=r[0],l=n[0],u=(l-s+1)/i,c=(o-a+1)/i;if(u<=0||c<=0)throw new k;var f=i/2;a+=f,s+=f;for(var d=new _r(u,c),p=0;p<c;p++)for(var v=a+p*i,g=0;g<u;g++)e.get(s+g*i,v)&&d.set(g,p);return d},t.moduleSize=function(e,r){for(var n=r.getWidth(),i=e[0],a=e[1];i<n&&r.get(i,a);)i++;if(i===n)throw new k;var o=i-e[0];if(o===0)throw new k;return o},t.NO_POINTS=[],t}(),V_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){V_(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Mu,r)||this}return e})(Ni);var ai;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(ai||(ai={}));var W_=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new tr(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new Q;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(ai.L,"L",1),t.M=new t(ai.M,"M",0),t.Q=new t(ai.Q,"Q",3),t.H=new t(ai.H,"H",2),t}(),G_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hp=function(){function t(e){this.errorCorrectionLevel=W_.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return ae.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var s=G_(t.FORMAT_INFO_DECODE_LOOKUP),l=s.next();!l.done;l=s.next()){var u=l.value,c=u[0];if(c===e||c===r)return new t(u[1]);var f=t.numBitsDiffering(e,c);f<a&&(o=u[1],a=f),e!==r&&(f=t.numBitsDiffering(r,c),f<a&&(o=u[1],a=f))}}catch(d){n={error:d}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a<=3?new t(o):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),X_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},I=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,i=this.ecBlocks;try{for(var a=X_(i),o=a.next();!o.done;o=a.next()){var s=o.value;n+=s.getCount()}}catch(l){e={error:l}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),S=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),q_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},In=function(){function t(e,r){for(var n,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=a;var s=0,l=a[0].getECCodewordsPerBlock(),u=a[0].getECBlocks();try{for(var c=q_(u),f=c.next();!f.done;f=c.next()){var d=f.value;s+=d.getCount()*(d.getDataCodewords()+l)}}catch(p){n={error:p}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}this.totalCodewords=s}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new B;try{return this.getVersionForNumber((e-17)/4)}catch{throw new B}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new Q;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var a=t.VERSION_DECODE_INFO[i];if(a===e)return t.getVersionForNumber(i+7);var o=hp.numBitsDiffering(e,a);o<r&&(n=i+7,r=o)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new _r(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;i<n;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<n;o++)i===0&&(o===0||o===n-1)||i===n-1&&o===0||r.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new I(7,new S(1,19)),new I(10,new S(1,16)),new I(13,new S(1,13)),new I(17,new S(1,9))),new t(2,Int32Array.from([6,18]),new I(10,new S(1,34)),new I(16,new S(1,28)),new I(22,new S(1,22)),new I(28,new S(1,16))),new t(3,Int32Array.from([6,22]),new I(15,new S(1,55)),new I(26,new S(1,44)),new I(18,new S(2,17)),new I(22,new S(2,13))),new t(4,Int32Array.from([6,26]),new I(20,new S(1,80)),new I(18,new S(2,32)),new I(26,new S(2,24)),new I(16,new S(4,9))),new t(5,Int32Array.from([6,30]),new I(26,new S(1,108)),new I(24,new S(2,43)),new I(18,new S(2,15),new S(2,16)),new I(22,new S(2,11),new S(2,12))),new t(6,Int32Array.from([6,34]),new I(18,new S(2,68)),new I(16,new S(4,27)),new I(24,new S(4,19)),new I(28,new S(4,15))),new t(7,Int32Array.from([6,22,38]),new I(20,new S(2,78)),new I(18,new S(4,31)),new I(18,new S(2,14),new S(4,15)),new I(26,new S(4,13),new S(1,14))),new t(8,Int32Array.from([6,24,42]),new I(24,new S(2,97)),new I(22,new S(2,38),new S(2,39)),new I(22,new S(4,18),new S(2,19)),new I(26,new S(4,14),new S(2,15))),new t(9,Int32Array.from([6,26,46]),new I(30,new S(2,116)),new I(22,new S(3,36),new S(2,37)),new I(20,new S(4,16),new S(4,17)),new I(24,new S(4,12),new S(4,13))),new t(10,Int32Array.from([6,28,50]),new I(18,new S(2,68),new S(2,69)),new I(26,new S(4,43),new S(1,44)),new I(24,new S(6,19),new S(2,20)),new I(28,new S(6,15),new S(2,16))),new t(11,Int32Array.from([6,30,54]),new I(20,new S(4,81)),new I(30,new S(1,50),new S(4,51)),new I(28,new S(4,22),new S(4,23)),new I(24,new S(3,12),new S(8,13))),new t(12,Int32Array.from([6,32,58]),new I(24,new S(2,92),new S(2,93)),new I(22,new S(6,36),new S(2,37)),new I(26,new S(4,20),new S(6,21)),new I(28,new S(7,14),new S(4,15))),new t(13,Int32Array.from([6,34,62]),new I(26,new S(4,107)),new I(22,new S(8,37),new S(1,38)),new I(24,new S(8,20),new S(4,21)),new I(22,new S(12,11),new S(4,12))),new t(14,Int32Array.from([6,26,46,66]),new I(30,new S(3,115),new S(1,116)),new I(24,new S(4,40),new S(5,41)),new I(20,new S(11,16),new S(5,17)),new I(24,new S(11,12),new S(5,13))),new t(15,Int32Array.from([6,26,48,70]),new I(22,new S(5,87),new S(1,88)),new I(24,new S(5,41),new S(5,42)),new I(30,new S(5,24),new S(7,25)),new I(24,new S(11,12),new S(7,13))),new t(16,Int32Array.from([6,26,50,74]),new I(24,new S(5,98),new S(1,99)),new I(28,new S(7,45),new S(3,46)),new I(24,new S(15,19),new S(2,20)),new I(30,new S(3,15),new S(13,16))),new t(17,Int32Array.from([6,30,54,78]),new I(28,new S(1,107),new S(5,108)),new I(28,new S(10,46),new S(1,47)),new I(28,new S(1,22),new S(15,23)),new I(28,new S(2,14),new S(17,15))),new t(18,Int32Array.from([6,30,56,82]),new I(30,new S(5,120),new S(1,121)),new I(26,new S(9,43),new S(4,44)),new I(28,new S(17,22),new S(1,23)),new I(28,new S(2,14),new S(19,15))),new t(19,Int32Array.from([6,30,58,86]),new I(28,new S(3,113),new S(4,114)),new I(26,new S(3,44),new S(11,45)),new I(26,new S(17,21),new S(4,22)),new I(26,new S(9,13),new S(16,14))),new t(20,Int32Array.from([6,34,62,90]),new I(28,new S(3,107),new S(5,108)),new I(26,new S(3,41),new S(13,42)),new I(30,new S(15,24),new S(5,25)),new I(28,new S(15,15),new S(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new I(28,new S(4,116),new S(4,117)),new I(26,new S(17,42)),new I(28,new S(17,22),new S(6,23)),new I(30,new S(19,16),new S(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new I(28,new S(2,111),new S(7,112)),new I(28,new S(17,46)),new I(30,new S(7,24),new S(16,25)),new I(24,new S(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new I(30,new S(4,121),new S(5,122)),new I(28,new S(4,47),new S(14,48)),new I(30,new S(11,24),new S(14,25)),new I(30,new S(16,15),new S(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new I(30,new S(6,117),new S(4,118)),new I(28,new S(6,45),new S(14,46)),new I(30,new S(11,24),new S(16,25)),new I(30,new S(30,16),new S(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new I(26,new S(8,106),new S(4,107)),new I(28,new S(8,47),new S(13,48)),new I(30,new S(7,24),new S(22,25)),new I(30,new S(22,15),new S(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new I(28,new S(10,114),new S(2,115)),new I(28,new S(19,46),new S(4,47)),new I(28,new S(28,22),new S(6,23)),new I(30,new S(33,16),new S(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new I(30,new S(8,122),new S(4,123)),new I(28,new S(22,45),new S(3,46)),new I(30,new S(8,23),new S(26,24)),new I(30,new S(12,15),new S(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new I(30,new S(3,117),new S(10,118)),new I(28,new S(3,45),new S(23,46)),new I(30,new S(4,24),new S(31,25)),new I(30,new S(11,15),new S(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new I(30,new S(7,116),new S(7,117)),new I(28,new S(21,45),new S(7,46)),new I(30,new S(1,23),new S(37,24)),new I(30,new S(19,15),new S(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new I(30,new S(5,115),new S(10,116)),new I(28,new S(19,47),new S(10,48)),new I(30,new S(15,24),new S(25,25)),new I(30,new S(23,15),new S(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new I(30,new S(13,115),new S(3,116)),new I(28,new S(2,46),new S(29,47)),new I(30,new S(42,24),new S(1,25)),new I(30,new S(23,15),new S(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new I(30,new S(17,115)),new I(28,new S(10,46),new S(23,47)),new I(30,new S(10,24),new S(35,25)),new I(30,new S(19,15),new S(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new I(30,new S(17,115),new S(1,116)),new I(28,new S(14,46),new S(21,47)),new I(30,new S(29,24),new S(19,25)),new I(30,new S(11,15),new S(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new I(30,new S(13,115),new S(6,116)),new I(28,new S(14,46),new S(23,47)),new I(30,new S(44,24),new S(7,25)),new I(30,new S(59,16),new S(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new I(30,new S(12,121),new S(7,122)),new I(28,new S(12,47),new S(26,48)),new I(30,new S(39,24),new S(14,25)),new I(30,new S(22,15),new S(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new I(30,new S(6,121),new S(14,122)),new I(28,new S(6,47),new S(34,48)),new I(30,new S(46,24),new S(10,25)),new I(30,new S(2,15),new S(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new I(30,new S(17,122),new S(4,123)),new I(28,new S(29,46),new S(14,47)),new I(30,new S(49,24),new S(10,25)),new I(30,new S(24,15),new S(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new I(30,new S(4,122),new S(18,123)),new I(28,new S(13,46),new S(32,47)),new I(30,new S(48,24),new S(14,25)),new I(30,new S(42,15),new S(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new I(30,new S(20,117),new S(4,118)),new I(28,new S(40,47),new S(7,48)),new I(30,new S(43,24),new S(22,25)),new I(30,new S(10,15),new S(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new I(30,new S(19,118),new S(6,119)),new I(28,new S(18,47),new S(31,48)),new I(30,new S(34,24),new S(34,25)),new I(30,new S(20,15),new S(61,16)))],t}(),Ye;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(Ye||(Ye={}));var rh=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var i=0;i<r;i++)this.isMasked(n,i)&&e.flip(i,n)},t.values=new Map([[Ye.DATA_MASK_000,new t(Ye.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[Ye.DATA_MASK_001,new t(Ye.DATA_MASK_001,function(e,r){return(e&1)===0})],[Ye.DATA_MASK_010,new t(Ye.DATA_MASK_010,function(e,r){return r%3===0})],[Ye.DATA_MASK_011,new t(Ye.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[Ye.DATA_MASK_100,new t(Ye.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[Ye.DATA_MASK_101,new t(Ye.DATA_MASK_101,function(e,r){return e*r%6===0})],[Ye.DATA_MASK_110,new t(Ye.DATA_MASK_110,function(e,r){return e*r%6<3})],[Ye.DATA_MASK_111,new t(Ye.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),K_=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new B;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,n=i-1;n>=o;n--)a=this.copyBit(8,n,a);for(var r=i-8;r<i;r++)a=this.copyBit(r,8,a);if(this.parsedFormatInfo=hp.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new B},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return In.getVersionForNumber(r);for(var n=0,i=e-11,a=5;a>=0;a--)for(var o=e-9;o>=i;o--)n=this.copyBit(o,a,n);var s=In.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;n=0;for(var o=5;o>=0;o--)for(var a=e-9;a>=i;a--)n=this.copyBit(o,a,n);if(s=In.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new B},t.prototype.copyBit=function(e,r,n){var i=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return i?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=rh.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);for(var a=r.buildFunctionPattern(),o=!0,s=new Uint8Array(r.getTotalCodewords()),l=0,u=0,c=0,f=i-1;f>0;f-=2){f===6&&f--;for(var d=0;d<i;d++)for(var p=o?i-1-d:d,v=0;v<2;v++)a.get(f-v,p)||(c++,u<<=1,this.bitMatrix.get(f-v,p)&&(u|=1),c===8&&(s[l++]=u,c=0,u=0));o=!o}if(l!==r.getTotalCodewords())throw new B;return s},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=rh.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var i=r+1,a=e.getHeight();i<a;i++)e.get(r,i)!==e.get(i,r)&&(e.flip(i,r),e.flip(r,i))},t}(),nh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y_=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var i,a,o,s;if(e.length!==r.getTotalCodewords())throw new Q;var l=r.getECBlocksForLevel(n),u=0,c=l.getECBlocks();try{for(var f=nh(c),d=f.next();!d.done;d=f.next()){var p=d.value;u+=p.getCount()}}catch(ee){i={error:ee}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}var v=new Array(u),g=0;try{for(var w=nh(c),x=w.next();!x.done;x=w.next())for(var p=x.value,m=0;m<p.getCount();m++){var y=p.getDataCodewords(),_=l.getECCodewordsPerBlock()+y;v[g++]=new t(y,new Uint8Array(_))}}catch(ee){o={error:ee}}finally{try{x&&!x.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}for(var A=v[0].codewords.length,C=v.length-1;C>=0;){var E=v[C].codewords.length;if(E===A)break;C--}C++;for(var b=A-l.getECCodewordsPerBlock(),D=0,m=0;m<b;m++)for(var R=0;R<g;R++)v[R].codewords[m]=e[D++];for(var R=C;R<g;R++)v[R].codewords[b]=e[D++];for(var J=v[0].codewords.length,m=b;m<J;m++)for(var R=0;R<g;R++){var q=R<C?m:m+1;v[R].codewords[q]=e[D++]}return v},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),$t;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})($t||($t={}));var Te=function(){function t(e,r,n,i){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new Q;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t($t.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t($t.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t($t.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t($t.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t($t.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t($t.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t($t.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t($t.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t($t.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t($t.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),Z_=function(){function t(){}return t.decode=function(e,r,n,i){var a=new dp(e),o=new ne,s=new Array,l=-1,u=-1;try{var c=null,f=!1,d=void 0;do{if(a.available()<4)d=Te.TERMINATOR;else{var p=a.readBits(4);d=Te.forBits(p)}switch(d){case Te.TERMINATOR:break;case Te.FNC1_FIRST_POSITION:case Te.FNC1_SECOND_POSITION:f=!0;break;case Te.STRUCTURED_APPEND:if(a.available()<16)throw new B;l=a.readBits(8),u=a.readBits(8);break;case Te.ECI:var v=t.parseECIValue(a);if(c=We.getCharacterSetECIByValue(v),c===null)throw new B;break;case Te.HANZI:var g=a.readBits(4),w=a.readBits(d.getCharacterCountBits(r));g===t.GB2312_SUBSET&&t.decodeHanziSegment(a,o,w);break;default:var x=a.readBits(d.getCharacterCountBits(r));switch(d){case Te.NUMERIC:t.decodeNumericSegment(a,o,x);break;case Te.ALPHANUMERIC:t.decodeAlphanumericSegment(a,o,x,f);break;case Te.BYTE:t.decodeByteSegment(a,o,x,c,s,i);break;case Te.KANJI:t.decodeKanjiSegment(a,o,x);break;default:throw new B}break}}while(d!==Te.TERMINATOR)}catch{throw new B}return new bs(e,o.toString(),s.length===0?null:s,n===null?null:n.toString(),l,u)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new B;for(var i=new Uint8Array(2*n),a=0;n>0;){var o=e.readBits(13),s=o/96<<8&4294967295|o%96;s<959?s+=41377:s+=42657,i[a]=s>>8&255,i[a+1]=s&255,a+=2,n--}try{r.append(qt.decode(i,ue.GB2312))}catch(l){throw new B(l)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new B;for(var i=new Uint8Array(2*n),a=0;n>0;){var o=e.readBits(13),s=o/192<<8&4294967295|o%192;s<7936?s+=33088:s+=49472,i[a]=s>>8,i[a+1]=s,a+=2,n--}try{r.append(qt.decode(i,ue.SHIFT_JIS))}catch(l){throw new B(l)}},t.decodeByteSegment=function(e,r,n,i,a,o){if(8*n>e.available())throw new B;for(var s=new Uint8Array(n),l=0;l<n;l++)s[l]=e.readBits(8);var u;i===null?u=ue.guessEncoding(s,o):u=i.getName();try{r.append(qt.decode(s,u))}catch(c){throw new B(c)}a.push(s)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new B;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,i){for(var a=r.length();n>1;){if(e.available()<11)throw new B;var o=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(o/45))),r.append(t.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new B;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var s=a;s<r.length();s++)r.charAt(s)==="%"&&(s<r.length()-1&&r.charAt(s+1)==="%"?r.deleteCharAt(s+1):r.setCharAt(s,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new B;var i=e.readBits(10);if(i>=1e3)throw new B;r.append(t.toAlphaNumericChar(Math.floor(i/100))),r.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),r.append(t.toAlphaNumericChar(i%10)),n-=3}if(n===2){if(e.available()<7)throw new B;var a=e.readBits(7);if(a>=100)throw new B;r.append(t.toAlphaNumericChar(Math.floor(a/10))),r.append(t.toAlphaNumericChar(a%10))}else if(n===1){if(e.available()<4)throw new B;var o=e.readBits(4);if(o>=10)throw new B;r.append(t.toAlphaNumericChar(o))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var i=e.readBits(16);return(r&31)<<16&4294967295|i}throw new B},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),pp=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),ih=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Q_=function(){function t(){this.rsDecoder=new Is(At.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(_r.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new K_(e),i=null;try{return this.decodeBitMatrixParser(n,r)}catch(o){i=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var a=this.decodeBitMatrixParser(n,r);return a.setOther(new pp(!0)),a}catch(o){throw i!==null?i:o}},t.prototype.decodeBitMatrixParser=function(e,r){var n,i,a,o,s=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),c=Y_.getDataBlocks(u,s,l),f=0;try{for(var d=ih(c),p=d.next();!p.done;p=d.next()){var v=p.value;f+=v.getNumDataCodewords()}}catch(C){n={error:C}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}var g=new Uint8Array(f),w=0;try{for(var x=ih(c),m=x.next();!m.done;m=x.next()){var v=m.value,y=v.getCodewords(),_=v.getNumDataCodewords();this.correctErrors(y,_);for(var A=0;A<_;A++)g[w++]=y[A]}}catch(C){a={error:C}}finally{try{m&&!m.done&&(o=x.return)&&o.call(x)}finally{if(a)throw a.error}}return Z_.decode(g,s,l,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new Je}for(var i=0;i<r;i++)e[i]=n[i]},t}(),J_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),e3=function(t){J_(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var a=Math.abs(r-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var a=(this.getX()+n)/2,o=(this.getY()+r)/2,s=(this.estimatedModuleSize+i)/2;return new e(a,o,s)},e}(W),t3=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},r3=function(){function t(e,r,n,i,a,o,s){this.image=e,this.startX=r,this.startY=n,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,i=e+n,a=this.startY+r/2,o=new Int32Array(3),s=this.image,l=0;l<r;l++){var u=a+(l&1?-Math.floor((l+1)/2):Math.floor((l+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var c=e;c<i&&!s.get(c,u);)c++;for(var f=0;c<i;){if(s.get(c,u))if(f===1)o[1]++;else if(f===2){if(this.foundPatternCross(o)){var d=this.handlePossibleCenter(o,u,c);if(d!==null)return d}o[0]=o[2],o[1]=1,o[2]=0,f=1}else o[++f]++;else f===1&&f++,o[f]++;c++}if(this.foundPatternCross(o)){var d=this.handlePossibleCenter(o,u,i);if(d!==null)return d}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new k},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,i=0;i<3;i++)if(Math.abs(r-e[i])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,i){var a=this.image,o=a.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var l=e;l>=0&&a.get(r,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&!a.get(r,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<o&&a.get(r,l)&&s[1]<=n;)s[1]++,l++;if(l===o||s[1]>n)return NaN;for(;l<o&&!a.get(r,l)&&s[2]<=n;)s[2]++,l++;if(s[2]>n)return NaN;var u=s[0]+s[1]+s[2];return 5*Math.abs(u-i)>=2*i?NaN:this.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var i,a,o=e[0]+e[1]+e[2],s=t.centerFromEnd(e,n),l=this.crossCheckVertical(r,s,2*e[1],o);if(!isNaN(l)){var u=(e[0]+e[1]+e[2])/3;try{for(var c=t3(this.possibleCenters),f=c.next();!f.done;f=c.next()){var d=f.value;if(d.aboutEquals(u,l,s))return d.combineEstimate(l,s,u)}}catch(v){i={error:v}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}var p=new e3(s,l,u);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},t}(),n3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),i3=function(t){n3(e,t);function e(r,n,i,a){var o=t.call(this,r,n)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var a=Math.abs(r-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var a=this.count+1,o=(this.count*this.getX()+n)/a,s=(this.count*this.getY()+r)/a,l=(this.count*this.estimatedModuleSize+i)/a;return new e(o,s,l,a)},e}(W),a3=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),Ui=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o3=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(ke.TRY_HARDER)!==void 0,n=e!=null&&e.get(ke.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),s=Math.floor(3*a/(4*t.MAX_MODULES));(s<t.MIN_SKIP||r)&&(s=t.MIN_SKIP);for(var l=!1,u=new Int32Array(5),c=s-1;c<a&&!l;c+=s){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var f=0,d=0;d<o;d++)if(i.get(d,c))(f&1)===1&&f++,u[f]++;else if(f&1)u[f]++;else if(f===4)if(t.foundPatternCross(u)){var p=this.handlePossibleCenter(u,c,d,n);if(p===!0)if(s=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var v=this.findRowSkip();v>u[2]&&(c+=v-u[2]-s,d=o-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;continue}f=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;else u[++f]++;if(t.foundPatternCross(u)){var p=this.handlePossibleCenter(u,c,o,n);p===!0&&(s=u[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var g=this.selectBestPatterns();return W.orderBestPatterns(g),new a3(g)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var i=e[n];if(i===0)return!1;r+=i}if(r<7)return!1;var a=r/7,o=a/2;return Math.abs(a-e[0])<o&&Math.abs(a-e[1])<o&&Math.abs(3*a-e[2])<3*o&&Math.abs(a-e[3])<o&&Math.abs(a-e[4])<o},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,i){for(var a=this.getCrossCheckStateCount(),o=0,s=this.image;e>=o&&r>=o&&s.get(r-o,e-o);)a[2]++,o++;if(e<o||r<o)return!1;for(;e>=o&&r>=o&&!s.get(r-o,e-o)&&a[1]<=n;)a[1]++,o++;if(e<o||r<o||a[1]>n)return!1;for(;e>=o&&r>=o&&s.get(r-o,e-o)&&a[0]<=n;)a[0]++,o++;if(a[0]>n)return!1;var l=s.getHeight(),u=s.getWidth();for(o=1;e+o<l&&r+o<u&&s.get(r+o,e+o);)a[2]++,o++;if(e+o>=l||r+o>=u)return!1;for(;e+o<l&&r+o<u&&!s.get(r+o,e+o)&&a[3]<n;)a[3]++,o++;if(e+o>=l||r+o>=u||a[3]>=n)return!1;for(;e+o<l&&r+o<u&&s.get(r+o,e+o)&&a[4]<n;)a[4]++,o++;if(a[4]>=n)return!1;var c=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(c-i)<2*i&&t.foundPatternCross(a)},t.prototype.crossCheckVertical=function(e,r,n,i){for(var a=this.image,o=a.getHeight(),s=this.getCrossCheckStateCount(),l=e;l>=0&&a.get(r,l);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!a.get(r,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&a.get(r,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<o&&a.get(r,l);)s[2]++,l++;if(l===o)return NaN;for(;l<o&&!a.get(r,l)&&s[3]<n;)s[3]++,l++;if(l===o||s[3]>=n)return NaN;for(;l<o&&a.get(r,l)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var u=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(u-i)>=2*i?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,i){for(var a=this.image,o=a.getWidth(),s=this.getCrossCheckStateCount(),l=e;l>=0&&a.get(l,r);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!a.get(l,r)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&a.get(l,r)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<o&&a.get(l,r);)s[2]++,l++;if(l===o)return NaN;for(;l<o&&!a.get(l,r)&&s[3]<n;)s[3]++,l++;if(l===o||s[3]>=n)return NaN;for(;l<o&&a.get(l,r)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var u=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(u-i)>=i?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.handlePossibleCenter=function(e,r,n,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],o=t.centerFromEnd(e,n),s=this.crossCheckVertical(r,Math.floor(o),e[2],a);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],a)))){for(var l=a/7,u=!1,c=this.possibleCenters,f=0,d=c.length;f<d;f++){var p=c[f];if(p.aboutEquals(l,s,o)){c[f]=p.combineEstimate(s,o,l),u=!0;break}}if(!u){var v=new i3(o,s,l);c.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var i=null;try{for(var a=Ui(this.possibleCenters),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.getCount()>=t.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2)}}catch(l){e={error:l}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,i,a=0,o=0,s=this.possibleCenters.length;try{for(var l=Ui(this.possibleCenters),u=l.next();!u.done;u=l.next()){var c=u.value;c.getCount()>=t.CENTER_QUORUM&&(a++,o+=c.getEstimatedModuleSize())}}catch(g){e={error:g}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}if(a<3)return!1;var f=o/s,d=0;try{for(var p=Ui(this.possibleCenters),v=p.next();!v.done;v=p.next()){var c=v.value;d+=Math.abs(c.getEstimatedModuleSize()-f)}}catch(g){n={error:g}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}return d<=.05*o},t.prototype.selectBestPatterns=function(){var e,r,n,i,a=this.possibleCenters.length;if(a<3)throw new k;var o=this.possibleCenters,s;if(a>3){var l=0,u=0;try{for(var c=Ui(this.possibleCenters),f=c.next();!f.done;f=c.next()){var d=f.value,p=d.getEstimatedModuleSize();l+=p,u+=p*p}}catch(A){e={error:A}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}s=l/a;var v=Math.sqrt(u/a-s*s);o.sort(function(A,C){var E=Math.abs(C.getEstimatedModuleSize()-s),b=Math.abs(A.getEstimatedModuleSize()-s);return E<b?-1:E>b?1:0});for(var g=Math.max(.2*s,v),w=0;w<o.length&&o.length>3;w++){var x=o[w];Math.abs(x.getEstimatedModuleSize()-s)>g&&(o.splice(w,1),w--)}}if(o.length>3){var l=0;try{for(var m=Ui(o),y=m.next();!y.done;y=m.next()){var _=y.value;l+=_.getEstimatedModuleSize()}}catch(C){n={error:C}}finally{try{y&&!y.done&&(i=m.return)&&i.call(m)}finally{if(n)throw n.error}}s=l/o.length,o.sort(function(C,E){if(E.getCount()===C.getCount()){var b=Math.abs(E.getEstimatedModuleSize()-s),D=Math.abs(C.getEstimatedModuleSize()-s);return b<D?1:b>D?-1:0}else return E.getCount()-C.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),s3=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(ke.NEED_RESULT_POINT_CALLBACK);var r=new o3(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(r,n,i);if(a<1)throw new k("No pattern found in proccess finder.");var o=t.computeDimension(r,n,i,a),s=In.getProvisionalVersionForDimension(o),l=s.getDimensionForVersion()-7,u=null;if(s.getAlignmentPatternCenters().length>0)for(var c=n.getX()-r.getX()+i.getX(),f=n.getY()-r.getY()+i.getY(),d=1-3/l,p=Math.floor(r.getX()+d*(c-r.getX())),v=Math.floor(r.getY()+d*(f-r.getY())),g=4;g<=16;g<<=1)try{u=this.findAlignmentInRegion(a,p,v,g);break}catch(y){if(!(y instanceof k))throw y}var w=t.createTransform(r,n,i,u,o),x=t.sampleGrid(this.image,w,o),m;return u===null?m=[i,r,n]:m=[i,r,n,u],new Vc(x,m)},t.createTransform=function(e,r,n,i,a){var o=a-3.5,s,l,u,c;return i!==null?(s=i.getX(),l=i.getY(),u=o-3,c=u):(s=r.getX()-e.getX()+n.getX(),l=r.getY()-e.getY()+n.getY(),u=o,c=o),lp.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,u,c,3.5,o,e.getX(),e.getY(),r.getX(),r.getY(),s,l,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var i=Wc.getInstance();return i.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,i){var a=ve.round(W.distance(e,r)/i),o=ve.round(W.distance(e,n)/i),s=Math.floor((a+o)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new k("Dimensions could be not found.")}return s},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,i){var a=this.sizeOfBlackWhiteBlackRun(e,r,n,i),o=1,s=e-(n-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var l=Math.floor(r-(i-r)*o);return o=1,l<0?(o=r/(r-l),l=0):l>=this.image.getHeight()&&(o=(this.image.getHeight()-1-r)/(l-r),l=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,r,s,l),a-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,i){var a=Math.abs(i-r)>Math.abs(n-e);if(a){var o=e;e=r,r=o,o=n,n=i,i=o}for(var s=Math.abs(n-e),l=Math.abs(i-r),u=-s/2,c=e<n?1:-1,f=r<i?1:-1,d=0,p=n+c,v=e,g=r;v!==p;v+=c){var w=a?g:v,x=a?v:g;if(d===1===this.image.get(w,x)){if(d===2)return ve.distance(v,g,e,r);d++}if(u+=l,u>0){if(g===i)break;g+=f,u-=s}}return d===2?ve.distance(n+c,i,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,i){var a=Math.floor(i*e),o=Math.max(0,r-a),s=Math.min(this.image.getWidth()-1,r+a);if(s-o<e*3)throw new k("Alignment top exceeds estimated module size.");var l=Math.max(0,n-a),u=Math.min(this.image.getHeight()-1,n+a);if(u-l<e*3)throw new k("Alignment bottom exceeds estimated module size.");var c=new r3(this.image,o,l,s-o,u-l,e,this.resultPointCallback);return c.find()},t}(),ju=function(){function t(){this.decoder=new Q_}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,i;if(r!=null&&r.get(ke.PURE_BARCODE)!==void 0){var a=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(a,r),i=t.NO_POINTS}else{var o=new s3(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(o.getBits(),r),i=o.getPoints()}n.getOther()instanceof pp&&n.getOther().applyMirroredCorrection(i);var s=new ht(n.getText(),n.getRawBytes(),void 0,i,Z.QR_CODE,void 0),l=n.getByteSegments();l!==null&&s.putMetadata(at.BYTE_SEGMENTS,l);var u=n.getECLevel();return u!==null&&s.putMetadata(at.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(s.putMetadata(at.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(at.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new k;var i=this.moduleSize(r,e),a=r[1],o=n[1],s=r[0],l=n[0];if(s>=l||a>=o)throw new k;if(o-a!==l-s&&(l=s+(o-a),l>=e.getWidth()))throw new k;var u=Math.round((l-s+1)/i),c=Math.round((o-a+1)/i);if(u<=0||c<=0)throw new k;if(c!==u)throw new k;var f=Math.floor(i/2);a+=f,s+=f;var d=s+Math.floor((u-1)*i)-l;if(d>0){if(d>f)throw new k;s-=d}var p=a+Math.floor((c-1)*i)-o;if(p>0){if(p>f)throw new k;a-=p}for(var v=new _r(u,c),g=0;g<c;g++)for(var w=a+Math.floor(g*i),x=0;x<u;x++)e.get(s+Math.floor(x*i),w)&&v.set(x,g);return v},t.moduleSize=function(e,r){for(var n=r.getHeight(),i=r.getWidth(),a=e[0],o=e[1],s=!0,l=0;a<i&&o<n;){if(s!==r.get(a,o)){if(++l===5)break;s=!s}a++,o++}if(a===i||o===n)throw new k;return(a-e[0])/7},t.NO_POINTS=new Array,t}(),l3=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},de=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return ve.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var o=l3(e),s=o.next();!s.done;s=o.next()){var l=s.value;i[a++]=l}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},t.getCodeword=function(e){var r=Ge.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),u3=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),c3=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},f3=function(){function t(){}return t.detectMultiple=function(e,r,n){var i=e.getBlackMatrix(),a=t.detect(n,i);return a.length||(i=i.clone(),i.rotate180(),a=t.detect(n,i)),new u3(i,a)},t.detect=function(e,r){for(var n,i,a=new Array,o=0,s=0,l=!1;o<r.getHeight();){var u=t.findVertices(r,o,s);if(u[0]==null&&u[3]==null){if(!l)break;l=!1,s=0;try{for(var c=(n=void 0,c3(a)),f=c.next();!f.done;f=c.next()){var d=f.value;d[1]!=null&&(o=Math.trunc(Math.max(o,d[1].getY()))),d[3]!=null&&(o=Math.max(o,Math.trunc(d[3].getY())))}}catch(p){n={error:p}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}o+=t.ROW_STEP;continue}if(l=!0,a.push(u),!e)break;u[2]!=null?(s=Math.trunc(u[2].getX()),o=Math.trunc(u[2].getY())):(s=Math.trunc(u[4].getX()),o=Math.trunc(u[4].getY()))}return a},t.findVertices=function(e,r,n){var i=e.getHeight(),a=e.getWidth(),o=new Array(8);return t.copyToResult(o,t.findRowsWithPattern(e,i,a,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY())),t.copyToResult(o,t.findRowsWithPattern(e,i,a,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),o},t.copyToResult=function(e,r,n){for(var i=0;i<n.length;i++)e[n[i]]=r[i]},t.findRowsWithPattern=function(e,r,n,i,a,o){for(var s=new Array(4),l=!1,u=new Int32Array(o.length);i<r;i+=t.ROW_STEP){var c=t.findGuardPattern(e,a,i,n,!1,o,u);if(c!=null){for(;i>0;){var f=t.findGuardPattern(e,a,--i,n,!1,o,u);if(f!=null)c=f;else{i++;break}}s[0]=new W(c[0],i),s[1]=new W(c[1],i),l=!0;break}}var d=i+1;if(l){for(var p=0,f=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);d<r;d++){var c=t.findGuardPattern(e,f[0],d,n,!1,o,u);if(c!=null&&Math.abs(f[0]-c[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-c[1])<t.MAX_PATTERN_DRIFT)f=c,p=0;else{if(p>t.SKIPPED_ROW_COUNT_MAX)break;p++}}d-=p+1,s[2]=new W(f[0],d),s[3]=new W(f[1],d)}return d-i<t.BARCODE_MIN_HEIGHT&&Ge.fill(s,null),s},t.findGuardPattern=function(e,r,n,i,a,o,s){Ge.fillWithin(s,0,s.length,0);for(var l=r,u=0;e.get(l,n)&&l>0&&u++<t.MAX_PIXEL_DRIFT;)l--;for(var c=l,f=0,d=o.length,p=a;c<i;c++){var v=e.get(c,n);if(v!==p)s[f]++;else{if(f===d-1){if(t.patternMatchVariance(s,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([l,c]);l+=s[0]+s[1],be.arraycopy(s,2,s,0,f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,p=!p}}return f===d-1&&t.patternMatchVariance(s,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([l,c-1]):null},t.patternMatchVariance=function(e,r,n){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=r[s];if(a<o)return 1/0;var l=a/o;n*=l;for(var u=0,c=0;c<i;c++){var f=e[c],d=r[c]*l,p=f>d?f-d:d-f;if(p>n)return 1/0;u+=p}return u/a},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),d3=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Sn=function(){function t(e,r){if(r.length===0)throw new Q;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-i),be.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=d3(this.coefficients),o=a.next();!o.done;o=a.next()){var s=o.value;i=this.field.add(i,s)}}catch(f){r={error:f}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i}for(var l=this.coefficients[0],u=this.coefficients.length,c=1;c<u;c++)l=this.field.add(this.field.multiply(e,l),this.coefficients[c]);return l},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new Q("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var a=new Int32Array(n.length),o=n.length-r.length;be.arraycopy(n,0,a,0,o);for(var s=o;s<n.length;s++)a[s]=this.field.add(r[s-o],n[s]);return new t(this.field,a)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Q("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Q("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,i=e.coefficients,a=i.length,o=new Int32Array(n+a-1),s=0;s<n;s++)for(var l=r[s],u=0;u<a;u++)o[s+u]=this.field.add(o[s+u],this.field.multiply(l,i[u]));return new t(this.field,o)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),i=0;i<r;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Q;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,i=new Int32Array(n+e),a=0;a<n;a++)i[a]=this.field.multiply(this.coefficients[a],r);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new ne,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),h3=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Q;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new sp;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),p3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),v3=function(t){p3(e,t);function e(r,n){var i=t.call(this)||this;i.modulus=r,i.expTable=new Int32Array(r),i.logTable=new Int32Array(r);for(var a=1,o=0;o<r;o++)i.expTable[o]=a,a=a*n%r;for(var o=0;o<r-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new Sn(i,new Int32Array([0])),i.one=new Sn(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Q;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new Sn(this,i)},e.PDF417_GF=new e(de.NUMBER_OF_CODEWORDS,3),e}(h3),g3=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},m3=function(){function t(){this.field=v3.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var i,a,o=new Sn(this.field,e),s=new Int32Array(r),l=!1,u=r;u>0;u--){var c=o.evaluateAt(this.field.exp(u));s[r-u]=c,c!==0&&(l=!0)}if(!l)return 0;var f=this.field.getOne();if(n!=null)try{for(var d=g3(n),p=d.next();!p.done;p=d.next()){var v=p.value,g=this.field.exp(e.length-1-v),w=new Sn(this.field,new Int32Array([this.field.subtract(0,g),1]));f=f.multiply(w)}}catch(b){i={error:b}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}for(var x=new Sn(this.field,s),m=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),x,r),y=m[0],_=m[1],A=this.findErrorLocations(y),C=this.findErrorMagnitudes(_,y,A),u=0;u<A.length;u++){var E=e.length-1-this.field.log(A[u]);if(E<0)throw Je.getChecksumInstance();e[E]=this.field.subtract(e[E],C[u])}return A.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var a=e,o=r,s=this.field.getZero(),l=this.field.getOne();o.getDegree()>=Math.round(n/2);){var u=a,c=s;if(a=o,s=l,a.isZero())throw Je.getChecksumInstance();o=u;for(var f=this.field.getZero(),d=a.getCoefficient(a.getDegree()),p=this.field.inverse(d);o.getDegree()>=a.getDegree()&&!o.isZero();){var v=o.getDegree()-a.getDegree(),g=this.field.multiply(o.getCoefficient(o.getDegree()),p);f=f.add(this.field.buildMonomial(v,g)),o=o.subtract(a.multiplyByMonomial(v,g))}l=f.multiply(s).subtract(c).negative()}var w=l.getCoefficient(0);if(w===0)throw Je.getChecksumInstance();var x=this.field.inverse(w),m=l.multiply(x),y=o.multiply(x);return[m,y]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),i=0,a=1;a<this.field.getSize()&&i<r;a++)e.evaluateAt(a)===0&&(n[i]=this.field.inverse(a),i++);if(i!==r)throw Je.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var i=r.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,r.getCoefficient(o));for(var s=new Sn(this.field,a),l=n.length,u=new Int32Array(l),o=0;o<l;o++){var c=this.field.inverse(n[o]),f=this.field.subtract(0,e.evaluateAt(c)),d=this.field.inverse(s.evaluateAt(c));u[o]=this.field.multiply(f,d)}return u},t}(),Lu=function(){function t(e,r,n,i,a){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,i,a)}return t.prototype.constructor_1=function(e,r,n,i,a){var o=r==null||n==null,s=i==null||a==null;if(o&&s)throw new k;o?(r=new W(0,i.getY()),n=new W(0,a.getY())):s&&(i=new W(e.getWidth()-1,r.getY()),a=new W(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(r.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),a.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){var l=n?this.topLeft:this.topRight,u=Math.trunc(l.getY()-e);u<0&&(u=0);var c=new W(l.getX(),u);n?i=c:o=c}if(r>0){var f=n?this.bottomLeft:this.bottomRight,d=Math.trunc(f.getY()+r);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);var p=new W(f.getX(),d);n?a=p:s=p}return new t(this.image,i,a,o,s)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),y3=function(){function t(e,r,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),Xc=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function i(o,s,l,u,c,f){if(o==="%%")return"%";if(r[++n]!==void 0){o=u?parseInt(u.substr(1)):void 0;var d=c?parseInt(c.substr(1)):void 0,p;switch(f){case"s":p=r[n];break;case"c":p=r[n][0];break;case"f":p=parseFloat(r[n]).toFixed(o);break;case"p":p=parseFloat(r[n]).toPrecision(o);break;case"e":p=parseFloat(r[n]).toExponential(o);break;case"x":p=parseInt(r[n]).toString(d||16);break;case"d":p=parseFloat(parseInt(r[n],d||10).toPrecision(o)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(d);for(var v=parseInt(l),g=l&&l[0]+""=="0"?"0":" ";p.length<v;)p=s!==void 0?p+g:g+p;return p}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),x3=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vp=function(){function t(e){this.boundingBox=new Lu(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(r=this.codewords[i],r!=null)||(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(r=this.codewords[i],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new Xc,i=0;try{for(var a=x3(this.codewords),o=a.next();!o.done;o=a.next()){var s=o.value;if(s==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}}catch(l){e={error:l}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),w3=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_3=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},Zi=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,i=new Array,a=function(f,d){var p={getKey:function(){return f},getValue:function(){return d}};p.getValue()>n?(n=p.getValue(),i=[],i.push(p.getKey())):p.getValue()===n&&i.push(p.getKey())};try{for(var o=w3(this.values.entries()),s=o.next();!s.done;s=o.next()){var l=_3(s.value,2),u=l[0],c=l[1];a(u,c)}}catch(f){e={error:f}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return de.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),E3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pl=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ah=function(t){E3(e,t);function e(r,n){var i=t.call(this,r)||this;return i._isLeft=n,i}return e.prototype.setRowNumbers=function(){var r,n;try{for(var i=pl(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=-1,c=1,f=0,d=s;d<l;d++)if(n[d]!=null){var p=n[d],v=p.getRowNumber()-u;if(v===0)f++;else if(v===1)c=Math.max(c,f),f=1,u=p.getRowNumber();else if(v<0||p.getRowNumber()>=r.getRowCount()||v>d)n[d]=null;else{var g=void 0;c>2?g=(c-2)*v:g=v;for(var w=g>=d,x=1;x<=g&&!w;x++)w=n[d-x]!=null;w?n[d]=null:(u=p.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var r,n,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=pl(this.getCodewords()),s=o.next();!s.done;s=o.next()){var l=s.value;if(l!=null){var u=l.getRowNumber();if(u>=a.length)continue;a[u]++}}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),a=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.getCodewords(),u=-1,c=o;c<s;c++)if(l[c]!=null){var f=l[c];f.setRowNumberAsRowIndicatorColumn();var d=f.getRowNumber()-u;d===0||(d===1?u=f.getRowNumber():f.getRowNumber()>=r.getRowCount()?l[c]=null:u=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,i=this.getCodewords(),a=new Zi,o=new Zi,s=new Zi,l=new Zi;try{for(var u=pl(i),c=u.next();!c.done;c=u.next()){var f=c.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var d=f.getValue()%30,p=f.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:o.setValue(d*3+1);break;case 1:l.setValue(d/3),s.setValue(d%3);break;case 2:a.setValue(d+1);break}}}}catch(g){r={error:g}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(a.getValue().length===0||o.getValue().length===0||s.getValue().length===0||l.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+s.getValue()[0]<de.MIN_ROWS_IN_BARCODE||o.getValue()[0]+s.getValue()[0]>de.MAX_ROWS_IN_BARCODE)return null;var v=new y3(a.getValue()[0],o.getValue()[0],s.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(i,v),v},e.prototype.removeIncorrectCodewords=function(r,n){for(var i=0;i<r.length;i++){var a=r[i];if(r[i]!=null){var o=a.getValue()%30,s=a.getRowNumber();if(s>n.getRowCount()){r[i]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(r[i]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(r[i]=null);break;case 2:o+1!==n.getColumnCount()&&(r[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(vp),C3=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},S3=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=de.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),i=0;i<n.length;i++)n[i]!=null&&(n[i].hasValidRowNumber()||this.adjustRowNumbers(r,i,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[n];a!=null&&(a.setRowNumber(e[n].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(a=t.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(a=t.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var i,a;if(this.detectionResultColumns[e-1]!=null){var o=n[r],s=this.detectionResultColumns[e-1].getCodewords(),l=s;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=s[r],u[3]=l[r],r>0&&(u[0]=n[r-1],u[4]=s[r-1],u[5]=l[r-1]),r>1&&(u[8]=n[r-2],u[10]=s[r-2],u[11]=l[r-2]),r<n.length-1&&(u[1]=n[r+1],u[6]=s[r+1],u[7]=l[r+1]),r<n.length-2&&(u[9]=n[r+2],u[12]=s[r+2],u[13]=l[r+2]);try{for(var c=C3(u),f=c.next();!f.done;f=c.next()){var d=f.value;if(t.adjustRowNumber(o,d))return}}catch(p){i={error:p}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new Xc,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){r.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[n];if(a==null){r.format("    |   ");continue}r.format(" %3d|%3d",a.getRowNumber(),a.getValue())}r.format("%n")}return r.toString()},t}(),A3=function(){function t(e,r,n,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),b3=function(){function t(){}return t.initialize=function(){for(var e=0;e<de.SYMBOL_TABLE.length;e++)for(var r=de.SYMBOL_TABLE[e],n=r&1,i=0;i<de.BARS_IN_MODULE;i++){for(var a=0;(r&1)===n;)a+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(de.BARS_IN_MODULE)),t.RATIOS_TABLE[e][de.BARS_IN_MODULE-i-1]=Math.fround(a/de.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=ve.sum(e),n=new Int32Array(de.BARS_IN_MODULE),i=0,a=0,o=0;o<de.MODULES_IN_CODEWORD;o++){var s=r/(2*de.MODULES_IN_CODEWORD)+o*r/de.MODULES_IN_CODEWORD;a+e[i]<=s&&(a+=e[i],i++),n[i]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return de.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var i=0;i<e[n];i++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=ve.sum(e),n=new Array(de.BARS_IN_MODULE);if(r>1)for(var i=0;i<n.length;i++)n[i]=Math.fround(e[i]/r);var a=ku.MAX_VALUE,o=-1;this.bSymbolTableReady||t.initialize();for(var s=0;s<t.RATIOS_TABLE.length;s++){for(var l=0,u=t.RATIOS_TABLE[s],c=0;c<de.BARS_IN_MODULE;c++){var f=Math.fround(u[c]-n[c]);if(l+=Math.fround(f*f),l>=a)break}l<a&&(a=l,o=de.SYMBOL_TABLE[s])}return o},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(de.SYMBOL_TABLE.length).map(function(e){return new Array(de.BARS_IN_MODULE)}),t}(),I3=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),oh=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),N3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),T3=function(t){N3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(kt),O3=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new T3;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new zc;if(n===0)return;for(var i=0;i<n;i++)this.write(e[r+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),k3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),D3=function(t){k3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(kt),R3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),P3=function(t){R3(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new Q("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,i=n<<1;if(i-r<0&&(i=r),i<0){if(r<0)throw new D3;i=ae.MAX_VALUE}this.buf=Ge.copyOfUint8Array(this.buf,i)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,i){if(n<0||n>r.length||i<0||n+i-r.length>0)throw new zc;this.ensureCapacity(this.count+i),be.arraycopy(r,n,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Ge.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(O3),Ee;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ee||(Ee={}));function gp(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var co;function $r(t){if(typeof co>"u"&&(co=gp()),co===null)throw new Error("BigInt is not supported!");return co(t)}function M3(){var t=[];t[0]=$r(1);var e=$r(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var j3=function(){function t(){}return t.decode=function(e,r){var n=new ne(""),i=We.ISO8859_1;n.enableDecoding(i);for(var a=1,o=e[a++],s=new I3;a<e[0];){switch(o){case t.TEXT_COMPACTION_MODE_LATCH:a=t.textCompaction(e,a,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:a=t.byteCompaction(o,e,i,a,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[a++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:a=t.numericCompaction(e,a,n);break;case t.ECI_CHARSET:We.getCharacterSetECIByValue(e[a++]);break;case t.ECI_GENERAL_PURPOSE:a+=2;break;case t.ECI_USER_DEFINED:a++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=t.decodeMacroBlock(e,a,s);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new B;default:a--,a=t.textCompaction(e,a,n);break}if(a<e.length)o=e[a++];else throw B.getFormatInstance()}if(n.length()===0)throw B.getFormatInstance();var l=new bs(null,n.toString(),null,r);return l.setOther(s),l},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw B.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<t.NUMBER_OF_SEQUENCE_CODEWORDS;a++,r++)i[a]=e[r];n.setSegmentIndex(ae.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new ne;r=t.textCompaction(e,r,o),n.setFileId(o.toString());var s=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new ne;r=t.textCompaction(e,r+1,l),n.setFileName(l.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new ne;r=t.textCompaction(e,r+1,u),n.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var c=new ne;r=t.textCompaction(e,r+1,c),n.setAddressee(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new ne;r=t.numericCompaction(e,r+1,f),n.setSegmentCount(ae.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var d=new ne;r=t.numericCompaction(e,r+1,d),n.setTimestamp(oh.parseLong(d.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new ne;r=t.numericCompaction(e,r+1,p),n.setChecksum(ae.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var v=new ne;r=t.numericCompaction(e,r+1,v),n.setFileSize(oh.parseLong(v.toString()));break;default:throw B.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw B.getFormatInstance()}if(s!==-1){var g=r-s;n.isLastSegment()&&g--,n.setOptionalData(Ge.copyOfRange(e,s,s+g))}return r},t.textCompaction=function(e,r,n){for(var i=new Int32Array((e[0]-r)*2),a=new Int32Array((e[0]-r)*2),o=0,s=!1;r<e[0]&&!s;){var l=e[r++];if(l<t.TEXT_COMPACTION_MODE_LATCH)i[o]=l/30,i[o+1]=l%30,o+=2;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:i[o++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[r++],a[o]=l,o++;break}}return t.decodeTextCompaction(i,a,o,n),r},t.decodeTextCompaction=function(e,r,n,i){for(var a=Ee.ALPHA,o=Ee.ALPHA,s=0;s<n;){var l=e[s],u="";switch(a){case Ee.ALPHA:if(l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case t.LL:a=Ee.LOWER;break;case t.ML:a=Ee.MIXED;break;case t.PS:o=a,a=Ee.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ee.ALPHA;break}break;case Ee.LOWER:if(l<26)u=String.fromCharCode(97+l);else switch(l){case 26:u=" ";break;case t.AS:o=a,a=Ee.ALPHA_SHIFT;break;case t.ML:a=Ee.MIXED;break;case t.PS:o=a,a=Ee.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ee.ALPHA;break}break;case Ee.MIXED:if(l<t.PL)u=t.MIXED_CHARS[l];else switch(l){case t.PL:a=Ee.PUNCT;break;case 26:u=" ";break;case t.LL:a=Ee.LOWER;break;case t.AL:a=Ee.ALPHA;break;case t.PS:o=a,a=Ee.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ee.ALPHA;break}break;case Ee.PUNCT:if(l<t.PAL)u=t.PUNCT_CHARS[l];else switch(l){case t.PAL:a=Ee.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ee.ALPHA;break}break;case Ee.ALPHA_SHIFT:if(a=o,l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ee.ALPHA;break}break;case Ee.PUNCT_SHIFT:if(a=o,l<t.PAL)u=t.PUNCT_CHARS[l];else switch(l){case t.PAL:a=Ee.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ee.ALPHA;break}break}u!==""&&i.append(u),s++}},t.byteCompaction=function(e,r,n,i,a){var o=new P3,s=0,l=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var c=new Int32Array(6),f=r[i++];i<r[0]&&!u;)switch(c[s++]=f,l=900*l+f,f=r[i++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,u=!0;break;default:if(s%5===0&&s>0){for(var d=0;d<6;++d)o.write(Number($r(l)>>$r(8*(5-d))));l=0,s=0}break}i===r[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(c[s++]=f);for(var p=0;p<s;p++)o.write(c[p]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<r[0]&&!u;){var v=r[i++];if(v<t.TEXT_COMPACTION_MODE_LATCH)s++,l=900*l+v;else switch(v){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,u=!0;break}if(s%5===0&&s>0){for(var d=0;d<6;++d)o.write(Number($r(l)>>$r(8*(5-d))));l=0,s=0}}break}return a.append(qt.decode(o.toByteArray(),n)),i},t.numericCompaction=function(e,r,n){for(var i=0,a=!1,o=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!a;){var s=e[r++];if(r===e[0]&&(a=!0),s<t.TEXT_COMPACTION_MODE_LATCH)o[i]=s,i++;else switch(s){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,a=!0;break}(i%t.MAX_NUMERIC_CODEWORDS===0||s===t.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(n.append(t.decodeBase900toBase10(o,i)),i=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=$r(0),i=0;i<r;i++)n+=t.EXP900[r-i-1]*$r(e[i]);var a=n.toString();if(a.charAt(0)!=="1")throw new B;return a.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=gp()?M3():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),$i=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L3=function(){function t(){}return t.decode=function(e,r,n,i,a,o,s){for(var l=new Lu(e,r,n,i,a),u=null,c=null,f,d=!0;;d=!1){if(r!=null&&(u=t.getRowIndicatorColumn(e,l,r,!0,o,s)),i!=null&&(c=t.getRowIndicatorColumn(e,l,i,!1,o,s)),f=t.merge(u,c),f==null)throw k.getNotFoundInstance();var p=f.getBoundingBox();if(d&&p!=null&&(p.getMinY()<l.getMinY()||p.getMaxY()>l.getMaxY()))l=p;else break}f.setBoundingBox(l);var v=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,u),f.setDetectionResultColumn(v,c);for(var g=u!=null,w=1;w<=v;w++){var x=g?w:v-w;if(f.getDetectionResultColumn(x)===void 0){var m=void 0;x===0||x===v?m=new ah(l,x===0):m=new vp(l),f.setDetectionResultColumn(x,m);for(var y=-1,_=y,A=l.getMinY();A<=l.getMaxY();A++){if(y=t.getStartColumn(f,x,A,g),y<0||y>l.getMaxX()){if(_===-1)continue;y=_}var C=t.detectCodeword(e,l.getMinX(),l.getMaxX(),g,y,A,o,s);C!=null&&(m.setCodeword(A,C),_=y,o=Math.min(o,C.getWidth()),s=Math.max(s,C.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var i=Lu.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new S3(n,i)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=t.getMax(i),o=0;try{for(var s=$i(i),l=s.next();!l.done;l=s.next()){var u=l.value;if(o+=a-u,u>0)break}}catch(p){r={error:p}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}for(var c=e.getCodewords(),f=0;o>0&&c[f]==null;f++)o--;for(var d=0,f=i.length-1;f>=0&&(d+=a-i[f],!(i[f]>0));f--);for(var f=c.length-1;d>0&&c[f]==null;f--)d--;return e.getBoundingBox().addMissingRows(o,d,e.isLeft())},t.getMax=function(e){var r,n,i=-1;try{for(var a=$i(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=Math.max(i,s)}}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var i;return r==null||(i=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,i,a,o){for(var s=new ah(r,i),l=0;l<2;l++)for(var u=l===0?1:-1,c=Math.trunc(Math.trunc(n.getX())),f=Math.trunc(Math.trunc(n.getY()));f<=r.getMaxY()&&f>=r.getMinY();f+=u){var d=t.detectCodeword(e,0,e.getWidth(),i,c,f,a,o);d!=null&&(s.setCodeword(f,d),i?c=d.getStartX():c=d.getEndX())}return s},t.adjustCodewordCount=function(e,r){var n=r[0][1],i=n.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>de.MAX_CODEWORDS_IN_BARCODE)throw k.getNotFoundInstance();n.setValue(a)}else i[0]!==a&&n.setValue(a)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var l=0;l<e.getBarcodeColumnCount();l++){var u=r[s][l+1].getValue(),c=s*e.getBarcodeColumnCount()+l;u.length===0?n.push(c):u.length===1?i[c]=u[0]:(o.push(c),a.push(u))}for(var f=new Array(a.length),d=0;d<f.length;d++)f[d]=a[d];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,de.toIntArray(n),de.toIntArray(o),f)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,i,a){for(var o=new Int32Array(i.length),s=100;s-- >0;){for(var l=0;l<o.length;l++)r[i[l]]=a[l][o[l]];try{return t.decodeCodewords(r,e,n)}catch(c){var u=c instanceof Je;if(!u)throw c}if(o.length===0)throw Je.getChecksumInstance();for(var l=0;l<o.length;l++)if(o[l]<a[l].length-1){o[l]++;break}else if(o[l]=0,l===o.length-1)throw Je.getChecksumInstance()}throw Je.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,i,a,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<o.length;s++)for(var l=0;l<o[s].length;l++)o[s][l]=new Zi;var u=0;try{for(var c=$i(e.getDetectionResultColumns()),f=c.next();!f.done;f=c.next()){var d=f.value;if(d!=null)try{for(var p=(i=void 0,$i(d.getCodewords())),v=p.next();!v.done;v=p.next()){var g=v.value;if(g!=null){var w=g.getRowNumber();if(w>=0){if(w>=o.length)continue;o[w][u].setValue(g.getValue())}}}}catch(x){i={error:x}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}u++}}catch(x){r={error:x}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return o},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,i){var a,o,s=i?1:-1,l=null;if(t.isValidBarcodeColumn(e,r-s)&&(l=e.getDetectionResultColumn(r-s).getCodeword(n)),l!=null)return i?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(r).getCodewordNearby(n),l!=null)return i?l.getStartX():l.getEndX();if(t.isValidBarcodeColumn(e,r-s)&&(l=e.getDetectionResultColumn(r-s).getCodewordNearby(n)),l!=null)return i?l.getEndX():l.getStartX();for(var u=0;t.isValidBarcodeColumn(e,r-s);){r-=s;try{for(var c=(a=void 0,$i(e.getDetectionResultColumn(r).getCodewords())),f=c.next();!f.done;f=c.next()){var d=f.value;if(d!=null)return(i?d.getEndX():d.getStartX())+s*u*(d.getEndX()-d.getStartX())}}catch(p){a={error:p}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(a)throw a.error}}u++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,i,a,o,s,l){a=t.adjustCodewordStartColumn(e,r,n,i,a,o);var u=t.getModuleBitCount(e,r,n,i,a,o);if(u==null)return null;var c,f=ve.sum(u);if(i)c=a+f;else{for(var d=0;d<u.length/2;d++){var p=u[d];u[d]=u[u.length-1-d],u[u.length-1-d]=p}c=a,a=c-f}if(!t.checkCodewordSkew(f,s,l))return null;var v=b3.getDecodedValue(u),g=de.getCodeword(v);return g===-1?null:new A3(a,c,t.getCodewordBucketNumber(v),g)},t.getModuleBitCount=function(e,r,n,i,a,o){for(var s=a,l=new Int32Array(8),u=0,c=i?1:-1,f=i;(i?s<n:s>=r)&&u<l.length;)e.get(s,o)===f?(l[u]++,s+=c):(u++,f=!f);return u===l.length||s===(i?n:r)&&u===l.length-1?l:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,i,a,o){for(var s=a,l=i?-1:1,u=0;u<2;u++){for(;(i?s>=r:s<n)&&i===e.get(s,o);){if(Math.abs(a-s)>t.CODEWORD_SKEW_SIZE)return a;s+=l}l=-l,i=!i}return s},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw B.getFormatInstance();var i=1<<r+1,a=t.correctErrors(e,n,i);t.verifyCodewordCount(e,i);var o=j3.decode(e,""+r);return o.setErrorsCorrected(a),o.setErasures(n.length),o},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw Je.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw B.getFormatInstance();var n=e[0];if(n>e.length)throw B.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw B.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,i=r.length-1;!((e&1)!==n&&(n=e&1,i--,i<0));)r[i]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new Xc,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var i=0;i<e[n].length;i++){var a=e[n][i];a.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new m3,t}(),B3=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bu=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw k.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof B||n instanceof Je?k.getNotFoundInstance():n}},t.decode=function(e,r,n){var i,a,o=new Array,s=f3.detectMultiple(e,r,n);try{for(var l=B3(s.getPoints()),u=l.next();!u.done;u=l.next()){var c=u.value,f=L3.decode(s.getBits(),c[4],c[5],c[6],c[7],t.getMinCodewordWidth(c),t.getMaxCodewordWidth(c)),d=new ht(f.getText(),f.getRawBytes(),void 0,c,Z.PDF_417);d.putMetadata(at.ERROR_CORRECTION_LEVEL,f.getECLevel());var p=f.getOther();p!=null&&d.putMetadata(at.PDF417_EXTRA_METADATA,p),o.push(d)}}catch(v){i={error:v}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return o.map(function(v){return v})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?ae.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*de.MODULES_IN_CODEWORD/de.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*de.MODULES_IN_CODEWORD/de.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*de.MODULES_IN_CODEWORD/de.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*de.MODULES_IN_CODEWORD/de.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),F3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sh=function(t){F3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(kt),lh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},U3=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(ke.TRY_HARDER)!==void 0,n=e==null?null:e.get(ke.POSSIBLE_FORMATS),i=new Array;if(n!=null){var a=n.some(function(o){return o===Z.UPC_A||o===Z.UPC_E||o===Z.EAN_13||o===Z.EAN_8||o===Z.CODABAR||o===Z.CODE_39||o===Z.CODE_93||o===Z.CODE_128||o===Z.ITF||o===Z.RSS_14||o===Z.RSS_EXPANDED});a&&!r&&i.push(new Yi(e)),n.includes(Z.QR_CODE)&&i.push(new ju),n.includes(Z.DATA_MATRIX)&&i.push(new Mu),n.includes(Z.AZTEC)&&i.push(new Ru),n.includes(Z.PDF_417)&&i.push(new Bu),a&&r&&i.push(new Yi(e))}i.length===0&&(r||i.push(new Yi(e)),i.push(new ju),i.push(new Mu),i.push(new Ru),i.push(new Bu),r&&i.push(new Yi(e))),this.readers=i},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=lh(this.readers),i=n.next();!i.done;i=n.next()){var a=i.value;a.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new sh("No readers where selected, nothing can be read.");try{for(var i=lh(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(e,this.hints)}catch(s){if(s instanceof sh)continue}}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}throw new k("No MultiFormat Readers were able to detect the code.")},t}(),$3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),z3=function(t){$3(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var i=this,a=new U3;return a.setHints(r),i=t.call(this,a,n)||this,i}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e}(Ni),H3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){H3(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Bu,r)||this}return e})(Ni);var V3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){V3(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new ju,r)||this}return e})(Ni);var Fu;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(Fu||(Fu={}));const fo=Fu;var mp=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new tn(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],i=this.field,a=r.length;a<=e;a++){var o=n.multiply(new tn(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));r.push(o),n=o}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new Q("No error correction bytes");var n=e.length-r;if(n<=0)throw new Q("No data bytes provided");var i=this.buildGenerator(r),a=new Int32Array(n);be.arraycopy(e,0,a,0,n);var o=new tn(this.field,a);o=o.multiplyByMonomial(r,1);for(var s=o.divide(i)[1],l=s.getCoefficients(),u=r-l.length,c=0;c<u;c++)e[n+c]=0;be.arraycopy(l,0,e,n+u,l.length)},t}(),Qi=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a-1;o++)for(var s=n[o],l=0;l<i-1;l++){var u=s[l];u===s[l+1]&&u===n[o+1][l]&&u===n[o+1][l+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=0;s<i;s++){var l=n[o];s+6<i&&l[s]===1&&l[s+1]===0&&l[s+2]===1&&l[s+3]===1&&l[s+4]===1&&l[s+5]===0&&l[s+6]===1&&(t.isWhiteHorizontal(l,s-4,s)||t.isWhiteHorizontal(l,s+7,s+11))&&r++,o+6<a&&n[o][s]===1&&n[o+1][s]===0&&n[o+2][s]===1&&n[o+3][s]===1&&n[o+4][s]===1&&n[o+5][s]===0&&n[o+6][s]===1&&(t.isWhiteVertical(n,s,o-4,o)||t.isWhiteVertical(n,s,o+7,o+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var i=r;i<n;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(var a=n;a<i;a++)if(e[a][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=n[o],l=0;l<i;l++)s[l]===1&&r++;var u=e.getHeight()*e.getWidth(),c=Math.floor(Math.abs(r*2-u)*10/u);return c*t.N4},t.getDataMaskBit=function(e,r,n){var i,a;switch(e){case 0:i=n+r&1;break;case 1:i=n&1;break;case 2:i=r%3;break;case 3:i=(n+r)%3;break;case 4:i=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:a=n*r,i=(a&1)+a%3;break;case 6:a=n*r,i=(a&1)+a%3&1;break;case 7:a=n*r,i=a%3+(n+r&1)&1;break;default:throw new Q("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,i=r?e.getHeight():e.getWidth(),a=r?e.getWidth():e.getHeight(),o=e.getArray(),s=0;s<i;s++){for(var l=0,u=-1,c=0;c<a;c++){var f=r?o[s][c]:o[c][s];f===u?l++:(l>=5&&(n+=t.N1+(l-5)),l=1,u=f)}l>=5&&(n+=t.N1+(l-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),W3=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},G3=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),i=0;i!==r;i++)n[i]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var i=W3(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;Ge.fill(o,e)}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,i=this.height;n<i;++n)for(var a=this.bytes[n],o=r.bytes[n],s=0,l=this.width;s<l;++s)if(a[s]!==o[s])return!1;return!0},t.prototype.toString=function(){for(var e=new ne,r=0,n=this.height;r<n;++r){for(var i=this.bytes[r],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),Uu=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new ne;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),X3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ne=function(t){X3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(kt),uh=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,i,a){t.clearMatrix(a),t.embedBasicPatterns(n,a),t.embedTypeInfo(r,i,a),t.maybeEmbedVersionInfo(n,a),t.embedDataBits(e,i,a)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var i=new et;t.makeTypeInfoBits(e,r,i);for(var a=0,o=i.getSize();a<o;++a){var s=i.get(i.getSize()-1-a),l=t.TYPE_INFO_COORDINATES[a],u=l[0],c=l[1];if(n.setBoolean(u,c,s),a<8){var f=n.getWidth()-a-1,d=8;n.setBoolean(f,d,s)}else{var f=8,d=n.getHeight()-7+(a-8);n.setBoolean(f,d,s)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new et;t.makeVersionInfoBits(e,n);for(var i=6*3-1,a=0;a<6;++a)for(var o=0;o<3;++o){var s=n.get(i);i--,r.setBoolean(a,r.getHeight()-11+o,s),r.setBoolean(r.getHeight()-11+o,a,s)}}},t.embedDataBits=function(e,r,n){for(var i=0,a=-1,o=n.getWidth()-1,s=n.getHeight()-1;o>0;){for(o===6&&(o-=1);s>=0&&s<n.getHeight();){for(var l=0;l<2;++l){var u=o-l;if(t.isEmpty(n.get(u,s))){var c=void 0;i<e.getSize()?(c=e.get(i),++i):c=!1,r!==255&&Qi.getDataMaskBit(r,u,s)&&(c=!c),n.setBoolean(u,s,c)}}s+=a}a=-a,s+=a,o-=2}if(i!==e.getSize())throw new Ne("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-ae.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new Q("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!Uu.isValidMaskPattern(r))throw new Ne("Invalid mask pattern");var i=e.getBits()<<3|r;n.appendBits(i,5);var a=t.calculateBCHCode(i,t.TYPE_INFO_POLY);n.appendBits(a,10);var o=new et;if(o.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new Ne("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new Ne("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Ne;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var i=0;i<8;++i){if(!t.isEmpty(n.get(e+i,r)))throw new Ne;n.setNumber(e+i,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var i=0;i<7;++i){if(!t.isEmpty(n.get(e,r+i)))throw new Ne;n.setNumber(e,r+i,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var i=0;i<5;++i)for(var a=t.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)n.setNumber(e+o,r+i,a[o])},t.embedPositionDetectionPattern=function(e,r,n){for(var i=0;i<7;++i)for(var a=t.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)n.setNumber(e+o,r+i,a[o])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var i=7;t.embedVerticalSeparationPattern(i,0,e),t.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),t.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],a=0,o=i.length;a!==o;a++){var s=i[a];if(s>=0)for(var l=0;l!==o;l++){var u=i[l];u>=0&&t.isEmpty(r.get(u,s))&&t.embedPositionAdjustmentPattern(u-2,s-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),q3=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),ch=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return Qi.applyMaskPenaltyRule1(e)+Qi.applyMaskPenaltyRule2(e)+Qi.applyMaskPenaltyRule3(e)+Qi.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var i=t.DEFAULT_BYTE_MODE_ENCODING,a=n!==null&&n.get(fo.CHARACTER_SET)!==void 0;a&&(i=n.get(fo.CHARACTER_SET).toString());var o=this.chooseMode(e,i),s=new et;if(o===Te.BYTE&&(a||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var l=We.getCharacterSetECIByName(i);l!==void 0&&this.appendECI(l,s)}this.appendModeInfo(o,s);var u=new et;this.appendBytes(e,o,u,i);var c;if(n!==null&&n.get(fo.QR_VERSION)!==void 0){var f=Number.parseInt(n.get(fo.QR_VERSION).toString(),10);c=In.getVersionForNumber(f);var d=this.calculateBitsNeeded(o,s,u,c);if(!this.willFit(d,c,r))throw new Ne("Data too big for requested version")}else c=this.recommendVersion(r,o,s,u);var p=new et;p.appendBitArray(s);var v=o===Te.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(v,c,o,p),p.appendBitArray(u);var g=c.getECBlocksForLevel(r),w=c.getTotalCodewords()-g.getTotalECCodewords();this.terminateBits(w,p);var x=this.interleaveWithECBytes(p,c.getTotalCodewords(),w,g.getNumBlocks()),m=new Uu;m.setECLevel(r),m.setMode(o),m.setVersion(c);var y=c.getDimensionForVersion(),_=new G3(y,y),A=this.chooseMaskPattern(x,r,c,_);return m.setMaskPattern(A),uh.buildMatrix(x,r,c,A,_),m.setMatrix(_),m},t.recommendVersion=function(e,r,n,i){var a=this.calculateBitsNeeded(r,n,i,In.getVersionForNumber(1)),o=this.chooseVersion(a,e),s=this.calculateBitsNeeded(r,n,i,o);return this.chooseVersion(s,e)},t.calculateBitsNeeded=function(e,r,n,i){return r.getSize()+e.getCharacterCountBits(i)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),We.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return Te.KANJI;for(var n=!1,i=!1,a=0,o=e.length;a<o;++a){var s=e.charAt(a);if(t.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)i=!0;else return Te.BYTE}return i?Te.ALPHANUMERIC:n?Te.NUMERIC:Te.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=qt.encode(e,We.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var i=0;i<n;i+=2){var a=r[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,s=0;s<Uu.NUM_MASK_PATTERNS;s++){uh.buildMatrix(e,r,n,s,i);var l=this.calculateMaskPenalty(i);l<a&&(a=l,o=s)}return o},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var i=In.getVersionForNumber(n);if(t.willFit(e,i,r))return i}throw new Ne("Data too big")},t.willFit=function(e,r,n){var i=r.getTotalCodewords(),a=r.getECBlocksForLevel(n),o=a.getTotalECCodewords(),s=i-o,l=(e+7)/8;return s>=l},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new Ne("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var i=0;i<4&&r.getSize()<n;++i)r.appendBit(!1);var a=r.getSize()&7;if(a>0)for(var i=a;i<8;i++)r.appendBit(!1);for(var o=e-r.getSizeInBytes(),i=0;i<o;++i)r.appendBits(i&1?17:236,8);if(r.getSize()!==n)throw new Ne("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,i,a,o){if(i>=n)throw new Ne("Block ID too large");var s=e%n,l=n-s,u=Math.floor(e/n),c=u+1,f=Math.floor(r/n),d=f+1,p=u-f,v=c-d;if(p!==v)throw new Ne("EC bytes mismatch");if(n!==l+s)throw new Ne("RS blocks mismatch");if(e!==(f+p)*l+(d+v)*s)throw new Ne("Total bytes mismatch");i<l?(a[0]=f,o[0]=p):(a[0]=d,o[0]=v)},t.interleaveWithECBytes=function(e,r,n,i){var a,o,s,l;if(e.getSizeInBytes()!==n)throw new Ne("Number of bits and data bytes does not match");for(var u=0,c=0,f=0,d=new Array,p=0;p<i;++p){var v=new Int32Array(1),g=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,i,p,v,g);var w=v[0],x=new Uint8Array(w);e.toBytes(8*u,x,0,w);var m=t.generateECBytes(x,g[0]);d.push(new q3(x,m)),c=Math.max(c,w),f=Math.max(f,m.length),u+=v[0]}if(n!==u)throw new Ne("Data bytes does not match offset");for(var y=new et,p=0;p<c;++p)try{for(var _=(a=void 0,ch(d)),A=_.next();!A.done;A=_.next()){var C=A.value,x=C.getDataBytes();p<x.length&&y.appendBits(x[p],8)}}catch(R){a={error:R}}finally{try{A&&!A.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}for(var p=0;p<f;++p)try{for(var E=(s=void 0,ch(d)),b=E.next();!b.done;b=E.next()){var C=b.value,m=C.getErrorCorrectionBytes();p<m.length&&y.appendBits(m[p],8)}}catch(R){s={error:R}}finally{try{b&&!b.done&&(l=E.return)&&l.call(E)}finally{if(s)throw s.error}}if(r!==y.getSizeInBytes())throw new Ne("Interleaving error: "+r+" and "+y.getSizeInBytes()+" differ.");return y},t.generateECBytes=function(e,r){for(var n=e.length,i=new Int32Array(n+r),a=0;a<n;a++)i[a]=e[a]&255;new mp(At.QR_CODE_FIELD_256).encode(i,r);for(var o=new Uint8Array(r),a=0;a<r;a++)o[a]=i[n+a];return o},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,i){var a=n.getCharacterCountBits(r);if(e>=1<<a)throw new Ne(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},t.appendBytes=function(e,r,n,i){switch(r){case Te.NUMERIC:t.appendNumericBytes(e,n);break;case Te.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case Te.BYTE:t.append8BitBytes(e,n,i);break;case Te.KANJI:t.appendKanjiBytes(e,n);break;default:throw new Ne("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var a=t.getDigit(e.charAt(i));if(i+2<n){var o=t.getDigit(e.charAt(i+1)),s=t.getDigit(e.charAt(i+2));r.appendBits(a*100+o*10+s,10),i+=3}else if(i+1<n){var o=t.getDigit(e.charAt(i+1));r.appendBits(a*10+o,7),i+=2}else r.appendBits(a,4),i++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var a=t.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new Ne;if(i+1<n){var o=t.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new Ne;r.appendBits(a*45+o,11),i+=2}else r.appendBits(a,6),i++}},t.append8BitBytes=function(e,r,n){var i;try{i=qt.encode(e,n)}catch(l){throw new Ne(l)}for(var a=0,o=i.length;a!==o;a++){var s=i[a];r.appendBits(s,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=qt.encode(e,We.SJIS)}catch(f){throw new Ne(f)}for(var i=n.length,a=0;a<i;a+=2){var o=n[a]&255,s=n[a+1]&255,l=o<<8&4294967295|s,u=-1;if(l>=33088&&l<=40956?u=l-33088:l>=57408&&l<=60351&&(u=l-49472),u===-1)throw new Ne("Invalid byte sequence");var c=(u>>8)*192+(u&255);r.appendBits(c,13)}},t.appendECI=function(e,r){r.appendBits(Te.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=We.UTF8.getName(),t})();var K3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){K3(e,t);function e(r,n,i,a,o,s,l,u){var c=t.call(this,s,l)||this;if(c.yuvData=r,c.dataWidth=n,c.dataHeight=i,c.left=a,c.top=o,a+s>n||o+l>i)throw new Q("Crop rectangle does not fit within image data.");return u&&c.reverseHorizontal(s,l),c}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Q("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(r+this.top)*this.dataWidth+this.left;return be.arraycopy(this.yuvData,a,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var i=r*n,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return be.arraycopy(this.yuvData,o,a,0,i),a;for(var s=0;s<n;s++){var l=s*r;be.arraycopy(this.yuvData,o,a,l,r),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,i,a,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(r*n),a=this.yuvData,o=this.top*this.dataWidth+this.left,s=0;s<n;s++){for(var l=s*r,u=0;u<r;u++){var c=a[o+u*e.THUMBNAIL_SCALE_FACTOR]&255;i[l+u]=4278190080|c*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<n;a++,o+=this.dataWidth)for(var s=o+r/2,l=o,u=o+r-1;l<s;l++,u--){var c=i[l];i[l]=i[u],i[u]=c}},e.prototype.invert=function(){return new Hc(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(As);var Y3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){Y3(e,t);function e(r,n,i,a,o,s,l){var u=t.call(this,n,i)||this;if(u.dataWidth=a,u.dataHeight=o,u.left=s,u.top=l,r.BYTES_PER_ELEMENT===4){for(var c=n*i,f=new Uint8ClampedArray(c),d=0;d<c;d++){var p=r[d],v=p>>16&255,g=p>>7&510,w=p&255;f[d]=(v+g+w)/4&255}u.luminances=f}else u.luminances=r;if(a===void 0&&(u.dataWidth=n),o===void 0&&(u.dataHeight=i),s===void 0&&(u.left=0),l===void 0&&(u.top=0),u.left+n>u.dataWidth||u.top+i>u.dataHeight)throw new Q("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Q("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(r+this.top)*this.dataWidth+this.left;return be.arraycopy(this.luminances,a,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var i=r*n,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return be.arraycopy(this.luminances,o,a,0,i),a;for(var s=0;s<n;s++){var l=s*r;be.arraycopy(this.luminances,o,a,l,r),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new Hc(this)},e})(As);var Z3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q3=function(t){Z3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(We),J3=function(){function t(){}return t.ISO_8859_1=We.ISO8859_1,t}(),$u,eE=301,tE=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=eE);return{LOG:t,ALOG:e}};$u=tE([],[]),$u.LOG;$u.ALOG;var fh;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(fh||(fh={}));var dh=129,yp=230,rE=231,nE=235,iE=236,aE=237,oE=238,sE=239,lE=240,vl=254,uE=254,hh="[)>05",ph="[)>06",vh="",we=0,nt=1,gt=2,ze=3,Ze=4,ct=5,cE=function(){function t(){}return t.prototype.getEncodingMode=function(){return we},t.prototype.encode=function(e){var r=sr.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),i=sr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case ct:e.writeCodeword(rE),e.signalEncoderChange(ct);return;case nt:e.writeCodeword(yp),e.signalEncoderChange(nt);return;case ze:e.writeCodeword(oE),e.signalEncoderChange(ze);break;case gt:e.writeCodeword(sE),e.signalEncoderChange(gt);break;case Ze:e.writeCodeword(lE),e.signalEncoderChange(Ze);break;default:throw new Error("Illegal mode: "+i)}else sr.isExtendedASCII(n)?(e.writeCodeword(nE),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(sr.isDigit(e)&&sr.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),fE=function(){function t(){}return t.prototype.getEncodingMode=function(){return ct},t.prototype.encode=function(e){var r=new ne;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var i=sr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(we);break}}var a=r.length()-1,o=1,s=e.getCodewordCount()+a+o;e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||l)if(a<=249)r.setCharAt(0,ue.getCharAt(a));else if(a<=1555)r.setCharAt(0,ue.getCharAt(Math.floor(a/250)+249)),r.insert(1,ue.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var u=0,n=r.length();u<n;u++)e.writeCodeword(this.randomize255State(r.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,i=e+n;return i<=255?i:i-256},t}(),qc=function(){function t(){}return t.prototype.getEncodingMode=function(){return nt},t.prototype.encodeMaximal=function(e){for(var r=new ne,n=0,i=e.pos,a=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,n=this.encodeChar(o,r),r.length()%3===0&&(i=e.pos,a=r.length())}if(a!==r.length()){var s=Math.floor(r.length()/3*2),l=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(l);var u=e.getSymbolInfo().getDataCapacity()-l,c=Math.floor(r.length()%3);(c===2&&u!==2||c===1&&(n>3||u!==1))&&(e.pos=i)}r.length()>0&&e.writeCodeword(yp),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new ne;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var i=this.encodeChar(n,r),a=Math.floor(r.length()/3)*2,o=e.getCodewordCount()+a;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var l=new ne;for(r.length()%3===2&&s!==2&&(i=this.backtrackOneCharacter(e,r,l,i));r.length()%3===1&&(i>3||s!==1);)i=this.backtrackOneCharacter(e,r,l,i);break}var u=r.length();if(u%3===0){var c=sr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(c!==this.getEncodingMode()){e.signalEncoderChange(we);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,i){var a=r.length(),o=r.toString().substring(0,a-i);r.setLengthToZero(),r.append(o),e.pos--;var s=e.getCurrentChar();return i=this.encodeChar(s,n),e.resetSymbolInfo(),i},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),i=r.length()%3,a=e.getCodewordCount()+n;e.updateSymbolInfo(a);var o=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(vl)}else if(o===1&&i===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(vl),e.pos--}else if(i===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(o>0||e.hasMoreCharacters())&&e.writeCodeword(vl)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(we)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,i=r%256,a=new ne;return a.append(n),a.append(i),a.toString()},t}(),dE=function(){function t(){}return t.prototype.getEncodingMode=function(){return Ze},t.prototype.encode=function(e){for(var r=new ne;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var i=r.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var a=r.toString().substring(4);r.setLengthToZero(),r.append(a);var o=sr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(we);break}}}r.append(ue.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(n>4)throw new Error("Count must not exceed 4");var o=n-1,s=this.encodeToCodewords(r.toString()),l=!e.hasMoreCharacters(),u=l&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}u?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(s)}finally{e.signalEncoderChange(we)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(ue.getCharAt(e-64)):sr.illegalCharacter(ue.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),i=r>=2?e.charAt(1).charCodeAt(0):0,a=r>=3?e.charAt(2).charCodeAt(0):0,o=r>=4?e.charAt(3).charCodeAt(0):0,s=(n<<18)+(i<<12)+(a<<6)+o,l=s>>16&255,u=s>>8&255,c=s&255,f=new ne;return f.append(l),r>=2&&f.append(u),r>=3&&f.append(c),f.toString()},t}(),hE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},me=function(){function t(e,r,n,i,a,o,s,l){s===void 0&&(s=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=s,this.rsBlockError=l}return t.lookup=function(e,r,n,i,a){var o,s;r===void 0&&(r=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var l=pE(gE),u=l.next();!u.done;u=l.next()){var c=u.value;if(!(r===1&&c.rectangular)&&!(r===2&&!c.rectangular)&&!(n!=null&&(c.getSymbolWidth()<n.getWidth()||c.getSymbolHeight()<n.getHeight()))&&!(i!=null&&(c.getSymbolWidth()>i.getWidth()||c.getSymbolHeight()>i.getHeight()))&&e<=c.dataCapacity)return c}}catch(f){o={error:f}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),vE=function(t){hE(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(me),gE=[new me(!1,3,5,8,8,1),new me(!1,5,7,10,10,1),new me(!0,5,7,16,6,1),new me(!1,8,10,12,12,1),new me(!0,10,11,14,6,2),new me(!1,12,12,14,14,1),new me(!0,16,14,24,10,1),new me(!1,18,14,16,16,1),new me(!1,22,18,18,18,1),new me(!0,22,18,16,10,2),new me(!1,30,20,20,20,1),new me(!0,32,24,16,14,2),new me(!1,36,24,22,22,1),new me(!1,44,28,24,24,1),new me(!0,49,28,22,14,2),new me(!1,62,36,14,14,4),new me(!1,86,42,16,16,4),new me(!1,114,48,18,18,4),new me(!1,144,56,20,20,4),new me(!1,174,68,22,22,4),new me(!1,204,84,24,24,4,102,42),new me(!1,280,112,14,14,16,140,56),new me(!1,368,144,16,16,16,92,36),new me(!1,456,192,18,18,16,114,48),new me(!1,576,224,20,20,16,144,56),new me(!1,696,272,22,22,16,174,68),new me(!1,816,336,24,24,16,136,56),new me(!1,1050,408,18,18,36,175,68),new me(!1,1304,496,20,20,36,163,62),new vE],mE=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(s){return s.charCodeAt(0)}),n=new ne,i=0,a=r.length;i<a;i++){var o=String.fromCharCode(r[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(o)}this.msg=n.toString(),this.shape=0,this.codewords=new ne,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=me.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),yE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xE=function(t){yE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return ze},e.prototype.encode=function(r){for(var n=new ne;r.hasMoreCharacters();){var i=r.getCurrentChar();r.pos++,this.encodeChar(i,n);var a=n.length();if(a%3===0){this.writeNextTriplet(r,n);var o=sr.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){r.signalEncoderChange(we);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):sr.illegalCharacter(ue.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var i=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),a=n.length();r.pos-=a,(r.getRemainingCharacters()>1||i>1||r.getRemainingCharacters()!==i)&&r.writeCodeword(uE),r.getNewEncoding()<0&&r.signalEncoderChange(we)},e}(qc),wE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_E=function(t){wE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return gt},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var i=2;return i+=this.encodeChar(r-128,n),i},e}(qc),sr=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=dh+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,i,a){r===void 0&&(r=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new qc,s=[new cE,o,new _E,new xE,new dE,new fE],l=new mE(e);l.setSymbolShape(r),l.setSizeConstraints(n,i),e.startsWith(hh)&&e.endsWith(vh)?(l.writeCodeword(iE),l.setSkipAtEnd(2),l.pos+=hh.length):e.startsWith(ph)&&e.endsWith(vh)&&(l.writeCodeword(aE),l.setSkipAtEnd(2),l.pos+=ph.length);var u=we;for(a&&(o.encodeMaximal(l),u=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)s[u].encode(l),l.getNewEncoding()>=0&&(u=l.getNewEncoding(),l.resetEncoderSignal());var c=l.getCodewordCount();l.updateSymbolInfo();var f=l.getSymbolInfo().getDataCapacity();c<f&&u!==we&&u!==ct&&u!==Ze&&l.writeCodeword("þ");var d=l.getCodewords();for(d.length()<f&&d.append(dh);d.length()<f;)d.append(this.randomize253State(d.length()+1));return l.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var i=this.lookAheadTestIntern(e,r,n);if(n===ze&&i===ze){for(var a=Math.min(r+3,e.length),o=r;o<a;o++)if(!this.isNativeX12(e.charCodeAt(o)))return we}else if(n===Ze&&i===Ze){for(var a=Math.min(r+4,e.length),o=r;o<a;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return we}return i},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var i;n===we?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[n]=0);for(var a=0,o=new Uint8Array(6),s=[];;){if(r+a===e.length){Ge.fill(o,0),Ge.fill(s,0);var l=this.findMinimums(i,s,ae.MAX_VALUE,o),u=this.getMinimumCount(o);if(s[we]===l)return we;if(u===1){if(o[ct]>0)return ct;if(o[Ze]>0)return Ze;if(o[gt]>0)return gt;if(o[ze]>0)return ze}return nt}var c=e.charCodeAt(r+a);if(a++,this.isDigit(c)?i[we]+=.5:this.isExtendedASCII(c)?(i[we]=Math.ceil(i[we]),i[we]+=2):(i[we]=Math.ceil(i[we]),i[we]++),this.isNativeC40(c)?i[nt]+=2/3:this.isExtendedASCII(c)?i[nt]+=8/3:i[nt]+=4/3,this.isNativeText(c)?i[gt]+=2/3:this.isExtendedASCII(c)?i[gt]+=8/3:i[gt]+=4/3,this.isNativeX12(c)?i[ze]+=2/3:this.isExtendedASCII(c)?i[ze]+=13/3:i[ze]+=10/3,this.isNativeEDIFACT(c)?i[Ze]+=3/4:this.isExtendedASCII(c)?i[Ze]+=17/4:i[Ze]+=13/4,this.isSpecialB256(c)?i[ct]+=4:i[ct]++,a>=4){if(Ge.fill(o,0),Ge.fill(s,0),this.findMinimums(i,s,ae.MAX_VALUE,o),s[we]<this.min(s[ct],s[nt],s[gt],s[ze],s[Ze]))return we;if(s[ct]<s[we]||s[ct]+1<this.min(s[nt],s[gt],s[ze],s[Ze]))return ct;if(s[Ze]+1<this.min(s[ct],s[nt],s[gt],s[ze],s[we]))return Ze;if(s[gt]+1<this.min(s[ct],s[nt],s[Ze],s[ze],s[we]))return gt;if(s[ze]+1<this.min(s[ct],s[nt],s[Ze],s[gt],s[we]))return ze;if(s[nt]+1<this.min(s[we],s[ct],s[Ze],s[gt])){if(s[nt]<s[ze])return nt;if(s[nt]===s[ze]){for(var f=r+a+1;f<e.length;){var d=e.charCodeAt(f);if(this.isX12TermSep(d))return ze;if(!this.isNativeX12(d))break;f++}return nt}}}}},t.min=function(e,r,n,i,a){var o=Math.min(e,Math.min(r,Math.min(n,i)));return a===void 0?o:Math.min(o,a)},t.findMinimums=function(e,r,n,i){for(var a=0;a<6;a++){var o=r[a]=Math.ceil(e[a]);n>o&&(n=o,Ge.fill(i,0)),n===o&&(i[a]=i[a]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,i=r;i<n&&this.isDigit(e.charCodeAt(i));)i++;return i-r},t.illegalCharacter=function(e){var r=ae.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),gl=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gh=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return qt.encode(e,this.charset)!=null}catch{return!1}},t}(),EE=function(){function t(e,r,n){var i,a,o,s,l,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(D){return new gh(Q3.forName(D))}),this.encoders=[];var c=[];c.push(new gh(J3.ISO_8859_1));for(var f=r!=null&&r.name.startsWith("UTF"),d=0;d<e.length;d++){var p=!1;try{for(var v=(i=void 0,gl(c)),g=v.next();!g.done;g=v.next()){var w=g.value,x=e.charAt(d),m=x.charCodeAt(0);if(m===n||w.canEncode(x)){p=!0;break}}}catch(D){i={error:D}}finally{try{g&&!g.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}if(!p)try{for(var y=(o=void 0,gl(this.ENCODERS)),_=y.next();!_.done;_=y.next()){var w=_.value;if(w.canEncode(e.charAt(d))){c.push(w),p=!0;break}}}catch(D){o={error:D}}finally{try{_&&!_.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}p||(f=!0)}if(c.length===1&&!f)this.encoders=[c[0]];else{this.encoders=[];var A=0;try{for(var C=gl(c),E=C.next();!E.done;E=C.next()){var w=E.value;this.encoders[A++]=w}}catch(D){l={error:D}}finally{try{E&&!E.done&&(u=C.return)&&u.call(C)}finally{if(l)throw l.error}}}var b=-1;if(r!=null){for(var d=0;d<this.encoders.length;d++)if(this.encoders[d]!=null&&r.name===this.encoders[d].name){b=d;break}}this.priorityEncoderIndex=b}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return qt.encode(ue.getCharAt(e),this.encoders[r].name)},t}(),CE=3,SE=function(){function t(e,r,n){this.fnc1=n;var i=new EE(e,r,n);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=e.charAt(a).charCodeAt(0);this.bytes[a]=o===n?1e3:o}else this.bytes=this.encodeMinimally(e,i,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new ne,i=e;i<r;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");n.append(this.charAt(i))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,i,a,o){var s=e.charAt(i).charCodeAt(0),l=0,u=r.length();r.getPriorityEncoderIndex()>=0&&(s===o||r.canEncode(s,r.getPriorityEncoderIndex()))&&(l=r.getPriorityEncoderIndex(),u=l+1);for(var c=l;c<u;c++)(s===o||r.canEncode(s,c))&&this.addEdge(n,i+1,new mh(s,r,c,a,o))},t.prototype.encodeMinimally=function(e,r,n){var i=e.length,a=new mh[i+1][r.length()];this.addEdges(e,r,a,0,null,n);for(var o=1;o<=i;o++){for(var s=0;s<r.length();s++)a[o][s]!=null&&o<i&&this.addEdges(e,r,a,o,a[o][s],n);for(var s=0;s<r.length();s++)a[o-1][s]=null}for(var l=-1,u=ae.MAX_VALUE,s=0;s<r.length();s++)if(a[i][s]!=null){var c=a[i][s];c.cachedTotalSize<u&&(u=c.cachedTotalSize,l=s)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],d=a[i][l];d!=null;){if(d.isFNC1())f.unshift(1e3);else for(var p=r.encode(d.c,d.encoderIndex),o=p.length-1;o>=0;o--)f.unshift(p[o]&255);var v=d.previous===null?0:d.previous.encoderIndex;v!==d.encoderIndex&&f.unshift(256+r.getECIValue(d.encoderIndex)),d=d.previous}for(var g=[],o=0;o<g.length;o++)g[o]=f[o];return g},t}(),mh=function(){function t(e,r,n,i,a){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var o=this.isFNC1()?1:r.encode(e,n).length,s=i===null?0:i.encoderIndex;s!==n&&(o+=CE),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),AE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var yh;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(yh||(yh={}));(function(t){AE(e,t);function e(r,n,i,a,o){var s=t.call(this,r,n,i)||this;return s.shape=a,s.macroId=o,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(SE);var bE=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),xh=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),IE=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),NE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kc=function(t){NE(e,t);function e(r,n,i){var a=t.call(this,r)||this;return a.value=n,a.bitCount=i,a}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+ae.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(IE),TE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),OE=function(t){TE(e,t);function e(r,n,i){var a=t.call(this,r,0,0)||this;return a.binaryShiftStart=n,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(r,n){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):i===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(Kc);function kE(t,e,r){return new OE(t,e,r)}function zi(t,e,r){return new Kc(t,e,r)}var DE=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],rn=0,rs=1,Wt=2,xp=3,yr=4,RE=new Kc(null,0,0),ml=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],PE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function ME(t){var e,r;try{for(var n=PE(t),i=n.next();!i.done;i=n.next()){var a=i.value;Ge.fill(a,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[rn][yr]=0,t[rs][yr]=0,t[rs][rn]=28,t[xp][yr]=0,t[Wt][yr]=0,t[Wt][rn]=15,t}var wp=ME(Ge.createInt32Array(6,6)),jE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LE=function(){function t(e,r,n,i){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=i}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,i=this.token;if(e!==this.mode){var a=ml[this.mode][e];i=zi(i,a&65535,a>>16),n+=a>>16}var o=e===Wt?4:5;return i=zi(i,r,o),new t(i,e,0,n+o)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,i=this.mode===Wt?4:5;return n=zi(n,wp[this.mode][e],i),n=zi(n,r,5),new t(n,this.mode,0,this.bitCount+i+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,i=this.bitCount;if(this.mode===yr||this.mode===Wt){var a=ml[n][rn];r=zi(r,a&65535,a>>16),i+=a>>16,n=rn}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new t(r,n,this.binaryShiftByteCount+1,i+o);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=kE(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(ml[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new et;try{for(var s=jE(i),l=s.next();!l.done;l=s.next()){var u=l.value;u.appendTo(o,e)}}catch(c){r={error:c}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o},t.prototype.toString=function(){return ue.format("%s bits=%d bytes=%d",DE[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(RE,rn,0,0),t}();function BE(t){var e=ue.getCharCode(" "),r=ue.getCharCode("."),n=ue.getCharCode(",");t[rn][e]=1;for(var i=ue.getCharCode("Z"),a=ue.getCharCode("A"),o=a;o<=i;o++)t[rn][o]=o-a+2;t[rs][e]=1;for(var s=ue.getCharCode("z"),l=ue.getCharCode("a"),o=l;o<=s;o++)t[rs][o]=o-l+2;t[Wt][e]=1;for(var u=ue.getCharCode("9"),c=ue.getCharCode("0"),o=c;o<=u;o++)t[Wt][o]=o-c+2;t[Wt][n]=12,t[Wt][r]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],d=0;d<f.length;d++)t[xp][ue.getCharCode(f[d])]=d;for(var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],d=0;d<p.length;d++)ue.getCharCode(p[d])>0&&(t[yr][ue.getCharCode(p[d])]=d);return t}var yl=BE(Ge.createInt32Array(5,256)),ho=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FE=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=ue.getCharCode(" "),r=ue.getCharCode(`
`),n=xh.singletonList(LE.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case ue.getCharCode("\r"):a=o===r?2:0;break;case ue.getCharCode("."):a=o===e?3:0;break;case ue.getCharCode(","):a=o===e?4:0;break;case ue.getCharCode(":"):a=o===e?5:0;break;default:a=0}a>0?(n=t.updateStateListForPair(n,i,a),i++):n=this.updateStateListForChar(n,i)}var s=xh.min(n,function(l,u){return l.getBitCount()-u.getBitCount()});return s.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,i,a=[];try{for(var o=ho(e),s=o.next();!s.done;s=o.next()){var l=s.value;this.updateStateForChar(l,r,a)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return t.simplifyStates(a)},t.prototype.updateStateForChar=function(e,r,n){for(var i=this.text[r]&255,a=yl[e.getMode()][i]>0,o=null,s=0;s<=yr;s++){var l=yl[s][i];if(l>0){if(o==null&&(o=e.endBinaryShift(r)),!a||s===e.getMode()||s===Wt){var u=o.latchAndAppend(s,l);n.push(u)}if(!a&&wp[e.getMode()][s]>=0){var c=o.shiftAndAppend(s,l);n.push(c)}}}if(e.getBinaryShiftByteCount()>0||yl[e.getMode()][i]===0){var f=e.addBinaryShiftChar(r);n.push(f)}},t.updateStateListForPair=function(e,r,n){var i,a,o=[];try{for(var s=ho(e),l=s.next();!l.done;l=s.next()){var u=l.value;this.updateStateForPair(u,r,n,o)}}catch(c){i={error:c}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return this.simplifyStates(o)},t.updateStateForPair=function(e,r,n,i){var a=e.endBinaryShift(r);if(i.push(a.latchAndAppend(yr,n)),e.getMode()!==yr&&i.push(a.shiftAndAppend(yr,n)),n===3||n===4){var o=a.latchAndAppend(Wt,16-n).latchAndAppend(Wt,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);i.push(s)}},t.simplifyStates=function(e){var r,n,i,a,o=[];try{for(var s=ho(e),l=s.next();!l.done;l=s.next()){var u=l.value,c=!0,f=function(w){if(w.isBetterThanOrEqualTo(u))return c=!1,"break";u.isBetterThanOrEqualTo(w)&&(o=o.filter(function(x){return x!==w}))};try{for(var d=(i=void 0,ho(o)),p=d.next();!p.done;p=d.next()){var v=p.value,g=f(v);if(g==="break")break}}catch(w){i={error:w}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}c&&o.push(u)}}catch(w){r={error:w}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o},t}(),UE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var i=new FE(e).encode(),a=ae.truncDivision(i.getSize()*r,100)+11,o=i.getSize()+a,s,l,u,c,f;if(n!==t.DEFAULT_AZTEC_LAYERS){if(s=n<0,l=Math.abs(n),l>(s?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new Q(ue.format("Illegal value %s for layers",n));u=t.totalBitsInLayer(l,s),c=t.WORD_SIZE[l];var d=u-u%c;if(f=t.stuffBits(i,c),f.getSize()+a>d)throw new Q("Data to large for user specified layer");if(s&&f.getSize()>c*64)throw new Q("Data to large for user specified layer")}else{c=0,f=null;for(var p=0;;p++){if(p>t.MAX_NB_BITS)throw new Q("Data too large for an Aztec code");if(s=p<=3,l=s?p+1:p,u=t.totalBitsInLayer(l,s),!(o>u)){(f==null||c!==t.WORD_SIZE[l])&&(c=t.WORD_SIZE[l],f=t.stuffBits(i,c));var d=u-u%c;if(!(s&&f.getSize()>c*64)&&f.getSize()+a<=d)break}}}var v=t.generateCheckWords(f,u,c),g=f.getSize()/c,w=t.generateModeMessage(s,l,g),x=(s?11:14)+l*4,m=new Int32Array(x),y;if(s){y=x;for(var p=0;p<m.length;p++)m[p]=p}else{y=x+1+2*ae.truncDivision(ae.truncDivision(x,2)-1,15);for(var _=ae.truncDivision(x,2),A=ae.truncDivision(y,2),p=0;p<_;p++){var C=p+ae.truncDivision(p,15);m[_-p-1]=A-C-1,m[_+p]=A+C+1}}for(var E=new _r(y),p=0,b=0;p<l;p++){for(var D=(l-p)*4+(s?9:12),R=0;R<D;R++)for(var J=R*2,q=0;q<2;q++)v.get(b+J+q)&&E.set(m[p*2+q],m[p*2+R]),v.get(b+D*2+J+q)&&E.set(m[p*2+R],m[x-1-p*2-q]),v.get(b+D*4+J+q)&&E.set(m[x-1-p*2-q],m[x-1-p*2-R]),v.get(b+D*6+J+q)&&E.set(m[x-1-p*2-R],m[p*2+q]);b+=D*8}if(t.drawModeMessage(E,s,y,w),s)t.drawBullsEye(E,ae.truncDivision(y,2),5);else{t.drawBullsEye(E,ae.truncDivision(y,2),7);for(var p=0,R=0;p<ae.truncDivision(x,2)-1;p+=15,R+=16)for(var q=ae.truncDivision(y,2)&1;q<y;q+=2)E.set(ae.truncDivision(y,2)-R,q),E.set(ae.truncDivision(y,2)+R,q),E.set(q,ae.truncDivision(y,2)-R),E.set(q,ae.truncDivision(y,2)+R)}var ee=new bE;return ee.setCompact(s),ee.setSize(y),ee.setLayers(l),ee.setCodeWords(g),ee.setMatrix(E),ee},t.drawBullsEye=function(e,r,n){for(var i=0;i<n;i+=2)for(var a=r-i;a<=r+i;a++)e.set(a,r-i),e.set(a,r+i),e.set(r-i,a),e.set(r+i,a);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var i=new et;return e?(i.appendBits(r-1,2),i.appendBits(n-1,6),i=t.generateCheckWords(i,28,4)):(i.appendBits(r-1,5),i.appendBits(n-1,11),i=t.generateCheckWords(i,40,4)),i},t.drawModeMessage=function(e,r,n,i){var a=ae.truncDivision(n,2);if(r)for(var o=0;o<7;o++){var s=a-3+o;i.get(o)&&e.set(s,a-5),i.get(o+7)&&e.set(a+5,s),i.get(20-o)&&e.set(s,a+5),i.get(27-o)&&e.set(a-5,s)}else for(var o=0;o<10;o++){var s=a-5+o+ae.truncDivision(o,5);i.get(o)&&e.set(s,a-7),i.get(o+10)&&e.set(a+7,s),i.get(29-o)&&e.set(s,a+7),i.get(39-o)&&e.set(a-7,s)}},t.generateCheckWords=function(e,r,n){var i,a,o=e.getSize()/n,s=new mp(t.getGF(n)),l=ae.truncDivision(r,n),u=t.bitsToWords(e,n,l);s.encode(u,l-o);var c=r%n,f=new et;f.appendBits(0,c);try{for(var d=UE(Array.from(u)),p=d.next();!p.done;p=d.next()){var v=p.value;f.appendBits(v,n)}}catch(g){i={error:g}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return f},t.bitsToWords=function(e,r,n){var i=new Int32Array(n),a,o;for(a=0,o=e.getSize()/r;a<o;a++){for(var s=0,l=0;l<r;l++)s|=e.get(a*r+l)?1<<r-l-1:0;i[a]=s}return i},t.getGF=function(e){switch(e){case 4:return At.AZTEC_PARAM;case 6:return At.AZTEC_DATA_6;case 8:return At.AZTEC_DATA_8;case 10:return At.AZTEC_DATA_10;case 12:return At.AZTEC_DATA_12;default:throw new Q("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new et,i=e.getSize(),a=(1<<r)-2,o=0;o<i;o+=r){for(var s=0,l=0;l<r;l++)(o+l>=i||e.get(o+l))&&(s|=1<<r-1-l);(s&a)===a?(n.appendBits(s&a,r),o--):s&a?n.appendBits(s,r):(n.appendBits(s|1,r),o--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var _p={exports:{}};(function(t,e){(function(n,i){t.exports=i(T)})(jt,function(r){return function(n){var i={};function a(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=n,a.c=i,a.d=function(o,s,l){a.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:l})},a.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,s){if(s&1&&(o=a(o)),s&8||s&4&&typeof o=="object"&&o&&o.__esModule)return o;var l=Object.create(null);if(a.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:o}),s&2&&typeof o!="string")for(var u in o)a.d(l,u,(function(c){return o[c]}).bind(null,u));return l},a.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(s,"a",s),s},a.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},a.p="",a(a.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(n,i,a){a.r(i);var o=a("react"),s=function(){var d=function(p,v){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,w){g.__proto__=w}||function(g,w){for(var x in w)w.hasOwnProperty(x)&&(g[x]=w[x])},d(p,v)};return function(p,v){d(p,v);function g(){this.constructor=p}p.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}}(),l=function(){return l=Object.assign||function(d){for(var p,v=1,g=arguments.length;v<g;v++){p=arguments[v];for(var w in p)Object.prototype.hasOwnProperty.call(p,w)&&(d[w]=p[w])}return d},l.apply(this,arguments)},u=function(d,p){var v={};for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&p.indexOf(g)<0&&(v[g]=d[g]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,g=Object.getOwnPropertySymbols(d);w<g.length;w++)p.indexOf(g[w])<0&&Object.prototype.propertyIsEnumerable.call(d,g[w])&&(v[g[w]]=d[g[w]]);return v};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(p){var v=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return v?new Promise(function(g,w){v.call(navigator,p,g,w)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function c(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var f=function(d){s(p,d);function p(v){var g=d.call(this,v)||this;return g.canvas=null,g.ctx=null,g.requestUserMediaId=0,g.unmounted=!1,g.state={hasUserMedia:!1},g}return p.prototype.componentDidMount=function(){var v=this,g=v.state,w=v.props;if(this.unmounted=!1,!c()){w.onUserMediaError("getUserMedia not supported");return}g.hasUserMedia||this.requestUserMedia(),w.children&&typeof w.children!="function"&&console.warn("children must be a function")},p.prototype.componentDidUpdate=function(v){var g=this.props;if(!c()){g.onUserMediaError("getUserMedia not supported");return}var w=JSON.stringify(v.audioConstraints)!==JSON.stringify(g.audioConstraints),x=JSON.stringify(v.videoConstraints)!==JSON.stringify(g.videoConstraints),m=v.minScreenshotWidth!==g.minScreenshotWidth,y=v.minScreenshotHeight!==g.minScreenshotHeight;(x||m||y)&&(this.canvas=null,this.ctx=null),(w||x)&&(this.stopAndCleanup(),this.requestUserMedia())},p.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},p.stopMediaStream=function(v){v&&(v.getVideoTracks&&v.getAudioTracks?(v.getVideoTracks().map(function(g){v.removeTrack(g),g.stop()}),v.getAudioTracks().map(function(g){v.removeTrack(g),g.stop()})):v.stop())},p.prototype.stopAndCleanup=function(){var v=this.state;v.hasUserMedia&&(p.stopMediaStream(this.stream),v.src&&window.URL.revokeObjectURL(v.src))},p.prototype.getScreenshot=function(v){var g=this,w=g.state,x=g.props;if(!w.hasUserMedia)return null;var m=this.getCanvas(v);return m&&m.toDataURL(x.screenshotFormat,x.screenshotQuality)},p.prototype.getCanvas=function(v){var g=this,w=g.state,x=g.props;if(!this.video||!w.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var m=this.video.videoWidth,y=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var _=m/y;m=x.minScreenshotWidth||this.video.clientWidth,y=m/_,x.minScreenshotHeight&&y<x.minScreenshotHeight&&(y=x.minScreenshotHeight,m=y*_)}this.canvas=document.createElement("canvas"),this.canvas.width=(v==null?void 0:v.width)||m,this.canvas.height=(v==null?void 0:v.height)||y,this.ctx=this.canvas.getContext("2d")}var A=this,C=A.ctx,E=A.canvas;return C&&E&&(E.width=(v==null?void 0:v.width)||E.width,E.height=(v==null?void 0:v.height)||E.height,x.mirrored&&(C.translate(E.width,0),C.scale(-1,1)),C.imageSmoothingEnabled=x.imageSmoothing,C.drawImage(this.video,0,0,(v==null?void 0:v.width)||E.width,(v==null?void 0:v.height)||E.height),x.mirrored&&(C.scale(-1,1),C.translate(-E.width,0))),E},p.prototype.requestUserMedia=function(){var v=this,g=this.props,w=function(y,_){var A={video:typeof _<"u"?_:!0};g.audio&&(A.audio=typeof y<"u"?y:!0),v.requestUserMediaId++;var C=v.requestUserMediaId;navigator.mediaDevices.getUserMedia(A).then(function(E){v.unmounted||C!==v.requestUserMediaId?p.stopMediaStream(E):v.handleUserMedia(null,E)}).catch(function(E){v.handleUserMedia(E)})};if("mediaDevices"in navigator)w(g.audioConstraints,g.videoConstraints);else{var x=function(y){return{optional:[{sourceId:y}]}},m=function(y){var _=y.deviceId;return typeof _=="string"?_:Array.isArray(_)&&_.length>0?_[0]:typeof _=="object"&&_.ideal?_.ideal:null};MediaStreamTrack.getSources(function(y){var _=null,A=null;y.forEach(function(b){b.kind==="audio"?_=b.id:b.kind==="video"&&(A=b.id)});var C=m(g.audioConstraints);C&&(_=C);var E=m(g.videoConstraints);E&&(A=E),w(x(_),x(A))})}},p.prototype.handleUserMedia=function(v,g){var w=this.props;if(v||!g){this.setState({hasUserMedia:!1}),w.onUserMediaError(v);return}this.stream=g;try{this.video&&(this.video.srcObject=g),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(g)})}w.onUserMedia(g)},p.prototype.render=function(){var v=this,g=this,w=g.state,x=g.props,m=x.audio;x.forceScreenshotSourceSize;var y=x.disablePictureInPicture;x.onUserMedia,x.onUserMediaError,x.screenshotFormat,x.screenshotQuality,x.minScreenshotWidth,x.minScreenshotHeight,x.audioConstraints,x.videoConstraints,x.imageSmoothing;var _=x.mirrored,A=x.style,C=A===void 0?{}:A,E=x.children,b=u(x,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),D=_?l(l({},C),{transform:(C.transform||"")+" scaleX(-1)"}):C,R={getScreenshot:this.getScreenshot.bind(this)};return o.createElement(o.Fragment,null,o.createElement("video",l({autoPlay:!0,disablePictureInPicture:y,src:w.src,muted:!m,playsInline:!0,ref:function(J){v.video=J},style:D},b)),E&&E(R))},p.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},p}(o.Component);i.default=f},react:function(n,i){n.exports=r}}).default})})(_p);var $E=_p.exports;const zE=_h($E),HE=({onUpdate:t,onError:e,width:r="100%",height:n="100%",facingMode:i="environment",torch:a,delay:o=500,videoConstraints:s,stopStream:l,formats:u})=>{const c=T.useRef(null),f=T.useCallback(()=>{var v;const d=new z3(new Map([[ke.POSSIBLE_FORMATS,u==null?void 0:u.map(g=>typeof g=="string"?Z[g]:g)]])),p=(v=c==null?void 0:c.current)==null?void 0:v.getScreenshot();p&&d.decodeFromImage(void 0,p).then(g=>{t(null,g)}).catch(g=>{t(g)})},[t,u]);return T.useEffect(()=>{var d,p,v;if(typeof a=="boolean"&&((d=navigator==null?void 0:navigator.mediaDevices)==null?void 0:d.getSupportedConstraints()).torch){const g=(v=(p=c==null?void 0:c.current)==null?void 0:p.video)==null?void 0:v.srcObject,w=g==null?void 0:g.getVideoTracks()[0];w&&w.getCapabilities().torch&&w.applyConstraints({advanced:[{torch:a}]}).catch(x=>t(x))}},[a,t]),T.useEffect(()=>{var d,p;if(l){let v=(p=(d=c==null?void 0:c.current)==null?void 0:d.video)==null?void 0:p.srcObject;v&&(v.getTracks().forEach(g=>{v==null||v.removeTrack(g),g.stop()}),v=null)}},[l]),T.useEffect(()=>{const d=setInterval(f,o);return()=>{clearInterval(d)}},[f,o]),h.jsx(zE,{width:r,height:n,ref:c,screenshotFormat:"image/jpeg",videoConstraints:s||{facingMode:i},audio:!1,onUserMediaError:e,"data-testid":"video"})};var wh;(function(t){t.AZTEC="AZTEC",t.CODABAR="CODABAR",t.CODE_39="CODE_39",t.CODE_93="CODE_93",t.CODE_128="CODE_128",t.DATA_MATRIX="DATA_MATRIX",t.EAN_8="EAN_8",t.EAN_13="EAN_13",t.ITF="ITF",t.MAXICODE="MAXICODE",t.PDF_417="PDF_417",t.QR_CODE="QR_CODE",t.RSS_14="RSS_14",t.RSS_EXPANDED="RSS_EXPANDED",t.UPC_A="UPC_A",t.UPC_E="UPC_E",t.UPC_EAN_EXTENSION="UPC_EAN_EXTENSION"})(wh||(wh={}));const VE=({isOpen:t,onClose:e,onScanSuccess:r,onScanError:n})=>{const[i,a]=T.useState(""),[o,s]=T.useState(!1),[l,u]=T.useState(""),[c,f]=T.useState(null),[d,p]=T.useState("portrait");T.useEffect(()=>{const A=()=>p(tw());return A(),window.addEventListener("orientationchange",A),()=>window.removeEventListener("orientationchange",A)},[]),T.useEffect(()=>{t?(a(""),u(""),s(!0),f(null)):s(!1)},[t]),T.useEffect(()=>{t&&Iu()&&Ld()&&v()},[t]);const v=async()=>{try{const A=await navigator.permissions.query({name:"camera"});if(f(A.state==="granted"),A.state==="denied"){u("Camera permission denied. Please enable camera access in your browser settings.");return}}catch{f(null)}},g=(A,C)=>{if(C){a(C.text),s(!1);const E=w(C.text);E?r(E,C.text):(u("Invalid product code format. Expected format: [8-digit prefix]JI4ACO-GCAS17BK04"),n&&n("Invalid format"))}A&&A.name!=="NotAllowedError"&&(u("Scanning error occurred. Please try again."),n&&n(A.message))},w=A=>{if(!A||typeof A!="string")return null;const C=/^(\d{8})([A-Z0-9\-]+)$/,E=/^([A-Z0-9\-]+)$/;let b=A.match(C);return b?b[2]:(b=A.match(E),b?b[1]:null)},x=()=>{s(!1),a(""),u(""),e()},m=()=>{a(""),u(""),s(!0)};if(!t)return null;const y=Iu(),_=Ld();return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:`bg-white rounded-lg w-full max-w-md ${d==="landscape"?"max-h-96":"max-h-[90vh]"}`,children:[h.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[h.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[h.jsx(Hx,{className:"h-5 w-5"}),"Scan Product Code"]}),h.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600",children:h.jsx(Pt,{className:"h-6 w-6"})})]}),h.jsx("div",{className:"p-4",children:y?_?c===!1?h.jsxs("div",{className:"text-center py-8",children:[h.jsx(Cn,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600 mb-2",children:"Camera permission required"}),h.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Please allow camera access to scan product codes"}),h.jsx("button",{onClick:v,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Request Permission"})]}):o?h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Point your camera at the product code"}),h.jsx("p",{className:"text-xs text-gray-500",children:"Supports formats: JI4ACO-GCAS17BK04 or 25000100JI4ACO-GCAS17BK04"})]}),h.jsxs("div",{className:"relative bg-gray-100 rounded-lg overflow-hidden",style:{height:"300px"},children:[h.jsx(HE,{width:"100%",height:"100%",onUpdate:g,facingMode:"environment"}),h.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:h.jsx("div",{className:"w-48 h-24 border-2 border-white border-dashed rounded-lg opacity-50"})})]}),h.jsx("div",{className:"flex justify-center",children:h.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})})]}):i?h.jsxs("div",{className:"text-center py-8",children:[h.jsx(Ss,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600 mb-2",children:"Product code scanned successfully!"}),h.jsx("p",{className:"text-sm font-mono bg-gray-100 p-2 rounded mb-4 break-all",children:i}),h.jsxs("div",{className:"space-x-2",children:[h.jsx("button",{onClick:m,className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Scan Again"}),h.jsx("button",{onClick:x,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Done"})]})]}):l?h.jsxs("div",{className:"text-center py-8",children:[h.jsx(Cn,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600 mb-2",children:"Scan Error"}),h.jsx("p",{className:"text-sm text-gray-500 mb-4",children:l}),h.jsxs("div",{className:"space-x-2",children:[h.jsx("button",{onClick:m,className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Try Again"}),h.jsx("button",{onClick:x,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Cancel"})]})]}):null:h.jsxs("div",{className:"text-center py-8",children:[h.jsx(Cn,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600 mb-2",children:"Camera not supported"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Your device doesn't support camera access"})]}):h.jsxs("div",{className:"text-center py-8",children:[h.jsx(Cn,{className:"h-12 w-12 text-orange-500 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600 mb-2",children:"Scanning is only available on mobile devices"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Please use a mobile device or tablet to scan product codes"})]})})]})})},WE=({session:t,onBack:e})=>{const{user:r}=Ii(),[n,i]=T.useState([]),[a,o]=T.useState({}),[s,l]=T.useState([]),[u,c]=T.useState(!0),[f,d]=T.useState(""),[p,v]=T.useState("all"),[g,w]=T.useState(!1),[x,m]=T.useState(!1),[y,_]=T.useState(null),[A,C]=T.useState(""),[E,b]=T.useState(""),[D,R]=T.useState(!1),[J,q]=T.useState(new Set),[ee,z]=T.useState(!1),[te,ce]=T.useState(null),[P,O]=T.useState(""),[L,X]=T.useState([]),[K,Y]=T.useState(0),[Ce,fe]=T.useState(null),[fr,Ke]=T.useState(null),[Zt,Qt]=T.useState("idle"),[Rr,jn]=T.useState(!1),dr=T.useRef(null),Ep=T.useRef(null),Ua=T.useRef(typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2)}`),Ti=T.useRef(!1),Yc=T.useRef(0),Cp=N=>!t||!N?null:`calc:${t.id}:${N.id}`,$a=T.useCallback(N=>{b(N),Yc.current=Date.now();try{dr.current&&y&&dr.current.send({type:"broadcast",event:"calc_update",payload:{expr:N,itemId:y.id,location:A,senderId:(r==null?void 0:r.id)||null,clientId:Ua.current,ts:Date.now()}})}catch{}},[y,A,r]),Zc=N=>N===0?"0":N.toLocaleString("en-US"),Sp=N=>{if(fe(null),Ke(null),!N||N.trim()===""||N.trim()==="+")return Y(0),0;try{let F=N.replace(/[^0-9+\-*/.() ]/g,"");if(F=F.replace(/[+\-*/.]+$/,"").trim(),!F)return Y(0),0;const M=[{pattern:/\d+\s*[\*\/]\s*[\+\-\*\/]\s*\d+/,message:"Invalid operator combination",type:"invalid_combination"},{pattern:/\d+\s*[\+\-]\s*[\*\/]\s*\d+/,message:"Invalid operator combination",type:"invalid_combination"},{pattern:/\d+\s*\*\s*\*\s*\d+/,message:"Double multiplication operator",type:"double_operator"},{pattern:/\d+\s*\/\s*\/\s*\d+/,message:"Double division operator",type:"double_operator"},{pattern:/\d+\s*\-\s*\-\s*\d+/,message:"Double minus operator",type:"double_operator"},{pattern:/\d+\s*\*{2,}$/,message:"Multiple trailing multiplication operators",type:"trailing_operator"},{pattern:/\d+\s*\/+$/,message:"Trailing division operator",type:"trailing_operator"},{pattern:/\d+\s*\-{2,}$/,message:"Multiple trailing minus operators",type:"trailing_operator"},{pattern:/^\s*\*/,message:"Leading multiplication operator",type:"leading_operator"},{pattern:/^\s*\//,message:"Leading division operator",type:"leading_operator"},{pattern:/\(\s*\)/,message:"Empty parentheses",type:"empty_parentheses"},{pattern:/\d+\s*\(\s*\d+/,message:"Missing operator before parentheses",type:"missing_operator"},{pattern:/\d+\s*\)\s*\d+/,message:"Missing operator after parentheses",type:"missing_operator"}];for(const{pattern:$,message:G,type:pe}of M){const le=$.exec(N);if(le)return fe({message:`Calculation error: ${G}`,position:le.index,length:le[0].length,type:pe}),Y(0),0}if(!/^[0-9+\-*/.() ]+$/.test(F))return fe({message:"Invalid characters in expression",position:N.search(/[^0-9+\-*/.() ]/),length:1,type:"invalid_character"}),Y(0),0;const V=new Function("return "+F)();return typeof V!="number"||isNaN(V)||!isFinite(V)?(fe({message:"Invalid calculation result",position:0,length:N.length,type:"calculation_error"}),Y(0),0):(Y(Math.max(0,Math.floor(V))),Math.max(0,Math.floor(V)))}catch{let M=0;if(N){const V=["+","-","*","/"];for(let $=0;$<N.length;$++)if(V.includes(N[$])&&($===0||V.includes(N[$-1])||$===N.length-1)){M=$;break}}return fe({message:"Syntax error in expression",position:M,length:1,type:"syntax_error"}),Y(0),0}};T.useEffect(()=>{Sp(E)},[E]),T.useEffect(()=>{if(!t)return;Ap();const N=bp();return()=>{typeof N=="function"&&N()}},[t]),T.useEffect(()=>{const N=localStorage.getItem(`lastSelectedLocation_${t==null?void 0:t.id}_${r==null?void 0:r.id}`);N&&O(N)},[t,r]),T.useEffect(()=>{if(y&&A){const F=(a[y.id]||[]).find(M=>M.location===A);if(F){z(!0),ce(F.id);const M=F.calculation||F.countedQty.toString();b(M.endsWith("+")?M:M+"+")}else z(!1),ce(null),b("+")}},[A,y,a]),T.useEffect(()=>{if(!!!y){if(dr.current){try{U.removeChannel(dr.current)}catch{}dr.current=null}Qt("idle");return}const F=Cp(y);if(!F)return;Qt("connecting");const M=U.channel(F,{config:{broadcast:{ack:!0},presence:{key:Ua.current}}});return M.on("broadcast",{event:"calc_update"},({payload:V})=>{if((V==null?void 0:V.clientId)===Ua.current)return;const $=Date.now();Ti.current&&$-Yc.current<250||(Ep.current=V==null?void 0:V.senderId,b((V==null?void 0:V.expr)??""))}),M.subscribe(V=>{var $;V==="SUBSCRIBED"?(Qt("subscribed"),M.track({sessionId:t.id,itemId:y.id,userId:(r==null?void 0:r.id)||null,username:(($=r==null?void 0:r.user_metadata)==null?void 0:$.username)||null,clientId:Ua.current}).catch(()=>{})):(V==="CHANNEL_ERROR"||V==="TIMED_OUT"||V==="CLOSED")&&Qt("error")}),dr.current=M,()=>{try{U.removeChannel(M)}catch{}dr.current=null,Qt("idle")}},[y,t,r]);const Ap=async()=>{try{c(!0);const{data:N,error:F}=await U.from("session_items").select(`
          items (
            id,
            sku,
            item_code,
            item_name,
            uom,
            category,
            tags,
            internal_product_code
          )
        `).eq("session_id",t.id);if(F)throw F;const M=N.map(le=>le.items).filter(Boolean);i(M);const V=[...new Set(M.map(le=>le.category).filter(Boolean))],{data:$,error:G}=await U.from("counts").select(`
          *,
          items (
            id,
            item_name,
            sku
          ),
          locations (
            name
          )
        `).eq("session_id",t.id);if(G)throw G;const pe={};if($.forEach(le=>{var cn;pe[le.item_id]||(pe[le.item_id]=[]),pe[le.item_id].push({location:((cn=le.locations)==null?void 0:cn.name)||"Unknown",countedQty:le.counted_qty,calculation:le.counted_qty_calculation,timestamp:le.timestamp,id:le.id})}),o(pe),V.length>0){const{data:le,error:cn}=await U.from("categories").select("id, name").in("name",V);if(cn)throw cn;X(le);const rf=le.map(Ns=>Ns.id);if(rf.length>0){const{data:Ns,error:Rp}=await U.from("locations").select("*").in("category_id",rf).eq("is_active",!0).order("name");Rp||l(Ns||[])}else l([])}else l([])}catch{}finally{c(!1)}},Qc=async N=>{try{const{data:F,error:M}=await U.from("counts").select(`
          *,
          locations ( name )
        `).eq("session_id",t.id).eq("item_id",N);if(M)throw M;const V=(F||[]).map($=>{var G;return{location:((G=$.locations)==null?void 0:G.name)||"Unknown",countedQty:$.counted_qty,calculation:$.counted_qty_calculation,timestamp:$.timestamp,id:$.id}});o($=>({...$,[N]:V}))}catch{}},bp=()=>{const N=U.channel(`counts:${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"counts",filter:`session_id=eq.${t.id}`},F=>{Ip(F)}).subscribe(F=>{});return()=>{try{N.unsubscribe()}catch{}}},Ip=async N=>{const{eventType:F,new:M,old:V}=N;if(F==="INSERT"&&M)try{const{data:$}=await U.from("locations").select("name").eq("id",M.location_id).eq("is_active",!0).single();$&&o(G=>{const pe={...G},le=M.item_id;pe[le]||(pe[le]=[]);const cn={location:$.name,countedQty:M.counted_qty,calculation:M.counted_qty_calculation,timestamp:M.timestamp,id:M.id};return pe[le]=[...pe[le],cn],pe})}catch{}else F==="UPDATE"&&M?o($=>{const G={...$},pe=M.item_id;return G[pe]&&(G[pe]=G[pe].map(le=>le.id===M.id?{...le,countedQty:M.counted_qty,calculation:M.counted_qty_calculation,timestamp:M.timestamp}:le)),G}):F==="DELETE"&&V&&o($=>{const G={...$},pe=V.item_id;return G[pe]&&(G[pe]=G[pe].filter(le=>le.id!==V.id),G[pe].length===0&&delete G[pe]),G})},Jc=T.useMemo(()=>n.filter(N=>{const F=N.sku.toLowerCase().includes(f.toLowerCase())||N.item_name.toLowerCase().includes(f.toLowerCase())||N.item_code.toLowerCase().includes(f.toLowerCase())||N.internal_product_code&&N.internal_product_code.toLowerCase().includes(f.toLowerCase()),V=(a[N.id]||[]).length>0;return p==="counted"?F&&V:p==="uncounted"?F&&!V:F}),[n,f,p,a]),Np=async N=>{var $;_(N);const F=L.find(G=>G.name===N.category),M=F?s.filter(G=>G.category_id===F.id):[],V=P&&M.some(G=>G.name===P)?P:(($=M[0])==null?void 0:$.name)||"";C(V),w(!0),Qc(N.id)},ef=N=>{C(N),N&&s.some(F=>F.name===N)&&(O(N),localStorage.setItem(`lastSelectedLocation_${t.id}_${r.id}`,N))},Tp=async N=>{var $;_(N);const F=L.find(G=>G.name===N.category),M=F?s.filter(G=>G.category_id===F.id):[],V=P&&M.some(G=>G.name===P)?P:(($=M[0])==null?void 0:$.name)||"";C(V),m(!0),Qc(N.id)},tf=(N,F)=>{N.stopPropagation();const M=new Set(J);M.has(F)?M.delete(F):M.add(F),q(M)},Op=async()=>{if(!(!y||!A||!E||Ce))try{if(R(!0),ee){const{error:N}=await U.from("counts").update({counted_qty:K,counted_qty_calculation:E.trim()}).eq("id",te);if(N)throw N;o(F=>{const M={...F},V=y.id;return M[V]&&(M[V]=M[V].map($=>$.id===te?{...$,countedQty:K,calculation:E.trim()}:$)),M})}else{const{data:N,error:F}=await U.from("locations").select("id").eq("name",A).eq("is_active",!0).single();if(F)throw F;const{data:M,error:V}=await U.from("counts").insert({session_id:t.id,item_id:y.id,user_id:r.id,location_id:N.id,counted_qty:K,counted_qty_calculation:E.trim()}).select().single();if(V)throw V;M&&o($=>{const G={...$},pe=y.id;G[pe]||(G[pe]=[]);const le={location:A,countedQty:M.counted_qty,calculation:M.counted_qty_calculation,timestamp:M.timestamp,id:M.id};return G[pe]=[...G[pe],le],G})}w(!1),b(""),_(null),z(!1),ce(null),fe(null),Ke(null)}catch(N){alert("Error saving count: "+N.message)}finally{R(!1)}},kp=(N,F)=>{d(N);const M=n.find(V=>V.internal_product_code===N);M?Np(M):console.log("Scanned code not found in items:",N),jn(!1)},Dp=N=>{console.error("Scan error:",N)};return u?h.jsxs("div",{className:"min-h-screen bg-gray-100",children:[h.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsx("div",{className:"flex justify-between items-center py-4",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:e,className:"text-gray-600 hover:text-gray-800 p-1 rounded-full hover:bg-gray-100",children:h.jsx(Pd,{className:"h-6 w-6"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-xl font-bold text-gray-900 truncate",children:t.name}),h.jsx("p",{className:"text-gray-600 text-sm",children:"Loading items..."})]})]})})})}),h.jsx("div",{className:"flex items-center justify-center py-8",children:h.jsx("div",{className:"spinner"})})]}):h.jsxs("div",{className:"min-h-screen bg-gray-100",children:[h.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex justify-between items-center py-4",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:e,className:"text-gray-600 hover:text-gray-800 p-1 rounded-full hover:bg-gray-100",children:h.jsx(Pd,{className:"h-6 w-6"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-xl font-bold text-gray-900 truncate",children:t.name}),h.jsxs("p",{className:"text-gray-600 text-sm",children:["Items: ",Jc.length," of ",n.length]})]})]}),h.jsx("div",{className:"flex items-center space-x-2"})]})})}),h.jsxs("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[h.jsx("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[h.jsxs("div",{className:"flex-1 relative",children:[h.jsx(Au,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),h.jsx("input",{type:"text",placeholder:"Search SKU, name, or code...",value:f,onChange:N=>d(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("select",{value:p,onChange:N=>v(N.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[h.jsx("option",{value:"all",children:"All Items"}),h.jsx("option",{value:"counted",children:"Counted"}),h.jsx("option",{value:"uncounted",children:"Uncounted"})]}),Iu()&&h.jsxs("button",{onClick:()=>jn(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center space-x-2",children:[h.jsx(b2,{className:"h-4 w-4"}),h.jsx("span",{children:"Scan"})]})]})]})}),h.jsx("div",{className:"grid gap-4",children:Jc.map(N=>{const F=a[N.id]||[],M=F.length>0,V=F.reduce(($,G)=>$+G.countedQty,0);return h.jsxs("div",{className:`bg-white rounded-lg shadow hover:shadow-md transition-all ${M?"border-l-4 border-green-500":"border-l-4 border-gray-300"}`,children:[h.jsxs("div",{onClick:()=>Tp(N),className:"p-3 hover:bg-gray-50 cursor-pointer flex justify-between items-start",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[h.jsx("span",{className:"font-semibold text-gray-900",children:N.sku}),h.jsx("span",{className:"text-gray-500",children:"|"}),h.jsx("span",{className:"text-gray-600",children:N.item_code}),M?h.jsx(Ss,{className:"h-5 w-5 text-green-500"}):h.jsx(e2,{className:"h-5 w-5 text-gray-400"})]}),h.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:N.item_name}),h.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-2",children:[h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx(Ba,{className:"h-4 w-4"}),h.jsx("span",{children:N.uom})]}),h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx(Lx,{className:"h-4 w-4"}),h.jsx("span",{children:N.category})]}),M&&h.jsxs("span",{className:"font-semibold text-green-600",children:["Total: ",V," ",N.uom]})]})]}),h.jsx("div",{className:"flex items-center space-x-2",children:J.has(N.id)?h.jsx(Yx,{className:"h-5 w-5 text-gray-500 cursor-pointer hover:text-gray-700",onClick:$=>tf($,N.id)}):h.jsx(Xx,{className:"h-5 w-5 text-gray-500 cursor-pointer hover:text-gray-700",onClick:$=>tf($,N.id)})})]}),J.has(N.id)&&h.jsx("div",{className:"p-3 border-t",children:M&&h.jsxs("div",{children:[h.jsx("div",{className:"flex justify-between items-center mb-1",children:h.jsxs("h4",{className:"font-semibold text-sm text-gray-700",children:["Total Counted: ",V," ",N.uom]})}),h.jsx("ul",{className:"space-y-0.5 text-sm",children:F.map(($,G)=>h.jsxs("li",{className:"flex items-center bg-gray-50 p-1.5 rounded",children:[h.jsx(y2,{className:"h-4 w-4 text-gray-500 mr-2"}),h.jsxs("span",{className:"font-medium text-gray-600",children:[$.location,":"]}),h.jsx("span",{className:"ml-2 text-green-700 font-bold",children:$.countedQty})]},G))})]})})]},N.id)})})]}),g&&y&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white p-6 rounded-lg w-full max-w-md",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-base font-bold",children:ee?"Edit Item Count":"Add Item Count"}),h.jsx("button",{onClick:()=>{w(!1),z(!1),ce(null),fe(null),Ke(null)},className:"text-gray-400 hover:text-gray-600",children:h.jsx(Pt,{className:"h-6 w-6"})})]}),h.jsxs("div",{className:"mb-4",children:[h.jsxs("p",{className:"text-sm text-gray-600",children:["SKU: ",y.sku]}),h.jsx("p",{className:"font-medium",children:y.item_name})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Location"}),h.jsxs("select",{value:A,onChange:N=>ef(N.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[h.jsx("option",{value:"",children:"Select Location"}),(()=>{const N=L.find(M=>M.name===y.category);return(N?s.filter(M=>M.category_id===N.id):[]).map(M=>h.jsx("option",{value:M.name,children:M.name},M.id))})()]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity Calculation"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"relative",children:h.jsx("textarea",{value:E,onChange:N=>{$a(N.target.value),setTimeout(()=>{N.target.style.height="auto",N.target.style.height=N.target.scrollHeight+"px";const F=N.target.selectionStart,$=N.target.value.substring(0,F).split(`
`).length,G=24;N.target.scrollTop=Math.max(0,($-2)*G),N.target.scrollLeft=N.target.scrollWidth},0)},onFocus:N=>{Ti.current=!0,setTimeout(()=>{const F=N.target.selectionStart,$=N.target.value.substring(0,F).split(`
`).length,G=24;N.target.scrollTop=Math.max(0,($-2)*G),N.target.scrollLeft=N.target.scrollWidth},0)},onClick:N=>{setTimeout(()=>{const F=N.target.selectionStart,$=N.target.value.substring(0,F).split(`
`).length,G=24;N.target.scrollTop=Math.max(0,($-2)*G)},0)},onBlur:()=>{Ti.current=!1},placeholder:"Enter expression (e.g., 5*10+5*20)",className:`mt-1 block w-full px-3 py-3 pr-24 rounded-md focus:outline-none focus:ring-2 border-2 font-mono resize-none overflow-auto ${Ce?"border-red-500 focus:ring-red-500":"border-gray-400 focus:ring-blue-500"}`,required:!0,rows:1,style:{minHeight:"3.5rem",maxHeight:"8rem",paddingRight:K>9999?"7rem":K>999?"6rem":K>99?"5.5rem":K>9?"5rem":"6rem",wordBreak:"break-all",whiteSpace:"pre-wrap",overflowWrap:"break-word"},onInput:N=>{N.target.style.height="auto";const F=N.target.scrollHeight,M=128;N.target.style.height=Math.min(F,M)+"px"}})}),h.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",children:h.jsx(Rd,{className:"h-4 w-4"})}),Ce&&h.jsx("div",{className:"absolute -top-2 -right-2 w-3 h-3 bg-red-500 rounded-full pointer-events-none"}),E&&!Ce&&h.jsx("div",{className:"absolute right-10 top-1/2 transform -translate-y-1/2 pointer-events-none",children:h.jsx("div",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm font-bold shadow-md",children:Zc(K)})})]}),Ce&&h.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-md",children:h.jsxs("div",{className:"text-sm text-red-600 flex items-center",children:[h.jsx("span",{className:"mr-2",children:"⚠️"}),h.jsx("span",{children:Ce.message})]})}),h.jsx("div",{className:"mt-3",children:h.jsx(Bd,{value:E,onChange:$a})})]})]}),h.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[h.jsx("button",{onClick:()=>{w(!1),b(""),_(null),z(!1),ce(null),fe(null),Ke(null)},className:"px-4 py-2 text-gray-600 border rounded-md hover:bg-gray-50",disabled:D,children:"Cancel"}),h.jsxs("button",{onClick:Op,disabled:!A||!E||D||Ce,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-300 flex items-center space-x-2",children:[D?h.jsx("div",{className:"spinner w-4 h-4"}):h.jsx(Su,{className:"h-4 w-4"}),h.jsx("span",{children:"Save Count"})]})]})]})}),x&&y&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white p-6 rounded-lg w-full max-w-md",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-lg font-bold",children:ee?"Edit Item Count":"Add Item Count"}),h.jsx("button",{onClick:()=>{m(!1),_(null),b(""),z(!1),ce(null),fe(null),Ke(null)},className:"text-gray-400 hover:text-gray-600",children:h.jsx(Pt,{className:"h-6 w-6"})})]}),h.jsxs("div",{className:"mb-4",children:[h.jsxs("p",{className:"text-sm text-gray-600",children:["SKU: ",y.sku," | Code: ",y.item_code]}),h.jsx("p",{className:"font-medium",children:y.item_name})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Location"}),h.jsxs("select",{value:A,onChange:N=>ef(N.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[h.jsx("option",{value:"",children:"Select Location"}),(()=>{const N=L.find(M=>M.name===y.category);return(N?s.filter(M=>M.category_id===N.id):[]).map(M=>h.jsx("option",{value:M.name,children:M.name},M.id))})()]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity Calculation"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"relative",children:h.jsx("textarea",{value:E,onChange:N=>{$a(N.target.value),setTimeout(()=>{N.target.style.height="auto",N.target.style.height=N.target.scrollHeight+"px";const F=N.target.selectionStart,$=N.target.value.substring(0,F).split(`
`).length,G=24;N.target.scrollTop=Math.max(0,($-2)*G),N.target.scrollLeft=N.target.scrollWidth},0)},onFocus:N=>{Ti.current=!0,setTimeout(()=>{const F=N.target.selectionStart,$=N.target.value.substring(0,F).split(`
`).length,G=24;N.target.scrollTop=Math.max(0,($-2)*G),N.target.scrollLeft=N.target.scrollWidth},0)},onClick:N=>{setTimeout(()=>{const F=N.target.selectionStart,$=N.target.value.substring(0,F).split(`
`).length,G=24;N.target.scrollTop=Math.max(0,($-2)*G)},0)},onBlur:()=>{Ti.current=!1},placeholder:"Enter expression (e.g., 5*10+5*20)",className:`mt-1 block w-full px-3 py-3 pr-24 rounded-md focus:outline-none focus:ring-2 border-2 font-mono resize-none overflow-auto ${Ce?"border-red-500 focus:ring-red-500":"border-gray-400 focus:ring-blue-500"}`,required:!0,rows:1,style:{minHeight:"3.5rem",maxHeight:"8rem",paddingRight:K>9999?"7rem":K>999?"6rem":K>99?"5.5rem":K>9?"5rem":"6rem",wordBreak:"break-all",whiteSpace:"pre-wrap",overflowWrap:"break-word"},onInput:N=>{N.target.style.height="auto";const F=N.target.scrollHeight,M=128;N.target.style.height=Math.min(F,M)+"px"}})}),h.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",children:h.jsx(Rd,{className:"h-5 w-5"})}),Ce&&h.jsx("div",{className:"absolute -top-2 -right-2 w-3 h-3 bg-red-500 rounded-full pointer-events-none"}),E&&!Ce&&h.jsx("div",{className:"absolute right-10 top-1/2 transform -translate-y-1/2 pointer-events-none",children:h.jsx("div",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm font-bold shadow-md",children:Zc(K)})})]}),Ce&&h.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-md",children:h.jsxs("div",{className:"text-sm text-red-600 flex items-center",children:[h.jsx("span",{className:"mr-2",children:"⚠️"}),h.jsx("span",{children:Ce.message})]})}),h.jsx("div",{className:"mt-3",children:h.jsx(Bd,{value:E,onChange:$a})})]})]}),h.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[h.jsx("button",{onClick:()=>{m(!1),b(""),_(null),z(!1),ce(null),fe(null),Ke(null),fe(null),Ke(null)},className:"px-4 py-2 text-gray-600 border rounded-md hover:bg-gray-50",disabled:D,children:"Close"}),h.jsxs("button",{onClick:async()=>{if(!(!y||!A||!E||Ce))try{if(R(!0),ee){const{error:N}=await U.from("counts").update({counted_qty:K,counted_qty_calculation:E.trim()}).eq("id",te);if(N)throw N;o(F=>{const M={...F},V=y.id;return M[V]&&(M[V]=M[V].map($=>$.id===te?{...$,countedQty:K,calculation:E.trim()}:$)),M})}else{const{data:N,error:F}=await U.from("locations").select("id").eq("name",A).eq("is_active",!0).single();if(F)throw F;const{data:M,error:V}=await U.from("counts").insert({session_id:t.id,item_id:y.id,user_id:r.id,location_id:N.id,counted_qty:K,counted_qty_calculation:E.trim()}).select().single();if(V)throw V;M&&o($=>{const G={...$},pe=y.id;G[pe]||(G[pe]=[]);const le={location:A,countedQty:M.counted_qty,calculation:M.counted_qty_calculation,timestamp:M.timestamp,id:M.id};return G[pe]=[...G[pe],le],G})}m(!1),b(""),_(null),z(!1),ce(null)}catch(N){alert("Error saving count: "+N.message)}finally{R(!1)}},disabled:!A||!E||D||Ce,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-300 flex items-center space-x-2",children:[D?h.jsx("div",{className:"spinner w-4 h-4"}):h.jsx(Su,{className:"h-4 w-4"}),h.jsx("span",{children:"Save"})]})]})]})}),h.jsx(VE,{isOpen:Rr,onClose:()=>jn(!1),onScanSuccess:kp,onScanError:Dp})]})},GE=()=>{const{user:t,profile:e,loading:r,isAuthenticated:n,isAdmin:i,signOut:a}=Ii(),[o,s]=T.useState("login"),[l,u]=T.useState(null);if(r)return h.jsx(F2,{});if(!n||!t)return h.jsx(B2,{});const c=d=>{u(d),s("items-list")},f=()=>{u(null),s("select-session")};return i&&o==="login"?h.jsx(Md,{user:t,signOut:a}):!i&&o==="select-session"?h.jsx(jd,{onSessionSelect:c}):o==="items-list"&&l?h.jsx(WE,{session:l,onBack:f}):i?h.jsx(Md,{user:t,signOut:a}):h.jsx(jd,{onSessionSelect:c})};xl.createRoot(document.getElementById("root")).render(h.jsx(Ot.StrictMode,{children:h.jsx(Dx,{children:h.jsx(GE,{})})}));
